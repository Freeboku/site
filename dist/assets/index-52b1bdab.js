function lP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ap(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var hw={exports:{}},ru={},pw={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja=Symbol.for("react.element"),uP=Symbol.for("react.portal"),dP=Symbol.for("react.fragment"),fP=Symbol.for("react.strict_mode"),hP=Symbol.for("react.profiler"),pP=Symbol.for("react.provider"),mP=Symbol.for("react.context"),gP=Symbol.for("react.forward_ref"),vP=Symbol.for("react.suspense"),yP=Symbol.for("react.memo"),xP=Symbol.for("react.lazy"),bv=Symbol.iterator;function wP(e){return e===null||typeof e!="object"?null:(e=bv&&e[bv]||e["@@iterator"],typeof e=="function"?e:null)}var mw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gw=Object.assign,vw={};function Xo(e,t,n){this.props=e,this.context=t,this.refs=vw,this.updater=n||mw}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yw(){}yw.prototype=Xo.prototype;function Rp(e,t,n){this.props=e,this.context=t,this.refs=vw,this.updater=n||mw}var $p=Rp.prototype=new yw;$p.constructor=Rp;gw($p,Xo.prototype);$p.isPureReactComponent=!0;var _v=Array.isArray,xw=Object.prototype.hasOwnProperty,Ip={current:null},ww={key:!0,ref:!0,__self:!0,__source:!0};function bw(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)xw.call(t,r)&&!ww.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ja,type:e,key:o,ref:i,props:s,_owner:Ip.current}}function bP(e,t){return{$$typeof:ja,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dp(e){return typeof e=="object"&&e!==null&&e.$$typeof===ja}function _P(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cv=/\/+/g;function Cd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_P(""+e.key):t.toString(36)}function Vl(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ja:case uP:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Cd(i,0):r,_v(s)?(n="",e!=null&&(n=e.replace(Cv,"$&/")+"/"),Vl(s,t,n,"",function(u){return u})):s!=null&&(Dp(s)&&(s=bP(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Cv,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",_v(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Cd(o,a);i+=Vl(o,t,n,l,s)}else if(l=wP(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Cd(o,a++),i+=Vl(o,t,n,l,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function rl(e,t,n){if(e==null)return e;var r=[],s=0;return Vl(e,r,"","",function(o){return t.call(n,o,s++)}),r}function CP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},Wl={transition:null},SP={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:Ip};function _w(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:rl,forEach:function(e,t,n){rl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rl(e,function(){t++}),t},toArray:function(e){return rl(e,function(t){return t})||[]},only:function(e){if(!Dp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=Xo;Ee.Fragment=dP;Ee.Profiler=hP;Ee.PureComponent=Rp;Ee.StrictMode=fP;Ee.Suspense=vP;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SP;Ee.act=_w;Ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gw({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Ip.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)xw.call(t,l)&&!ww.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ja,type:e.type,key:s,ref:o,props:r,_owner:i}};Ee.createContext=function(e){return e={$$typeof:mP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pP,_context:e},e.Consumer=e};Ee.createElement=bw;Ee.createFactory=function(e){var t=bw.bind(null,e);return t.type=e,t};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:gP,render:e}};Ee.isValidElement=Dp;Ee.lazy=function(e){return{$$typeof:xP,_payload:{_status:-1,_result:e},_init:CP}};Ee.memo=function(e,t){return{$$typeof:yP,type:e,compare:t===void 0?null:t}};Ee.startTransition=function(e){var t=Wl.transition;Wl.transition={};try{e()}finally{Wl.transition=t}};Ee.unstable_act=_w;Ee.useCallback=function(e,t){return At.current.useCallback(e,t)};Ee.useContext=function(e){return At.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return At.current.useDeferredValue(e)};Ee.useEffect=function(e,t){return At.current.useEffect(e,t)};Ee.useId=function(){return At.current.useId()};Ee.useImperativeHandle=function(e,t,n){return At.current.useImperativeHandle(e,t,n)};Ee.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};Ee.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};Ee.useMemo=function(e,t){return At.current.useMemo(e,t)};Ee.useReducer=function(e,t,n){return At.current.useReducer(e,t,n)};Ee.useRef=function(e){return At.current.useRef(e)};Ee.useState=function(e){return At.current.useState(e)};Ee.useSyncExternalStore=function(e,t,n){return At.current.useSyncExternalStore(e,t,n)};Ee.useTransition=function(){return At.current.useTransition()};Ee.version="18.3.1";pw.exports=Ee;var m=pw.exports;const ce=Ap(m),Pa=lP({__proto__:null,default:ce},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP=m,kP=Symbol.for("react.element"),jP=Symbol.for("react.fragment"),PP=Object.prototype.hasOwnProperty,NP=EP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TP={key:!0,ref:!0,__self:!0,__source:!0};function Cw(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)PP.call(t,r)&&!TP.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:kP,type:e,key:o,ref:i,props:s,_owner:NP.current}}ru.Fragment=jP;ru.jsx=Cw;ru.jsxs=Cw;hw.exports=ru;var c=hw.exports,Mf={},Sw={exports:{}},Qt={},Ew={exports:{}},kw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,$){var W=z.length;z.push($);e:for(;0<W;){var A=W-1>>>1,D=z[A];if(0<s(D,$))z[A]=$,z[W]=D,W=A;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var $=z[0],W=z.pop();if(W!==$){z[0]=W;e:for(var A=0,D=z.length,X=D>>>1;A<X;){var Y=2*(A+1)-1,H=z[Y],Z=Y+1,J=z[Z];if(0>s(H,W))Z<D&&0>s(J,H)?(z[A]=J,z[Z]=W,A=Z):(z[A]=H,z[Y]=W,A=Y);else if(Z<D&&0>s(J,W))z[A]=J,z[Z]=W,A=Z;else break e}}return $}function s(z,$){var W=z.sortIndex-$.sortIndex;return W!==0?W:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],u=[],d=1,f=null,h=3,p=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=z)r(u),$.sortIndex=$.expirationTime,t(l,$);else break;$=n(u)}}function _(z){if(g=!1,b(z),!y)if(n(l)!==null)y=!0,V(S);else{var $=n(u);$!==null&&B(_,$.startTime-z)}}function S(z,$){y=!1,g&&(g=!1,v(j),j=-1),p=!0;var W=h;try{for(b($),f=n(l);f!==null&&(!(f.expirationTime>$)||z&&!F());){var A=f.callback;if(typeof A=="function"){f.callback=null,h=f.priorityLevel;var D=A(f.expirationTime<=$);$=e.unstable_now(),typeof D=="function"?f.callback=D:f===n(l)&&r(l),b($)}else r(l);f=n(l)}if(f!==null)var X=!0;else{var Y=n(u);Y!==null&&B(_,Y.startTime-$),X=!1}return X}finally{f=null,h=W,p=!1}}var N=!1,k=null,j=-1,T=5,M=-1;function F(){return!(e.unstable_now()-M<T)}function P(){if(k!==null){var z=e.unstable_now();M=z;var $=!0;try{$=k(!0,z)}finally{$?L():(N=!1,k=null)}}else N=!1}var L;if(typeof x=="function")L=function(){x(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,O=C.port2;C.port1.onmessage=P,L=function(){O.postMessage(null)}}else L=function(){w(P,0)};function V(z){k=z,N||(N=!0,L())}function B(z,$){j=w(function(){z(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,V(S))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var W=h;h=$;try{return z()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=h;h=z;try{return $()}finally{h=W}},e.unstable_scheduleCallback=function(z,$,W){var A=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?A+W:A):W=A,z){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=W+D,z={id:d++,callback:$,priorityLevel:z,startTime:W,expirationTime:D,sortIndex:-1},W>A?(z.sortIndex=W,t(u,z),n(l)===null&&z===n(u)&&(g?(v(j),j=-1):g=!0,B(_,W-A))):(z.sortIndex=D,t(l,z),y||p||(y=!0,V(S))),z},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(z){var $=h;return function(){var W=h;h=$;try{return z.apply(this,arguments)}finally{h=W}}}})(kw);Ew.exports=kw;var AP=Ew.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP=m,Zt=AP;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jw=new Set,Zi={};function Ms(e,t){Ao(e,t),Ao(e+"Capture",t)}function Ao(e,t){for(Zi[e]=t,e=0;e<t.length;e++)jw.add(t[e])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=Object.prototype.hasOwnProperty,$P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sv={},Ev={};function IP(e){return Lf.call(Ev,e)?!0:Lf.call(Sv,e)?!1:$P.test(e)?Ev[e]=!0:(Sv[e]=!0,!1)}function DP(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OP(e,t,n,r){if(t===null||typeof t>"u"||DP(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rt(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new Rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new Rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new Rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new Rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new Rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new Rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pt[e]=new Rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pt[e]=new Rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pt[e]=new Rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Op=/[\-:]([a-z])/g;function Mp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Op,Mp);pt[t]=new Rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Op,Mp);pt[t]=new Rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Op,Mp);pt[t]=new Rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new Rt(e,1,!1,e.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pt[e]=new Rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lp(e,t,n,r){var s=pt.hasOwnProperty(t)?pt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OP(t,n,s,r)&&(n=null),r||s===null?IP(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var yr=RP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),ro=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),Fp=Symbol.for("react.strict_mode"),Ff=Symbol.for("react.profiler"),Pw=Symbol.for("react.provider"),Nw=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),Up=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),Tw=Symbol.for("react.offscreen"),kv=Symbol.iterator;function hi(e){return e===null||typeof e!="object"?null:(e=kv&&e[kv]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Sd;function ki(e){if(Sd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sd=t&&t[1]||""}return`
`+Sd+e}var Ed=!1;function kd(e,t){if(!e||Ed)return"";Ed=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{Ed=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ki(e):""}function MP(e){switch(e.tag){case 5:return ki(e.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 2:case 15:return e=kd(e.type,!1),e;case 11:return e=kd(e.type.render,!1),e;case 1:return e=kd(e.type,!0),e;default:return""}}function Bf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case so:return"Fragment";case ro:return"Portal";case Ff:return"Profiler";case Fp:return"StrictMode";case zf:return"Suspense";case Uf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nw:return(e.displayName||"Context")+".Consumer";case Pw:return(e._context.displayName||"Context")+".Provider";case zp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Up:return t=e.displayName||null,t!==null?t:Bf(e.type)||"Memo";case Nr:t=e._payload,e=e._init;try{return Bf(e(t))}catch{}}return null}function LP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bf(t);case 8:return t===Fp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Aw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FP(e){var t=Aw(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ol(e){e._valueTracker||(e._valueTracker=FP(e))}function Rw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Aw(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ic(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vf(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $w(e,t){t=t.checked,t!=null&&Lp(e,"checked",t,!1)}function Wf(e,t){$w(e,t);var n=Zr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hf(e,t.type,Zr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hf(e,t,n){(t!=="number"||ic(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ji=Array.isArray;function wo(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Kf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ne(92));if(ji(n)){if(1<n.length)throw Error(ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zr(n)}}function Iw(e,t){var n=Zr(t.value),r=Zr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Tv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var il,Ow=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ji(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zP=["Webkit","ms","Moz","O"];Object.keys($i).forEach(function(e){zP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$i[t]=$i[e]})});function Mw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$i.hasOwnProperty(e)&&$i[e]?(""+t).trim():t+"px"}function Lw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Mw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var UP=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qf(e,t){if(t){if(UP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Xf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yf=null;function Bp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zf=null,bo=null,_o=null;function Av(e){if(e=Aa(e)){if(typeof Zf!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=lu(t),Zf(e.stateNode,e.type,t))}}function Fw(e){bo?_o?_o.push(e):_o=[e]:bo=e}function zw(){if(bo){var e=bo,t=_o;if(_o=bo=null,Av(e),t)for(e=0;e<t.length;e++)Av(t[e])}}function Uw(e,t){return e(t)}function Bw(){}var jd=!1;function Vw(e,t,n){if(jd)return e(t,n);jd=!0;try{return Uw(e,t,n)}finally{jd=!1,(bo!==null||_o!==null)&&(Bw(),zw())}}function Qi(e,t){var n=e.stateNode;if(n===null)return null;var r=lu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var Jf=!1;if(sr)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Jf=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Jf=!1}function BP(e,t,n,r,s,o,i,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ii=!1,ac=null,lc=!1,Qf=null,VP={onError:function(e){Ii=!0,ac=e}};function WP(e,t,n,r,s,o,i,a,l){Ii=!1,ac=null,BP.apply(VP,arguments)}function HP(e,t,n,r,s,o,i,a,l){if(WP.apply(this,arguments),Ii){if(Ii){var u=ac;Ii=!1,ac=null}else throw Error(ne(198));lc||(lc=!0,Qf=u)}}function Ls(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ww(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rv(e){if(Ls(e)!==e)throw Error(ne(188))}function KP(e){var t=e.alternate;if(!t){if(t=Ls(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Rv(s),e;if(o===r)return Rv(s),t;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function Hw(e){return e=KP(e),e!==null?Kw(e):null}function Kw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kw(e);if(t!==null)return t;e=e.sibling}return null}var Gw=Zt.unstable_scheduleCallback,$v=Zt.unstable_cancelCallback,GP=Zt.unstable_shouldYield,qP=Zt.unstable_requestPaint,nt=Zt.unstable_now,XP=Zt.unstable_getCurrentPriorityLevel,Vp=Zt.unstable_ImmediatePriority,qw=Zt.unstable_UserBlockingPriority,cc=Zt.unstable_NormalPriority,YP=Zt.unstable_LowPriority,Xw=Zt.unstable_IdlePriority,su=null,Mn=null;function ZP(e){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(su,e,void 0,(e.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:eN,JP=Math.log,QP=Math.LN2;function eN(e){return e>>>=0,e===0?32:31-(JP(e)/QP|0)|0}var al=64,ll=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Pi(a):(o&=i,o!==0&&(r=Pi(o)))}else i=n&~s,i!==0?r=Pi(i):o!==0&&(r=Pi(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bn(t),s=1<<n,r|=e[n],t&=~s;return r}function tN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-bn(o),a=1<<i,l=s[i];l===-1?(!(a&n)||a&r)&&(s[i]=tN(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function eh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yw(){var e=al;return al<<=1,!(al&4194240)&&(al=64),e}function Pd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Na(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bn(t),e[t]=n}function rN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-bn(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Wp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Re=0;function Zw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jw,Hp,Qw,eb,tb,th=!1,cl=[],Fr=null,zr=null,Ur=null,ea=new Map,ta=new Map,$r=[],sN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iv(e,t){switch(e){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(t.pointerId)}}function mi(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Aa(t),t!==null&&Hp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oN(e,t,n,r,s){switch(t){case"focusin":return Fr=mi(Fr,e,t,n,r,s),!0;case"dragenter":return zr=mi(zr,e,t,n,r,s),!0;case"mouseover":return Ur=mi(Ur,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ea.set(o,mi(ea.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,ta.set(o,mi(ta.get(o)||null,e,t,n,r,s)),!0}return!1}function nb(e){var t=ws(e.target);if(t!==null){var n=Ls(t);if(n!==null){if(t=n.tag,t===13){if(t=Ww(n),t!==null){e.blockedOn=t,tb(e.priority,function(){Qw(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Yf=r,n.target.dispatchEvent(r),Yf=null}else return t=Aa(n),t!==null&&Hp(t),e.blockedOn=n,!1;t.shift()}return!0}function Dv(e,t,n){Hl(e)&&n.delete(t)}function iN(){th=!1,Fr!==null&&Hl(Fr)&&(Fr=null),zr!==null&&Hl(zr)&&(zr=null),Ur!==null&&Hl(Ur)&&(Ur=null),ea.forEach(Dv),ta.forEach(Dv)}function gi(e,t){e.blockedOn===t&&(e.blockedOn=null,th||(th=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,iN)))}function na(e){function t(s){return gi(s,e)}if(0<cl.length){gi(cl[0],e);for(var n=1;n<cl.length;n++){var r=cl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fr!==null&&gi(Fr,e),zr!==null&&gi(zr,e),Ur!==null&&gi(Ur,e),ea.forEach(t),ta.forEach(t),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)nb(n),n.blockedOn===null&&$r.shift()}var Co=yr.ReactCurrentBatchConfig,dc=!0;function aN(e,t,n,r){var s=Re,o=Co.transition;Co.transition=null;try{Re=1,Kp(e,t,n,r)}finally{Re=s,Co.transition=o}}function lN(e,t,n,r){var s=Re,o=Co.transition;Co.transition=null;try{Re=4,Kp(e,t,n,r)}finally{Re=s,Co.transition=o}}function Kp(e,t,n,r){if(dc){var s=nh(e,t,n,r);if(s===null)Ld(e,t,r,fc,n),Iv(e,r);else if(oN(s,e,t,n,r))r.stopPropagation();else if(Iv(e,r),t&4&&-1<sN.indexOf(e)){for(;s!==null;){var o=Aa(s);if(o!==null&&Jw(o),o=nh(e,t,n,r),o===null&&Ld(e,t,r,fc,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Ld(e,t,r,null,n)}}var fc=null;function nh(e,t,n,r){if(fc=null,e=Bp(r),e=ws(e),e!==null)if(t=Ls(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ww(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fc=e,null}function rb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XP()){case Vp:return 1;case qw:return 4;case cc:case YP:return 16;case Xw:return 536870912;default:return 16}default:return 16}}var Or=null,Gp=null,Kl=null;function sb(){if(Kl)return Kl;var e,t=Gp,n=t.length,r,s="value"in Or?Or.value:Or.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return Kl=s.slice(e,1<r?1-r:void 0)}function Gl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function Ov(){return!1}function en(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ul:Ov,this.isPropagationStopped=Ov,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qp=en(Yo),Ta=Ze({},Yo,{view:0,detail:0}),cN=en(Ta),Nd,Td,vi,ou=Ze({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vi&&(vi&&e.type==="mousemove"?(Nd=e.screenX-vi.screenX,Td=e.screenY-vi.screenY):Td=Nd=0,vi=e),Nd)},movementY:function(e){return"movementY"in e?e.movementY:Td}}),Mv=en(ou),uN=Ze({},ou,{dataTransfer:0}),dN=en(uN),fN=Ze({},Ta,{relatedTarget:0}),Ad=en(fN),hN=Ze({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),pN=en(hN),mN=Ze({},Yo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gN=en(mN),vN=Ze({},Yo,{data:0}),Lv=en(vN),yN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wN[e])?!!t[e]:!1}function Xp(){return bN}var _N=Ze({},Ta,{key:function(e){if(e.key){var t=yN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xp,charCode:function(e){return e.type==="keypress"?Gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CN=en(_N),SN=Ze({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fv=en(SN),EN=Ze({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xp}),kN=en(EN),jN=Ze({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),PN=en(jN),NN=Ze({},ou,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TN=en(NN),AN=[9,13,27,32],Yp=sr&&"CompositionEvent"in window,Di=null;sr&&"documentMode"in document&&(Di=document.documentMode);var RN=sr&&"TextEvent"in window&&!Di,ob=sr&&(!Yp||Di&&8<Di&&11>=Di),zv=String.fromCharCode(32),Uv=!1;function ib(e,t){switch(e){case"keyup":return AN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ab(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oo=!1;function $N(e,t){switch(e){case"compositionend":return ab(t);case"keypress":return t.which!==32?null:(Uv=!0,zv);case"textInput":return e=t.data,e===zv&&Uv?null:e;default:return null}}function IN(e,t){if(oo)return e==="compositionend"||!Yp&&ib(e,t)?(e=sb(),Kl=Gp=Or=null,oo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ob&&t.locale!=="ko"?null:t.data;default:return null}}var DN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DN[e.type]:t==="textarea"}function lb(e,t,n,r){Fw(r),t=hc(t,"onChange"),0<t.length&&(n=new qp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Oi=null,ra=null;function ON(e){xb(e,0)}function iu(e){var t=lo(e);if(Rw(t))return e}function MN(e,t){if(e==="change")return t}var cb=!1;if(sr){var Rd;if(sr){var $d="oninput"in document;if(!$d){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),$d=typeof Vv.oninput=="function"}Rd=$d}else Rd=!1;cb=Rd&&(!document.documentMode||9<document.documentMode)}function Wv(){Oi&&(Oi.detachEvent("onpropertychange",ub),ra=Oi=null)}function ub(e){if(e.propertyName==="value"&&iu(ra)){var t=[];lb(t,ra,e,Bp(e)),Vw(ON,t)}}function LN(e,t,n){e==="focusin"?(Wv(),Oi=t,ra=n,Oi.attachEvent("onpropertychange",ub)):e==="focusout"&&Wv()}function FN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return iu(ra)}function zN(e,t){if(e==="click")return iu(t)}function UN(e,t){if(e==="input"||e==="change")return iu(t)}function BN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cn=typeof Object.is=="function"?Object.is:BN;function sa(e,t){if(Cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lf.call(t,s)||!Cn(e[s],t[s]))return!1}return!0}function Hv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kv(e,t){var n=Hv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hv(n)}}function db(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?db(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fb(){for(var e=window,t=ic();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ic(e.document)}return t}function Zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function VN(e){var t=fb(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&db(n.ownerDocument.documentElement,n)){if(r!==null&&Zp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Kv(n,o);var i=Kv(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var WN=sr&&"documentMode"in document&&11>=document.documentMode,io=null,rh=null,Mi=null,sh=!1;function Gv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sh||io==null||io!==ic(r)||(r=io,"selectionStart"in r&&Zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mi&&sa(Mi,r)||(Mi=r,r=hc(rh,"onSelect"),0<r.length&&(t=new qp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=io)))}function dl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ao={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},Id={},hb={};sr&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function au(e){if(Id[e])return Id[e];if(!ao[e])return e;var t=ao[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hb)return Id[e]=t[n];return e}var pb=au("animationend"),mb=au("animationiteration"),gb=au("animationstart"),vb=au("transitionend"),yb=new Map,qv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(e,t){yb.set(e,t),Ms(t,[e])}for(var Dd=0;Dd<qv.length;Dd++){var Od=qv[Dd],HN=Od.toLowerCase(),KN=Od[0].toUpperCase()+Od.slice(1);ss(HN,"on"+KN)}ss(pb,"onAnimationEnd");ss(mb,"onAnimationIteration");ss(gb,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(vb,"onTransitionEnd");Ao("onMouseEnter",["mouseout","mouseover"]);Ao("onMouseLeave",["mouseout","mouseover"]);Ao("onPointerEnter",["pointerout","pointerover"]);Ao("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Xv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,HP(r,t,void 0,e),e.currentTarget=null}function xb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;Xv(s,a,u),o=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;Xv(s,a,u),o=l}}}if(lc)throw e=Qf,lc=!1,Qf=null,e}function Ue(e,t){var n=t[ch];n===void 0&&(n=t[ch]=new Set);var r=e+"__bubble";n.has(r)||(wb(t,e,2,!1),n.add(r))}function Md(e,t,n){var r=0;t&&(r|=4),wb(n,e,r,t)}var fl="_reactListening"+Math.random().toString(36).slice(2);function oa(e){if(!e[fl]){e[fl]=!0,jw.forEach(function(n){n!=="selectionchange"&&(GN.has(n)||Md(n,!1,e),Md(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fl]||(t[fl]=!0,Md("selectionchange",!1,t))}}function wb(e,t,n,r){switch(rb(t)){case 1:var s=aN;break;case 4:s=lN;break;default:s=Kp}n=s.bind(null,t,n,e),s=void 0,!Jf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ld(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=ws(a),i===null)return;if(l=i.tag,l===5||l===6){r=o=i;continue e}a=a.parentNode}}r=r.return}Vw(function(){var u=o,d=Bp(n),f=[];e:{var h=yb.get(e);if(h!==void 0){var p=qp,y=e;switch(e){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":p=CN;break;case"focusin":y="focus",p=Ad;break;case"focusout":y="blur",p=Ad;break;case"beforeblur":case"afterblur":p=Ad;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kN;break;case pb:case mb:case gb:p=pN;break;case vb:p=PN;break;case"scroll":p=cN;break;case"wheel":p=TN;break;case"copy":case"cut":case"paste":p=gN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Fv}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var x=u,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=Qi(x,v),_!=null&&g.push(ia(x,_,b)))),w)break;x=x.return}0<g.length&&(h=new p(h,y,null,n,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Yf&&(y=n.relatedTarget||n.fromElement)&&(ws(y)||y[or]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?ws(y):null,y!==null&&(w=Ls(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(g=Mv,_="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=Fv,_="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?h:lo(p),b=y==null?h:lo(y),h=new g(_,x+"leave",p,n,d),h.target=w,h.relatedTarget=b,_=null,ws(d)===u&&(g=new g(v,x+"enter",y,n,d),g.target=b,g.relatedTarget=w,_=g),w=_,p&&y)t:{for(g=p,v=y,x=0,b=g;b;b=Gs(b))x++;for(b=0,_=v;_;_=Gs(_))b++;for(;0<x-b;)g=Gs(g),x--;for(;0<b-x;)v=Gs(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Gs(g),v=Gs(v)}g=null}else g=null;p!==null&&Yv(f,h,p,g,!1),y!==null&&w!==null&&Yv(f,w,y,g,!0)}}e:{if(h=u?lo(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=MN;else if(Bv(h))if(cb)S=UN;else{S=FN;var N=LN}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=zN);if(S&&(S=S(e,u))){lb(f,S,n,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Hf(h,"number",h.value)}switch(N=u?lo(u):window,e){case"focusin":(Bv(N)||N.contentEditable==="true")&&(io=N,rh=u,Mi=null);break;case"focusout":Mi=rh=io=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,Gv(f,n,d);break;case"selectionchange":if(WN)break;case"keydown":case"keyup":Gv(f,n,d)}var k;if(Yp)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else oo?ib(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(ob&&n.locale!=="ko"&&(oo||j!=="onCompositionStart"?j==="onCompositionEnd"&&oo&&(k=sb()):(Or=d,Gp="value"in Or?Or.value:Or.textContent,oo=!0)),N=hc(u,j),0<N.length&&(j=new Lv(j,e,null,n,d),f.push({event:j,listeners:N}),k?j.data=k:(k=ab(n),k!==null&&(j.data=k)))),(k=RN?$N(e,n):IN(e,n))&&(u=hc(u,"onBeforeInput"),0<u.length&&(d=new Lv("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=k))}xb(f,t)})}function ia(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Qi(e,n),o!=null&&r.unshift(ia(e,o,s)),o=Qi(e,t),o!=null&&r.push(ia(e,o,s))),e=e.return}return r}function Gs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yv(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Qi(n,o),l!=null&&i.unshift(ia(n,l,a))):s||(l=Qi(n,o),l!=null&&i.push(ia(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function Zv(e){return(typeof e=="string"?e:""+e).replace(qN,`
`).replace(XN,"")}function hl(e,t,n){if(t=Zv(t),Zv(e)!==t&&n)throw Error(ne(425))}function pc(){}var oh=null,ih=null;function ah(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,YN=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,ZN=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(e){return Jv.resolve(null).then(e).catch(JN)}:lh;function JN(e){setTimeout(function(){throw e})}function Fd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),na(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);na(t)}function Br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),In="__reactFiber$"+Zo,aa="__reactProps$"+Zo,or="__reactContainer$"+Zo,ch="__reactEvents$"+Zo,QN="__reactListeners$"+Zo,eT="__reactHandles$"+Zo;function ws(e){var t=e[In];if(t)return t;for(var n=e.parentNode;n;){if(t=n[or]||n[In]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qv(e);e!==null;){if(n=e[In])return n;e=Qv(e)}return t}e=n,n=e.parentNode}return null}function Aa(e){return e=e[In]||e[or],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function lu(e){return e[aa]||null}var uh=[],co=-1;function os(e){return{current:e}}function We(e){0>co||(e.current=uh[co],uh[co]=null,co--)}function Le(e,t){co++,uh[co]=e.current,e.current=t}var Jr={},bt=os(Jr),Lt=os(!1),Ps=Jr;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Jr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(e){return e=e.childContextTypes,e!=null}function mc(){We(Lt),We(bt)}function e0(e,t,n){if(bt.current!==Jr)throw Error(ne(168));Le(bt,t),Le(Lt,n)}function bb(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ne(108,LP(e)||"Unknown",s));return Ze({},n,r)}function gc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jr,Ps=bt.current,Le(bt,e),Le(Lt,Lt.current),!0}function t0(e,t,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=bb(e,t,Ps),r.__reactInternalMemoizedMergedChildContext=e,We(Lt),We(bt),Le(bt,e)):We(Lt),Le(Lt,n)}var Xn=null,cu=!1,zd=!1;function _b(e){Xn===null?Xn=[e]:Xn.push(e)}function tT(e){cu=!0,_b(e)}function is(){if(!zd&&Xn!==null){zd=!0;var e=0,t=Re;try{var n=Xn;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xn=null,cu=!1}catch(s){throw Xn!==null&&(Xn=Xn.slice(e+1)),Gw(Vp,is),s}finally{Re=t,zd=!1}}return null}var uo=[],fo=0,vc=null,yc=0,on=[],an=0,Ns=null,Zn=1,Jn="";function hs(e,t){uo[fo++]=yc,uo[fo++]=vc,vc=e,yc=t}function Cb(e,t,n){on[an++]=Zn,on[an++]=Jn,on[an++]=Ns,Ns=e;var r=Zn;e=Jn;var s=32-bn(r)-1;r&=~(1<<s),n+=1;var o=32-bn(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Zn=1<<32-bn(t)+s|n<<s|r,Jn=o+e}else Zn=1<<o|n<<s|r,Jn=e}function Jp(e){e.return!==null&&(hs(e,1),Cb(e,1,0))}function Qp(e){for(;e===vc;)vc=uo[--fo],uo[fo]=null,yc=uo[--fo],uo[fo]=null;for(;e===Ns;)Ns=on[--an],on[an]=null,Jn=on[--an],on[an]=null,Zn=on[--an],on[an]=null}var Xt=null,qt=null,He=!1,xn=null;function Sb(e,t){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function n0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xt=e,qt=Br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xt=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ns!==null?{id:Zn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xt=e,qt=null,!0):!1;default:return!1}}function dh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fh(e){if(He){var t=qt;if(t){var n=t;if(!n0(e,t)){if(dh(e))throw Error(ne(418));t=Br(n.nextSibling);var r=Xt;t&&n0(e,t)?Sb(r,n):(e.flags=e.flags&-4097|2,He=!1,Xt=e)}}else{if(dh(e))throw Error(ne(418));e.flags=e.flags&-4097|2,He=!1,Xt=e}}}function r0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xt=e}function pl(e){if(e!==Xt)return!1;if(!He)return r0(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ah(e.type,e.memoizedProps)),t&&(t=qt)){if(dh(e))throw Eb(),Error(ne(418));for(;t;)Sb(e,t),t=Br(t.nextSibling)}if(r0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qt=Br(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=Xt?Br(e.stateNode.nextSibling):null;return!0}function Eb(){for(var e=qt;e;)e=Br(e.nextSibling)}function $o(){qt=Xt=null,He=!1}function em(e){xn===null?xn=[e]:xn.push(e)}var nT=yr.ReactCurrentBatchConfig;function yi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function ml(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function s0(e){var t=e._init;return t(e._payload)}function kb(e){function t(v,x){if(e){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Kr(v,x),v.index=0,v.sibling=null,v}function o(v,x,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,_){return x===null||x.tag!==6?(x=Gd(b,v.mode,_),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,_){var S=b.type;return S===so?d(v,x,b.props.children,_,b.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nr&&s0(S)===x.type)?(_=s(x,b.props),_.ref=yi(v,x,b),_.return=v,_):(_=ec(b.type,b.key,b.props,null,v.mode,_),_.ref=yi(v,x,b),_.return=v,_)}function u(v,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=qd(b,v.mode,_),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function d(v,x,b,_,S){return x===null||x.tag!==7?(x=ks(b,v.mode,_,S),x.return=v,x):(x=s(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Gd(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sl:return b=ec(x.type,x.key,x.props,null,v.mode,b),b.ref=yi(v,null,x),b.return=v,b;case ro:return x=qd(x,v.mode,b),x.return=v,x;case Nr:var _=x._init;return f(v,_(x._payload),b)}if(ji(x)||hi(x))return x=ks(x,v.mode,b,null),x.return=v,x;ml(v,x)}return null}function h(v,x,b,_){var S=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(v,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case sl:return b.key===S?l(v,x,b,_):null;case ro:return b.key===S?u(v,x,b,_):null;case Nr:return S=b._init,h(v,x,S(b._payload),_)}if(ji(b)||hi(b))return S!==null?null:d(v,x,b,_,null);ml(v,b)}return null}function p(v,x,b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(b)||null,a(x,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case sl:return v=v.get(_.key===null?b:_.key)||null,l(x,v,_,S);case ro:return v=v.get(_.key===null?b:_.key)||null,u(x,v,_,S);case Nr:var N=_._init;return p(v,x,b,N(_._payload),S)}if(ji(_)||hi(_))return v=v.get(b)||null,d(x,v,_,S,null);ml(x,_)}return null}function y(v,x,b,_){for(var S=null,N=null,k=x,j=x=0,T=null;k!==null&&j<b.length;j++){k.index>j?(T=k,k=null):T=k.sibling;var M=h(v,k,b[j],_);if(M===null){k===null&&(k=T);break}e&&k&&M.alternate===null&&t(v,k),x=o(M,x,j),N===null?S=M:N.sibling=M,N=M,k=T}if(j===b.length)return n(v,k),He&&hs(v,j),S;if(k===null){for(;j<b.length;j++)k=f(v,b[j],_),k!==null&&(x=o(k,x,j),N===null?S=k:N.sibling=k,N=k);return He&&hs(v,j),S}for(k=r(v,k);j<b.length;j++)T=p(k,v,j,b[j],_),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?j:T.key),x=o(T,x,j),N===null?S=T:N.sibling=T,N=T);return e&&k.forEach(function(F){return t(v,F)}),He&&hs(v,j),S}function g(v,x,b,_){var S=hi(b);if(typeof S!="function")throw Error(ne(150));if(b=S.call(b),b==null)throw Error(ne(151));for(var N=S=null,k=x,j=x=0,T=null,M=b.next();k!==null&&!M.done;j++,M=b.next()){k.index>j?(T=k,k=null):T=k.sibling;var F=h(v,k,M.value,_);if(F===null){k===null&&(k=T);break}e&&k&&F.alternate===null&&t(v,k),x=o(F,x,j),N===null?S=F:N.sibling=F,N=F,k=T}if(M.done)return n(v,k),He&&hs(v,j),S;if(k===null){for(;!M.done;j++,M=b.next())M=f(v,M.value,_),M!==null&&(x=o(M,x,j),N===null?S=M:N.sibling=M,N=M);return He&&hs(v,j),S}for(k=r(v,k);!M.done;j++,M=b.next())M=p(k,v,j,M.value,_),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?j:M.key),x=o(M,x,j),N===null?S=M:N.sibling=M,N=M);return e&&k.forEach(function(P){return t(v,P)}),He&&hs(v,j),S}function w(v,x,b,_){if(typeof b=="object"&&b!==null&&b.type===so&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case sl:e:{for(var S=b.key,N=x;N!==null;){if(N.key===S){if(S=b.type,S===so){if(N.tag===7){n(v,N.sibling),x=s(N,b.props.children),x.return=v,v=x;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nr&&s0(S)===N.type){n(v,N.sibling),x=s(N,b.props),x.ref=yi(v,N,b),x.return=v,v=x;break e}n(v,N);break}else t(v,N);N=N.sibling}b.type===so?(x=ks(b.props.children,v.mode,_,b.key),x.return=v,v=x):(_=ec(b.type,b.key,b.props,null,v.mode,_),_.ref=yi(v,x,b),_.return=v,v=_)}return i(v);case ro:e:{for(N=b.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=qd(b,v.mode,_),x.return=v,v=x}return i(v);case Nr:return N=b._init,w(v,x,N(b._payload),_)}if(ji(b))return y(v,x,b,_);if(hi(b))return g(v,x,b,_);ml(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,b),x.return=v,v=x):(n(v,x),x=Gd(b,v.mode,_),x.return=v,v=x),i(v)):n(v,x)}return w}var Io=kb(!0),jb=kb(!1),xc=os(null),wc=null,ho=null,tm=null;function nm(){tm=ho=wc=null}function rm(e){var t=xc.current;We(xc),e._currentValue=t}function hh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function So(e,t){wc=e,tm=ho=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function dn(e){var t=e._currentValue;if(tm!==e)if(e={context:e,memoizedValue:t,next:null},ho===null){if(wc===null)throw Error(ne(308));ho=e,wc.dependencies={lanes:0,firstContext:e}}else ho=ho.next=e;return t}var bs=null;function sm(e){bs===null?bs=[e]:bs.push(e)}function Pb(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,sm(t)):(n.next=s.next,s.next=n),t.interleaved=n,ir(e,r)}function ir(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Tr=!1;function om(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ir(e,n)}return s=r.interleaved,s===null?(t.next=t,sm(r)):(t.next=s.next,s.next=t),r.interleaved=t,ir(e,n)}function ql(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wp(e,n)}}function o0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bc(e,t,n,r){var s=e.updateQueue;Tr=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=s.baseState;i=0,d=u=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,g=a;switch(h=t,p=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(p,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(p,f,h):y,h==null)break e;f=Ze({},f,h);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=f):d=d.next=p,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);As|=i,e.lanes=i,e.memoizedState=f}}function i0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var Ra={},Ln=os(Ra),la=os(Ra),ca=os(Ra);function _s(e){if(e===Ra)throw Error(ne(174));return e}function im(e,t){switch(Le(ca,t),Le(la,e),Le(Ln,Ra),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gf(t,e)}We(Ln),Le(Ln,t)}function Do(){We(Ln),We(la),We(ca)}function Tb(e){_s(ca.current);var t=_s(Ln.current),n=Gf(t,e.type);t!==n&&(Le(la,e),Le(Ln,n))}function am(e){la.current===e&&(We(Ln),We(la))}var Ge=os(0);function _c(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ud=[];function lm(){for(var e=0;e<Ud.length;e++)Ud[e]._workInProgressVersionPrimary=null;Ud.length=0}var Xl=yr.ReactCurrentDispatcher,Bd=yr.ReactCurrentBatchConfig,Ts=0,Xe=null,ot=null,ct=null,Cc=!1,Li=!1,ua=0,rT=0;function mt(){throw Error(ne(321))}function cm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cn(e[n],t[n]))return!1;return!0}function um(e,t,n,r,s,o){if(Ts=o,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xl.current=e===null||e.memoizedState===null?aT:lT,e=n(r,s),Li){o=0;do{if(Li=!1,ua=0,25<=o)throw Error(ne(301));o+=1,ct=ot=null,t.updateQueue=null,Xl.current=cT,e=n(r,s)}while(Li)}if(Xl.current=Sc,t=ot!==null&&ot.next!==null,Ts=0,ct=ot=Xe=null,Cc=!1,t)throw Error(ne(300));return e}function dm(){var e=ua!==0;return ua=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Xe.memoizedState=ct=e:ct=ct.next=e,ct}function fn(){if(ot===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=ct===null?Xe.memoizedState:ct.next;if(t!==null)ct=t,ot=e;else{if(e===null)throw Error(ne(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ct===null?Xe.memoizedState=ct=e:ct=ct.next=e}return ct}function da(e,t){return typeof t=="function"?t(e):t}function Vd(e){var t=fn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=ot,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,l=null,u=o;do{var d=u.lane;if((Ts&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,Xe.lanes|=d,As|=d}u=u.next}while(u!==null&&u!==o);l===null?i=r:l.next=a,Cn(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Xe.lanes|=o,As|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wd(e){var t=fn(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Cn(o,t.memoizedState)||(Mt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ab(){}function Rb(e,t){var n=Xe,r=fn(),s=t(),o=!Cn(r.memoizedState,s);if(o&&(r.memoizedState=s,Mt=!0),r=r.queue,fm(Db.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,fa(9,Ib.bind(null,n,r,s,t),void 0,null),ut===null)throw Error(ne(349));Ts&30||$b(n,t,s)}return s}function $b(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ib(e,t,n,r){t.value=n,t.getSnapshot=r,Ob(t)&&Mb(e)}function Db(e,t,n){return n(function(){Ob(t)&&Mb(e)})}function Ob(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cn(e,n)}catch{return!0}}function Mb(e){var t=ir(e,1);t!==null&&_n(t,e,1,-1)}function a0(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t.queue=e,e=e.dispatch=iT.bind(null,Xe,e),[t.memoizedState,e]}function fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Lb(){return fn().memoizedState}function Yl(e,t,n,r){var s=$n();Xe.flags|=e,s.memoizedState=fa(1|t,n,void 0,r===void 0?null:r)}function uu(e,t,n,r){var s=fn();r=r===void 0?null:r;var o=void 0;if(ot!==null){var i=ot.memoizedState;if(o=i.destroy,r!==null&&cm(r,i.deps)){s.memoizedState=fa(t,n,o,r);return}}Xe.flags|=e,s.memoizedState=fa(1|t,n,o,r)}function l0(e,t){return Yl(8390656,8,e,t)}function fm(e,t){return uu(2048,8,e,t)}function Fb(e,t){return uu(4,2,e,t)}function zb(e,t){return uu(4,4,e,t)}function Ub(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bb(e,t,n){return n=n!=null?n.concat([e]):null,uu(4,4,Ub.bind(null,t,e),n)}function hm(){}function Vb(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wb(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hb(e,t,n){return Ts&21?(Cn(n,t)||(n=Yw(),Xe.lanes|=n,As|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function sT(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=Bd.transition;Bd.transition={};try{e(!1),t()}finally{Re=n,Bd.transition=r}}function Kb(){return fn().memoizedState}function oT(e,t,n){var r=Hr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gb(e))qb(t,n);else if(n=Pb(e,t,n,r),n!==null){var s=Pt();_n(n,e,r,s),Xb(n,t,r)}}function iT(e,t,n){var r=Hr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gb(e))qb(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Cn(a,i)){var l=t.interleaved;l===null?(s.next=s,sm(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=Pb(e,t,s,r),n!==null&&(s=Pt(),_n(n,e,r,s),Xb(n,t,r))}}function Gb(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function qb(e,t){Li=Cc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xb(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wp(e,n)}}var Sc={readContext:dn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},aT={readContext:dn,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:l0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yl(4194308,4,Ub.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yl(4,2,e,t)},useMemo:function(e,t){var n=$n();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$n();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=oT.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:a0,useDebugValue:hm,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=a0(!1),t=e[0];return e=sT.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,s=$n();if(He){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),ut===null)throw Error(ne(349));Ts&30||$b(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,l0(Db.bind(null,r,o,e),[e]),r.flags|=2048,fa(9,Ib.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=$n(),t=ut.identifierPrefix;if(He){var n=Jn,r=Zn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ua++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lT={readContext:dn,useCallback:Vb,useContext:dn,useEffect:fm,useImperativeHandle:Bb,useInsertionEffect:Fb,useLayoutEffect:zb,useMemo:Wb,useReducer:Vd,useRef:Lb,useState:function(){return Vd(da)},useDebugValue:hm,useDeferredValue:function(e){var t=fn();return Hb(t,ot.memoizedState,e)},useTransition:function(){var e=Vd(da)[0],t=fn().memoizedState;return[e,t]},useMutableSource:Ab,useSyncExternalStore:Rb,useId:Kb,unstable_isNewReconciler:!1},cT={readContext:dn,useCallback:Vb,useContext:dn,useEffect:fm,useImperativeHandle:Bb,useInsertionEffect:Fb,useLayoutEffect:zb,useMemo:Wb,useReducer:Wd,useRef:Lb,useState:function(){return Wd(da)},useDebugValue:hm,useDeferredValue:function(e){var t=fn();return ot===null?t.memoizedState=e:Hb(t,ot.memoizedState,e)},useTransition:function(){var e=Wd(da)[0],t=fn().memoizedState;return[e,t]},useMutableSource:Ab,useSyncExternalStore:Rb,useId:Kb,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ph(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var du={isMounted:function(e){return(e=e._reactInternals)?Ls(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=Hr(e),o=er(r,s);o.payload=t,n!=null&&(o.callback=n),t=Vr(e,o,s),t!==null&&(_n(t,e,s,r),ql(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=Hr(e),o=er(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Vr(e,o,s),t!==null&&(_n(t,e,s,r),ql(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=Hr(e),s=er(n,r);s.tag=2,t!=null&&(s.callback=t),t=Vr(e,s,r),t!==null&&(_n(t,e,r,n),ql(t,e,r))}};function c0(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!sa(n,r)||!sa(s,o):!0}function Yb(e,t,n){var r=!1,s=Jr,o=t.contextType;return typeof o=="object"&&o!==null?o=dn(o):(s=Ft(t)?Ps:bt.current,r=t.contextTypes,o=(r=r!=null)?Ro(e,s):Jr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=du,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function u0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&du.enqueueReplaceState(t,t.state,null)}function mh(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},om(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=dn(o):(o=Ft(t)?Ps:bt.current,s.context=Ro(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ph(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&du.enqueueReplaceState(s,s.state,null),bc(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Oo(e,t){try{var n="",r=t;do n+=MP(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Hd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uT=typeof WeakMap=="function"?WeakMap:Map;function Zb(e,t,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){kc||(kc=!0,kh=r),gh(e,t)},n}function Jb(e,t,n){n=er(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){gh(e,t),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function d0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new uT;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ST.bind(null,e,t,n),t.then(e,e))}function f0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function h0(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=er(-1,1),t.tag=2,Vr(n,t,1))),n.lanes|=1),e)}var dT=yr.ReactCurrentOwner,Mt=!1;function kt(e,t,n,r){t.child=e===null?jb(t,null,n,r):Io(t,e.child,n,r)}function p0(e,t,n,r,s){n=n.render;var o=t.ref;return So(t,s),r=um(e,t,n,r,o,s),n=dm(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ar(e,t,s)):(He&&n&&Jp(t),t.flags|=1,kt(e,t,r,s),t.child)}function m0(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!bm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Qb(e,t,o,r,s)):(e=ec(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:sa,n(i,r)&&e.ref===t.ref)return ar(e,t,s)}return t.flags|=1,e=Kr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Qb(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(sa(o,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,ar(e,t,s)}return vh(e,t,n,r,s)}function e1(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(mo,Kt),Kt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(mo,Kt),Kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Le(mo,Kt),Kt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Le(mo,Kt),Kt|=r;return kt(e,t,s,n),t.child}function t1(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function vh(e,t,n,r,s){var o=Ft(n)?Ps:bt.current;return o=Ro(t,o),So(t,s),n=um(e,t,n,r,o,s),r=dm(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ar(e,t,s)):(He&&r&&Jp(t),t.flags|=1,kt(e,t,n,s),t.child)}function g0(e,t,n,r,s){if(Ft(n)){var o=!0;gc(t)}else o=!1;if(So(t,s),t.stateNode===null)Zl(e,t),Yb(t,n,r),mh(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=dn(u):(u=Ft(n)?Ps:bt.current,u=Ro(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==u)&&u0(t,i,r,u),Tr=!1;var h=t.memoizedState;i.state=h,bc(t,r,i,s),l=t.memoizedState,a!==r||h!==l||Lt.current||Tr?(typeof d=="function"&&(ph(t,n,d,r),l=t.memoizedState),(a=Tr||c0(t,n,a,r,h,l,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Nb(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gn(t.type,a),i.props=u,f=t.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=dn(l):(l=Ft(n)?Ps:bt.current,l=Ro(t,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==l)&&u0(t,i,r,l),Tr=!1,h=t.memoizedState,i.state=h,bc(t,r,i,s);var y=t.memoizedState;a!==f||h!==y||Lt.current||Tr?(typeof p=="function"&&(ph(t,n,p,r),y=t.memoizedState),(u=Tr||c0(t,n,u,r,h,y,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=l,r=u):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return yh(e,t,n,r,o,s)}function yh(e,t,n,r,s,o){t1(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&t0(t,n,!1),ar(e,t,o);r=t.stateNode,dT.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,a,o)):kt(e,t,a,o),t.memoizedState=r.state,s&&t0(t,n,!0),t.child}function n1(e){var t=e.stateNode;t.pendingContext?e0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&e0(e,t.context,!1),im(e,t.containerInfo)}function v0(e,t,n,r,s){return $o(),em(s),t.flags|=256,kt(e,t,n,r),t.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function wh(e){return{baseLanes:e,cachePool:null,transitions:null}}function r1(e,t,n){var r=t.pendingProps,s=Ge.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Le(Ge,s&1),e===null)return fh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=pu(i,r,0,null),e=ks(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=wh(n),t.memoizedState=xh,e):pm(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return fT(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Kr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Kr(a,o):(o=ks(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?wh(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=xh,r}return o=e.child,e=o.sibling,r=Kr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pm(e,t){return t=pu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gl(e,t,n,r){return r!==null&&em(r),Io(t,e.child,null,n),e=pm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fT(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Hd(Error(ne(422))),gl(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=pu({mode:"visible",children:r.children},s,0,null),o=ks(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Io(t,e.child,null,i),t.child.memoizedState=wh(i),t.memoizedState=xh,o);if(!(t.mode&1))return gl(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ne(419)),r=Hd(o,r,void 0),gl(e,t,i,r)}if(a=(i&e.childLanes)!==0,Mt||a){if(r=ut,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ir(e,s),_n(r,e,s,-1))}return wm(),r=Hd(Error(ne(421))),gl(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ET.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,qt=Br(s.nextSibling),Xt=t,He=!0,xn=null,e!==null&&(on[an++]=Zn,on[an++]=Jn,on[an++]=Ns,Zn=e.id,Jn=e.overflow,Ns=t),t=pm(t,r.children),t.flags|=4096,t)}function y0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hh(e.return,t,n)}function Kd(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function s1(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(kt(e,t,r.children,n),r=Ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&y0(e,n,t);else if(e.tag===19)y0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Le(Ge,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&_c(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Kd(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&_c(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Kd(t,!0,n,null,o);break;case"together":Kd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ar(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),As|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=Kr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function hT(e,t,n){switch(t.tag){case 3:n1(t),$o();break;case 5:Tb(t);break;case 1:Ft(t.type)&&gc(t);break;case 4:im(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Le(xc,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ge,Ge.current&1),t.flags|=128,null):n&t.child.childLanes?r1(e,t,n):(Le(Ge,Ge.current&1),e=ar(e,t,n),e!==null?e.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return s1(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Ge,Ge.current),r)break;return null;case 22:case 23:return t.lanes=0,e1(e,t,n)}return ar(e,t,n)}var o1,bh,i1,a1;o1=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bh=function(){};i1=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,_s(Ln.current);var o=null;switch(n){case"input":s=Vf(e,s),r=Vf(e,r),o=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),o=[];break;case"textarea":s=Kf(e,s),r=Kf(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pc)}qf(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ue("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};a1=function(e,t,n,r){n!==r&&(t.flags|=4)};function xi(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pT(e,t,n){var r=t.pendingProps;switch(Qp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Ft(t.type)&&mc(),gt(t),null;case 3:return r=t.stateNode,Do(),We(Lt),We(bt),lm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xn!==null&&(Nh(xn),xn=null))),bh(e,t),gt(t),null;case 5:am(t);var s=_s(ca.current);if(n=t.type,e!==null&&t.stateNode!=null)i1(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ne(166));return gt(t),null}if(e=_s(Ln.current),pl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[In]=t,r[aa]=o,e=(t.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<Ni.length;s++)Ue(Ni[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":jv(r,o),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",r);break;case"textarea":Nv(r,o),Ue("invalid",r)}qf(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&hl(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&hl(r.textContent,a,e),s=["children",""+a]):Zi.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Ue("scroll",r)}switch(n){case"input":ol(r),Pv(r,o,!0);break;case"textarea":ol(r),Tv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=pc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[In]=t,e[aa]=r,o1(e,t,!1,!1),t.stateNode=e;e:{switch(i=Xf(n,r),n){case"dialog":Ue("cancel",e),Ue("close",e),s=r;break;case"iframe":case"object":case"embed":Ue("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ni.length;s++)Ue(Ni[s],e);s=r;break;case"source":Ue("error",e),s=r;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),s=r;break;case"details":Ue("toggle",e),s=r;break;case"input":jv(e,r),s=Vf(e,r),Ue("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),Ue("invalid",e);break;case"textarea":Nv(e,r),s=Kf(e,r),Ue("invalid",e);break;default:s=r}qf(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Lw(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ow(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ji(e,l):typeof l=="number"&&Ji(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zi.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ue("scroll",e):l!=null&&Lp(e,o,l,i))}switch(n){case"input":ol(e),Pv(e,r,!1);break;case"textarea":ol(e),Tv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?wo(e,!!r.multiple,o,!1):r.defaultValue!=null&&wo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=pc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)a1(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ne(166));if(n=_s(ca.current),_s(Ln.current),pl(t)){if(r=t.stateNode,n=t.memoizedProps,r[In]=t,(o=r.nodeValue!==n)&&(e=Xt,e!==null))switch(e.tag){case 3:hl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=t,t.stateNode=r}return gt(t),null;case 13:if(We(Ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&qt!==null&&t.mode&1&&!(t.flags&128))Eb(),$o(),t.flags|=98560,o=!1;else if(o=pl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ne(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[In]=t}else $o(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),o=!1}else xn!==null&&(Nh(xn),xn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?it===0&&(it=3):wm())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return Do(),bh(e,t),e===null&&oa(t.stateNode.containerInfo),gt(t),null;case 10:return rm(t.type._context),gt(t),null;case 17:return Ft(t.type)&&mc(),gt(t),null;case 19:if(We(Ge),o=t.memoizedState,o===null)return gt(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)xi(o,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=_c(e),i!==null){for(t.flags|=128,xi(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),t.child}e=e.sibling}o.tail!==null&&nt()>Mo&&(t.flags|=128,r=!0,xi(o,!1),t.lanes=4194304)}else{if(!r)if(e=_c(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!He)return gt(t),null}else 2*nt()-o.renderingStartTime>Mo&&n!==1073741824&&(t.flags|=128,r=!0,xi(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nt(),t.sibling=null,n=Ge.current,Le(Ge,r?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return xm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Kt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function mT(e,t){switch(Qp(t),t.tag){case 1:return Ft(t.type)&&mc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Do(),We(Lt),We(bt),lm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return am(t),null;case 13:if(We(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));$o()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Ge),null;case 4:return Do(),null;case 10:return rm(t.type._context),null;case 22:case 23:return xm(),null;case 24:return null;default:return null}}var vl=!1,yt=!1,gT=typeof WeakSet=="function"?WeakSet:Set,fe=null;function po(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(e,t,r)}else n.current=null}function _h(e,t,n){try{n()}catch(r){Je(e,t,r)}}var x0=!1;function vT(e,t){if(oh=dc,e=fb(),Zp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(a=i+s),f!==o||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===s&&(a=i),h===o&&++d===r&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ih={focusedElem:e,selectionRange:n},dc=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gn(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(_){Je(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return y=x0,x0=!1,y}function Fi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&_h(t,n,o)}s=s.next}while(s!==r)}}function fu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ch(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function l1(e){var t=e.alternate;t!==null&&(e.alternate=null,l1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[In],delete t[aa],delete t[ch],delete t[QN],delete t[eT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function c1(e){return e.tag===5||e.tag===3||e.tag===4}function w0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||c1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pc));else if(r!==4&&(e=e.child,e!==null))for(Sh(e,t,n),e=e.sibling;e!==null;)Sh(e,t,n),e=e.sibling}function Eh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Eh(e,t,n),e=e.sibling;e!==null;)Eh(e,t,n),e=e.sibling}var dt=null,vn=!1;function _r(e,t,n){for(n=n.child;n!==null;)u1(e,t,n),n=n.sibling}function u1(e,t,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(su,n)}catch{}switch(n.tag){case 5:yt||po(n,t);case 6:var r=dt,s=vn;dt=null,_r(e,t,n),dt=r,vn=s,dt!==null&&(vn?(e=dt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(vn?(e=dt,n=n.stateNode,e.nodeType===8?Fd(e.parentNode,n):e.nodeType===1&&Fd(e,n),na(e)):Fd(dt,n.stateNode));break;case 4:r=dt,s=vn,dt=n.stateNode.containerInfo,vn=!0,_r(e,t,n),dt=r,vn=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&_h(n,t,i),s=s.next}while(s!==r)}_r(e,t,n);break;case 1:if(!yt&&(po(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,t,a)}_r(e,t,n);break;case 21:_r(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,_r(e,t,n),yt=r):_r(e,t,n);break;default:_r(e,t,n)}}function b0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gT),t.forEach(function(r){var s=kT.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:dt=a.stateNode,vn=!1;break e;case 3:dt=a.stateNode.containerInfo,vn=!0;break e;case 4:dt=a.stateNode.containerInfo,vn=!0;break e}a=a.return}if(dt===null)throw Error(ne(160));u1(o,i,s),dt=null,vn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Je(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)d1(t,e),t=t.sibling}function d1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pn(t,e),An(e),r&4){try{Fi(3,e,e.return),fu(3,e)}catch(g){Je(e,e.return,g)}try{Fi(5,e,e.return)}catch(g){Je(e,e.return,g)}}break;case 1:pn(t,e),An(e),r&512&&n!==null&&po(n,n.return);break;case 5:if(pn(t,e),An(e),r&512&&n!==null&&po(n,n.return),e.flags&32){var s=e.stateNode;try{Ji(s,"")}catch(g){Je(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&$w(s,o),Xf(a,i);var u=Xf(a,o);for(i=0;i<l.length;i+=2){var d=l[i],f=l[i+1];d==="style"?Lw(s,f):d==="dangerouslySetInnerHTML"?Ow(s,f):d==="children"?Ji(s,f):Lp(s,d,f,u)}switch(a){case"input":Wf(s,o);break;case"textarea":Iw(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?wo(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?wo(s,!!o.multiple,o.defaultValue,!0):wo(s,!!o.multiple,o.multiple?[]:"",!1))}s[aa]=o}catch(g){Je(e,e.return,g)}}break;case 6:if(pn(t,e),An(e),r&4){if(e.stateNode===null)throw Error(ne(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Je(e,e.return,g)}}break;case 3:if(pn(t,e),An(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{na(t.containerInfo)}catch(g){Je(e,e.return,g)}break;case 4:pn(t,e),An(e);break;case 13:pn(t,e),An(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(vm=nt())),r&4&&b0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(u=yt)||d,pn(t,e),yt=u):pn(t,e),An(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(fe=e,d=e.child;d!==null;){for(f=fe=d;fe!==null;){switch(h=fe,p=h.child,h.tag){case 0:case 11:case 14:case 15:Fi(4,h,h.return);break;case 1:po(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Je(r,n,g)}}break;case 5:po(h,h.return);break;case 22:if(h.memoizedState!==null){C0(f);continue}}p!==null?(p.return=h,fe=p):C0(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Mw("display",i))}catch(g){Je(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Je(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pn(t,e),An(e),r&4&&b0(e);break;case 21:break;default:pn(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(c1(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ji(s,""),r.flags&=-33);var o=w0(e);Eh(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=w0(e);Sh(e,a,i);break;default:throw Error(ne(161))}}catch(l){Je(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yT(e,t,n){fe=e,f1(e)}function f1(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var s=fe,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||vl;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||yt;a=vl;var u=yt;if(vl=i,(yt=l)&&!u)for(fe=s;fe!==null;)i=fe,l=i.child,i.tag===22&&i.memoizedState!==null?S0(s):l!==null?(l.return=i,fe=l):S0(s);for(;o!==null;)fe=o,f1(o),o=o.sibling;fe=s,vl=a,yt=u}_0(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,fe=o):_0(e)}}function _0(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||fu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&i0(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}i0(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&na(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}yt||t.flags&512&&Ch(t)}catch(h){Je(t,t.return,h)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function C0(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function S0(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fu(4,t)}catch(l){Je(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){Je(t,s,l)}}var o=t.return;try{Ch(t)}catch(l){Je(t,o,l)}break;case 5:var i=t.return;try{Ch(t)}catch(l){Je(t,i,l)}}}catch(l){Je(t,t.return,l)}if(t===e){fe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,fe=a;break}fe=t.return}}var xT=Math.ceil,Ec=yr.ReactCurrentDispatcher,mm=yr.ReactCurrentOwner,cn=yr.ReactCurrentBatchConfig,Te=0,ut=null,st=null,ht=0,Kt=0,mo=os(0),it=0,ha=null,As=0,hu=0,gm=0,zi=null,Dt=null,vm=0,Mo=1/0,Kn=null,kc=!1,kh=null,Wr=null,yl=!1,Mr=null,jc=0,Ui=0,jh=null,Jl=-1,Ql=0;function Pt(){return Te&6?nt():Jl!==-1?Jl:Jl=nt()}function Hr(e){return e.mode&1?Te&2&&ht!==0?ht&-ht:nT.transition!==null?(Ql===0&&(Ql=Yw()),Ql):(e=Re,e!==0||(e=window.event,e=e===void 0?16:rb(e.type)),e):1}function _n(e,t,n,r){if(50<Ui)throw Ui=0,jh=null,Error(ne(185));Na(e,n,r),(!(Te&2)||e!==ut)&&(e===ut&&(!(Te&2)&&(hu|=n),it===4&&Ir(e,ht)),zt(e,r),n===1&&Te===0&&!(t.mode&1)&&(Mo=nt()+500,cu&&is()))}function zt(e,t){var n=e.callbackNode;nN(e,t);var r=uc(e,e===ut?ht:0);if(r===0)n!==null&&$v(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$v(n),t===1)e.tag===0?tT(E0.bind(null,e)):_b(E0.bind(null,e)),ZN(function(){!(Te&6)&&is()}),n=null;else{switch(Zw(r)){case 1:n=Vp;break;case 4:n=qw;break;case 16:n=cc;break;case 536870912:n=Xw;break;default:n=cc}n=w1(n,h1.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function h1(e,t){if(Jl=-1,Ql=0,Te&6)throw Error(ne(327));var n=e.callbackNode;if(Eo()&&e.callbackNode!==n)return null;var r=uc(e,e===ut?ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pc(e,r);else{t=r;var s=Te;Te|=2;var o=m1();(ut!==e||ht!==t)&&(Kn=null,Mo=nt()+500,Es(e,t));do try{_T();break}catch(a){p1(e,a)}while(1);nm(),Ec.current=o,Te=s,st!==null?t=0:(ut=null,ht=0,t=it)}if(t!==0){if(t===2&&(s=eh(e),s!==0&&(r=s,t=Ph(e,s))),t===1)throw n=ha,Es(e,0),Ir(e,r),zt(e,nt()),n;if(t===6)Ir(e,r);else{if(s=e.current.alternate,!(r&30)&&!wT(s)&&(t=Pc(e,r),t===2&&(o=eh(e),o!==0&&(r=o,t=Ph(e,o))),t===1))throw n=ha,Es(e,0),Ir(e,r),zt(e,nt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:ps(e,Dt,Kn);break;case 3:if(Ir(e,r),(r&130023424)===r&&(t=vm+500-nt(),10<t)){if(uc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lh(ps.bind(null,e,Dt,Kn),t);break}ps(e,Dt,Kn);break;case 4:if(Ir(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-bn(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xT(r/1960))-r,10<r){e.timeoutHandle=lh(ps.bind(null,e,Dt,Kn),r);break}ps(e,Dt,Kn);break;case 5:ps(e,Dt,Kn);break;default:throw Error(ne(329))}}}return zt(e,nt()),e.callbackNode===n?h1.bind(null,e):null}function Ph(e,t){var n=zi;return e.current.memoizedState.isDehydrated&&(Es(e,t).flags|=256),e=Pc(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&Nh(t)),e}function Nh(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function wT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Cn(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t){for(t&=~gm,t&=~hu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bn(t),r=1<<n;e[n]=-1,t&=~r}}function E0(e){if(Te&6)throw Error(ne(327));Eo();var t=uc(e,0);if(!(t&1))return zt(e,nt()),null;var n=Pc(e,t);if(e.tag!==0&&n===2){var r=eh(e);r!==0&&(t=r,n=Ph(e,r))}if(n===1)throw n=ha,Es(e,0),Ir(e,t),zt(e,nt()),n;if(n===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ps(e,Dt,Kn),zt(e,nt()),null}function ym(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(Mo=nt()+500,cu&&is())}}function Rs(e){Mr!==null&&Mr.tag===0&&!(Te&6)&&Eo();var t=Te;Te|=1;var n=cn.transition,r=Re;try{if(cn.transition=null,Re=1,e)return e()}finally{Re=r,cn.transition=n,Te=t,!(Te&6)&&is()}}function xm(){Kt=mo.current,We(mo)}function Es(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,YN(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Qp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mc();break;case 3:Do(),We(Lt),We(bt),lm();break;case 5:am(r);break;case 4:Do();break;case 13:We(Ge);break;case 19:We(Ge);break;case 10:rm(r.type._context);break;case 22:case 23:xm()}n=n.return}if(ut=e,st=e=Kr(e.current,null),ht=Kt=t,it=0,ha=null,gm=hu=As=0,Dt=zi=null,bs!==null){for(t=0;t<bs.length;t++)if(n=bs[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}bs=null}return e}function p1(e,t){do{var n=st;try{if(nm(),Xl.current=Sc,Cc){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cc=!1}if(Ts=0,ct=ot=Xe=null,Li=!1,ua=0,mm.current=null,n===null||n.return===null){it=1,ha=t,st=null;break}e:{var o=e,i=n.return,a=n,l=t;if(t=ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=f0(i);if(p!==null){p.flags&=-257,h0(p,i,a,o,t),p.mode&1&&d0(o,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(l),t.updateQueue=g}else y.add(l);break e}else{if(!(t&1)){d0(o,u,t),wm();break e}l=Error(ne(426))}}else if(He&&a.mode&1){var w=f0(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),h0(w,i,a,o,t),em(Oo(l,a));break e}}o=l=Oo(l,a),it!==4&&(it=2),zi===null?zi=[o]:zi.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=Zb(o,l,t);o0(o,v);break e;case 1:a=l;var x=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wr===null||!Wr.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Jb(o,a,t);o0(o,_);break e}}o=o.return}while(o!==null)}v1(n)}catch(S){t=S,st===n&&n!==null&&(st=n=n.return);continue}break}while(1)}function m1(){var e=Ec.current;return Ec.current=Sc,e===null?Sc:e}function wm(){(it===0||it===3||it===2)&&(it=4),ut===null||!(As&268435455)&&!(hu&268435455)||Ir(ut,ht)}function Pc(e,t){var n=Te;Te|=2;var r=m1();(ut!==e||ht!==t)&&(Kn=null,Es(e,t));do try{bT();break}catch(s){p1(e,s)}while(1);if(nm(),Te=n,Ec.current=r,st!==null)throw Error(ne(261));return ut=null,ht=0,it}function bT(){for(;st!==null;)g1(st)}function _T(){for(;st!==null&&!GP();)g1(st)}function g1(e){var t=x1(e.alternate,e,Kt);e.memoizedProps=e.pendingProps,t===null?v1(e):st=t,mm.current=null}function v1(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=mT(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,st=null;return}}else if(n=pT(n,t,Kt),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);it===0&&(it=5)}function ps(e,t,n){var r=Re,s=cn.transition;try{cn.transition=null,Re=1,CT(e,t,n,r)}finally{cn.transition=s,Re=r}return null}function CT(e,t,n,r){do Eo();while(Mr!==null);if(Te&6)throw Error(ne(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(rN(e,o),e===ut&&(st=ut=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,w1(cc,function(){return Eo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=cn.transition,cn.transition=null;var i=Re;Re=1;var a=Te;Te|=4,mm.current=null,vT(e,n),d1(n,e),VN(ih),dc=!!oh,ih=oh=null,e.current=n,yT(n),qP(),Te=a,Re=i,cn.transition=o}else e.current=n;if(yl&&(yl=!1,Mr=e,jc=s),o=e.pendingLanes,o===0&&(Wr=null),ZP(n.stateNode),zt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(kc)throw kc=!1,e=kh,kh=null,e;return jc&1&&e.tag!==0&&Eo(),o=e.pendingLanes,o&1?e===jh?Ui++:(Ui=0,jh=e):Ui=0,is(),null}function Eo(){if(Mr!==null){var e=Zw(jc),t=cn.transition,n=Re;try{if(cn.transition=null,Re=16>e?16:e,Mr===null)var r=!1;else{if(e=Mr,Mr=null,jc=0,Te&6)throw Error(ne(331));var s=Te;for(Te|=4,fe=e.current;fe!==null;){var o=fe,i=o.child;if(fe.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(fe=u;fe!==null;){var d=fe;switch(d.tag){case 0:case 11:case 15:Fi(8,d,o)}var f=d.child;if(f!==null)f.return=d,fe=f;else for(;fe!==null;){d=fe;var h=d.sibling,p=d.return;if(l1(d),d===u){fe=null;break}if(h!==null){h.return=p,fe=h;break}fe=p}}}var y=o.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}fe=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,fe=i;else e:for(;fe!==null;){if(o=fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Fi(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,fe=v;break e}fe=o.return}}var x=e.current;for(fe=x;fe!==null;){i=fe;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,fe=b;else e:for(i=x;fe!==null;){if(a=fe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fu(9,a)}}catch(S){Je(a,a.return,S)}if(a===i){fe=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,fe=_;break e}fe=a.return}}if(Te=s,is(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(su,e)}catch{}r=!0}return r}finally{Re=n,cn.transition=t}}return!1}function k0(e,t,n){t=Oo(n,t),t=Zb(e,t,1),e=Vr(e,t,1),t=Pt(),e!==null&&(Na(e,1,t),zt(e,t))}function Je(e,t,n){if(e.tag===3)k0(e,e,n);else for(;t!==null;){if(t.tag===3){k0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){e=Oo(n,e),e=Jb(t,e,1),t=Vr(t,e,1),e=Pt(),t!==null&&(Na(t,1,e),zt(t,e));break}}t=t.return}}function ST(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(ht&n)===n&&(it===4||it===3&&(ht&130023424)===ht&&500>nt()-vm?Es(e,0):gm|=n),zt(e,t)}function y1(e,t){t===0&&(e.mode&1?(t=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):t=1);var n=Pt();e=ir(e,t),e!==null&&(Na(e,t,n),zt(e,n))}function ET(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),y1(e,n)}function kT(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(t),y1(e,n)}var x1;x1=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lt.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,hT(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,He&&t.flags&1048576&&Cb(t,yc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zl(e,t),e=t.pendingProps;var s=Ro(t,bt.current);So(t,n),s=um(null,t,r,e,s,n);var o=dm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(r)?(o=!0,gc(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,om(t),s.updater=du,t.stateNode=s,s._reactInternals=t,mh(t,r,e,n),t=yh(null,t,r,!0,o,n)):(t.tag=0,He&&o&&Jp(t),kt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=PT(r),e=gn(r,e),s){case 0:t=vh(null,t,r,e,n);break e;case 1:t=g0(null,t,r,e,n);break e;case 11:t=p0(null,t,r,e,n);break e;case 14:t=m0(null,t,r,gn(r.type,e),n);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),vh(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),g0(e,t,r,s,n);case 3:e:{if(n1(t),e===null)throw Error(ne(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Nb(e,t),bc(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Oo(Error(ne(423)),t),t=v0(e,t,r,n,s);break e}else if(r!==s){s=Oo(Error(ne(424)),t),t=v0(e,t,r,n,s);break e}else for(qt=Br(t.stateNode.containerInfo.firstChild),Xt=t,He=!0,xn=null,n=jb(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($o(),r===s){t=ar(e,t,n);break e}kt(e,t,r,n)}t=t.child}return t;case 5:return Tb(t),e===null&&fh(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,ah(r,s)?i=null:o!==null&&ah(r,o)&&(t.flags|=32),t1(e,t),kt(e,t,i,n),t.child;case 6:return e===null&&fh(t),null;case 13:return r1(e,t,n);case 4:return im(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Io(t,null,r,n):kt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),p0(e,t,r,s,n);case 7:return kt(e,t,t.pendingProps,n),t.child;case 8:return kt(e,t,t.pendingProps.children,n),t.child;case 12:return kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Le(xc,r._currentValue),r._currentValue=i,o!==null)if(Cn(o.value,i)){if(o.children===s.children&&!Lt.current){t=ar(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=er(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),hh(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ne(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),hh(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}kt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,So(t,n),s=dn(s),r=r(s),t.flags|=1,kt(e,t,r,n),t.child;case 14:return r=t.type,s=gn(r,t.pendingProps),s=gn(r.type,s),m0(e,t,r,s,n);case 15:return Qb(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Zl(e,t),t.tag=1,Ft(r)?(e=!0,gc(t)):e=!1,So(t,n),Yb(t,r,s),mh(t,r,s,n),yh(null,t,r,!0,e,n);case 19:return s1(e,t,n);case 22:return e1(e,t,n)}throw Error(ne(156,t.tag))};function w1(e,t){return Gw(e,t)}function jT(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(e,t,n,r){return new jT(e,t,n,r)}function bm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PT(e){if(typeof e=="function")return bm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zp)return 11;if(e===Up)return 14}return 2}function Kr(e,t){var n=e.alternate;return n===null?(n=ln(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ec(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")bm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case so:return ks(n.children,s,o,t);case Fp:i=8,s|=8;break;case Ff:return e=ln(12,n,t,s|2),e.elementType=Ff,e.lanes=o,e;case zf:return e=ln(13,n,t,s),e.elementType=zf,e.lanes=o,e;case Uf:return e=ln(19,n,t,s),e.elementType=Uf,e.lanes=o,e;case Tw:return pu(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pw:i=10;break e;case Nw:i=9;break e;case zp:i=11;break e;case Up:i=14;break e;case Nr:i=16,r=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=ln(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function ks(e,t,n,r){return e=ln(7,e,r,t),e.lanes=n,e}function pu(e,t,n,r){return e=ln(22,e,r,t),e.elementType=Tw,e.lanes=n,e.stateNode={isHidden:!1},e}function Gd(e,t,n){return e=ln(6,e,null,t),e.lanes=n,e}function qd(e,t,n){return t=ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NT(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pd(0),this.expirationTimes=Pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _m(e,t,n,r,s,o,i,a,l){return e=new NT(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ln(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},om(o),e}function TT(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ro,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function b1(e){if(!e)return Jr;e=e._reactInternals;e:{if(Ls(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var n=e.type;if(Ft(n))return bb(e,n,t)}return t}function _1(e,t,n,r,s,o,i,a,l){return e=_m(n,r,!0,e,s,o,i,a,l),e.context=b1(null),n=e.current,r=Pt(),s=Hr(n),o=er(r,s),o.callback=t??null,Vr(n,o,s),e.current.lanes=s,Na(e,s,r),zt(e,r),e}function mu(e,t,n,r){var s=t.current,o=Pt(),i=Hr(s);return n=b1(n),t.context===null?t.context=n:t.pendingContext=n,t=er(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vr(s,t,i),e!==null&&(_n(e,s,i,o),ql(e,s,i)),i}function Nc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function j0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cm(e,t){j0(e,t),(e=e.alternate)&&j0(e,t)}function AT(){return null}var C1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sm(e){this._internalRoot=e}gu.prototype.render=Sm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));mu(e,t,null,null)};gu.prototype.unmount=Sm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rs(function(){mu(null,e,null,null)}),t[or]=null}};function gu(e){this._internalRoot=e}gu.prototype.unstable_scheduleHydration=function(e){if(e){var t=eb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$r.length&&t!==0&&t<$r[n].priority;n++);$r.splice(n,0,e),n===0&&nb(e)}};function Em(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function P0(){}function RT(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=Nc(i);o.call(u)}}var i=_1(t,r,e,0,null,!1,!1,"",P0);return e._reactRootContainer=i,e[or]=i.current,oa(e.nodeType===8?e.parentNode:e),Rs(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Nc(l);a.call(u)}}var l=_m(e,0,!1,null,null,!1,!1,"",P0);return e._reactRootContainer=l,e[or]=l.current,oa(e.nodeType===8?e.parentNode:e),Rs(function(){mu(t,l,n,r)}),l}function yu(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=Nc(i);a.call(l)}}mu(t,i,e,s)}else i=RT(n,t,e,s,r);return Nc(i)}Jw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pi(t.pendingLanes);n!==0&&(Wp(t,n|1),zt(t,nt()),!(Te&6)&&(Mo=nt()+500,is()))}break;case 13:Rs(function(){var r=ir(e,1);if(r!==null){var s=Pt();_n(r,e,1,s)}}),Cm(e,1)}};Hp=function(e){if(e.tag===13){var t=ir(e,134217728);if(t!==null){var n=Pt();_n(t,e,134217728,n)}Cm(e,134217728)}};Qw=function(e){if(e.tag===13){var t=Hr(e),n=ir(e,t);if(n!==null){var r=Pt();_n(n,e,t,r)}Cm(e,t)}};eb=function(){return Re};tb=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};Zf=function(e,t,n){switch(t){case"input":if(Wf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=lu(r);if(!s)throw Error(ne(90));Rw(r),Wf(r,s)}}}break;case"textarea":Iw(e,n);break;case"select":t=n.value,t!=null&&wo(e,!!n.multiple,t,!1)}};Uw=ym;Bw=Rs;var $T={usingClientEntryPoint:!1,Events:[Aa,lo,lu,Fw,zw,ym]},wi={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IT={bundleType:wi.bundleType,version:wi.version,rendererPackageName:wi.rendererPackageName,rendererConfig:wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hw(e),e===null?null:e.stateNode},findFiberByHostInstance:wi.findFiberByHostInstance||AT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xl.isDisabled&&xl.supportsFiber)try{su=xl.inject(IT),Mn=xl}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$T;Qt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Em(t))throw Error(ne(200));return TT(e,t,null,n)};Qt.createRoot=function(e,t){if(!Em(e))throw Error(ne(299));var n=!1,r="",s=C1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_m(e,1,!1,null,null,n,!1,r,s),e[or]=t.current,oa(e.nodeType===8?e.parentNode:e),new Sm(t)};Qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=Hw(t),e=e===null?null:e.stateNode,e};Qt.flushSync=function(e){return Rs(e)};Qt.hydrate=function(e,t,n){if(!vu(t))throw Error(ne(200));return yu(null,e,t,!0,n)};Qt.hydrateRoot=function(e,t,n){if(!Em(e))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=C1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=_1(t,null,e,1,n??null,s,!1,o,i),e[or]=t.current,oa(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new gu(t)};Qt.render=function(e,t,n){if(!vu(t))throw Error(ne(200));return yu(null,e,t,!1,n)};Qt.unmountComponentAtNode=function(e){if(!vu(e))throw Error(ne(40));return e._reactRootContainer?(Rs(function(){yu(null,null,e,!1,function(){e._reactRootContainer=null,e[or]=null})}),!0):!1};Qt.unstable_batchedUpdates=ym;Qt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vu(n))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return yu(e,t,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function S1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S1)}catch(e){console.error(e)}}S1(),Sw.exports=Qt;var Bn=Sw.exports;const E1=Ap(Bn);var N0=Bn;Mf.createRoot=N0.createRoot,Mf.hydrateRoot=N0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pa.apply(this,arguments)}var Lr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lr||(Lr={}));const T0="popstate";function DT(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:i,hash:a}=r.location;return Th("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Tc(s)}return MT(t,n,null,e)}function Ye(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function k1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OT(){return Math.random().toString(36).substr(2,8)}function A0(e,t){return{usr:e.state,key:e.key,idx:t}}function Th(e,t,n,r){return n===void 0&&(n=null),pa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Jo(t):t,{state:n,key:t&&t.key||r||OT()})}function Tc(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Jo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function MT(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=Lr.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(pa({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){a=Lr.Pop;let w=d(),v=w==null?null:w-u;u=w,l&&l({action:a,location:g.location,delta:v})}function h(w,v){a=Lr.Push;let x=Th(g.location,w,v);n&&n(x,w),u=d()+1;let b=A0(x,u),_=g.createHref(x);try{i.pushState(b,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}o&&l&&l({action:a,location:g.location,delta:1})}function p(w,v){a=Lr.Replace;let x=Th(g.location,w,v);n&&n(x,w),u=d();let b=A0(x,u),_=g.createHref(x);i.replaceState(b,"",_),o&&l&&l({action:a,location:g.location,delta:0})}function y(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Tc(w);return x=x.replace(/ $/,"%20"),Ye(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return a},get location(){return e(s,i)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(T0,f),l=w,()=>{s.removeEventListener(T0,f),l=null}},createHref(w){return t(s,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(w){return i.go(w)}};return g}var R0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(R0||(R0={}));function LT(e,t,n){return n===void 0&&(n="/"),FT(e,t,n,!1)}function FT(e,t,n,r){let s=typeof t=="string"?Jo(t):t,o=Lo(s.pathname||"/",n);if(o==null)return null;let i=j1(e);zT(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let u=ZT(o);a=XT(i[l],u,r)}return a}function j1(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Gr([r,l.relativePath]),d=n.concat(l);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),j1(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:GT(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of P1(o.path))s(o,i,l)}),t}function P1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=P1(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function zT(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qT(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const UT=/^:[\w-]+$/,BT=3,VT=2,WT=1,HT=10,KT=-2,$0=e=>e==="*";function GT(e,t){let n=e.split("/"),r=n.length;return n.some($0)&&(r+=KT),t&&(r+=VT),n.filter(s=>!$0(s)).reduce((s,o)=>s+(UT.test(o)?BT:o===""?WT:HT),r)}function qT(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function XT(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=Ac({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Ac({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Gr([o,f.pathname]),pathnameBase:tA(Gr([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Gr([o,f.pathnameBase]))}return i}function Ac(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=YT(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let g=a[f]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const y=a[f];return p&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function YT(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),k1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function ZT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return k1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Lo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function JT(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Jo(e):e;return{pathname:n?n.startsWith("/")?n:QT(n,t):t,search:nA(r),hash:rA(s)}}function QT(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xd(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function km(e,t){let n=eA(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jm(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Jo(e):(s=pa({},e),Ye(!s.pathname||!s.pathname.includes("?"),Xd("?","pathname","search",s)),Ye(!s.pathname||!s.pathname.includes("#"),Xd("#","pathname","hash",s)),Ye(!s.search||!s.search.includes("#"),Xd("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let f=t.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=JT(s,a),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Gr=e=>e.join("/").replace(/\/\/+/g,"/"),tA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const N1=["post","put","patch","delete"];new Set(N1);const oA=["get",...N1];new Set(oA);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ma.apply(this,arguments)}const xu=m.createContext(null),T1=m.createContext(null),xr=m.createContext(null),wu=m.createContext(null),Vn=m.createContext({outlet:null,matches:[],isDataRoute:!1}),A1=m.createContext(null);function iA(e,t){let{relative:n}=t===void 0?{}:t;Qo()||Ye(!1);let{basename:r,navigator:s}=m.useContext(xr),{hash:o,pathname:i,search:a}=bu(e,{relative:n}),l=i;return r!=="/"&&(l=i==="/"?r:Gr([r,i])),s.createHref({pathname:l,search:a,hash:o})}function Qo(){return m.useContext(wu)!=null}function wr(){return Qo()||Ye(!1),m.useContext(wu).location}function R1(e){m.useContext(xr).static||m.useLayoutEffect(e)}function as(){let{isDataRoute:e}=m.useContext(Vn);return e?bA():aA()}function aA(){Qo()||Ye(!1);let e=m.useContext(xu),{basename:t,future:n,navigator:r}=m.useContext(xr),{matches:s}=m.useContext(Vn),{pathname:o}=wr(),i=JSON.stringify(km(s,n.v7_relativeSplatPath)),a=m.useRef(!1);return R1(()=>{a.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=jm(u,JSON.parse(i),o,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Gr([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,i,o,e])}const lA=m.createContext(null);function cA(e){let t=m.useContext(Vn).outlet;return t&&m.createElement(lA.Provider,{value:e},t)}function $a(){let{matches:e}=m.useContext(Vn),t=e[e.length-1];return t?t.params:{}}function bu(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=m.useContext(xr),{matches:s}=m.useContext(Vn),{pathname:o}=wr(),i=JSON.stringify(km(s,r.v7_relativeSplatPath));return m.useMemo(()=>jm(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function uA(e,t){return dA(e,t)}function dA(e,t,n,r){Qo()||Ye(!1);let{navigator:s,static:o}=m.useContext(xr),{matches:i}=m.useContext(Vn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=wr(),f;if(t){var h;let v=typeof t=="string"?Jo(t):t;u==="/"||(h=v.pathname)!=null&&h.startsWith(u)||Ye(!1),f=v}else f=d;let p=f.pathname||"/",y=p;if(u!=="/"){let v=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=!o&&n&&n.matches&&n.matches.length>0?n.matches:LT(e,{pathname:y}),w=gA(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Gr([u,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Gr([u,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return t&&w?m.createElement(wu.Provider,{value:{location:ma({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Lr.Pop}},w):w}function fA(){let e=wA(),t=sA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:s},n):null,o)}const hA=m.createElement(fA,null);class pA extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(Vn.Provider,{value:this.props.routeContext},m.createElement(A1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mA(e){let{routeContext:t,match:n,children:r}=e,s=m.useContext(xu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Vn.Provider,{value:t},r)}function gA(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Ye(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=n,y=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let p,y=!1,g=null,w=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||hA,l&&(u<0&&h===0?(_A("route-fallback",!1),y=!0,w=null):u===h&&(y=!0,w=f.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,h+1)),x=()=>{let b;return p?b=g:y?b=w:f.route.Component?b=m.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,m.createElement(mA,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(pA,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var $1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($1||{}),Rc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rc||{});function vA(e){let t=m.useContext(xu);return t||Ye(!1),t}function yA(e){let t=m.useContext(T1);return t||Ye(!1),t}function xA(e){let t=m.useContext(Vn);return t||Ye(!1),t}function I1(e){let t=xA(),n=t.matches[t.matches.length-1];return n.route.id||Ye(!1),n.route.id}function wA(){var e;let t=m.useContext(A1),n=yA(Rc.UseRouteError),r=I1(Rc.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function bA(){let{router:e}=vA($1.UseNavigateStable),t=I1(Rc.UseNavigateStable),n=m.useRef(!1);return R1(()=>{n.current=!0}),m.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ma({fromRouteId:t},o)))},[e,t])}const I0={};function _A(e,t,n){!t&&!I0[e]&&(I0[e]=!0)}function CA(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function D0(e){let{to:t,replace:n,state:r,relative:s}=e;Qo()||Ye(!1);let{future:o,static:i}=m.useContext(xr),{matches:a}=m.useContext(Vn),{pathname:l}=wr(),u=as(),d=jm(t,km(a,o.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function $c(e){return cA(e.context)}function Be(e){Ye(!1)}function SA(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Lr.Pop,navigator:o,static:i=!1,future:a}=e;Qo()&&Ye(!1);let l=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:l,navigator:o,static:i,future:ma({v7_relativeSplatPath:!1},a)}),[l,a,o,i]);typeof r=="string"&&(r=Jo(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:y="default"}=r,g=m.useMemo(()=>{let w=Lo(d,l);return w==null?null:{location:{pathname:w,search:f,hash:h,state:p,key:y},navigationType:s}},[l,d,f,h,p,y,s]);return g==null?null:m.createElement(xr.Provider,{value:u},m.createElement(wu.Provider,{children:n,value:g}))}function EA(e){let{children:t,location:n}=e;return uA(Ah(t),n)}new Promise(()=>{});function Ah(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,s)=>{if(!m.isValidElement(r))return;let o=[...t,s];if(r.type===m.Fragment){n.push.apply(n,Ah(r.props.children,o));return}r.type!==Be&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Ah(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ic.apply(this,arguments)}function D1(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function kA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jA(e,t){return e.button===0&&(!t||t==="_self")&&!kA(e)}const PA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],TA="6";try{window.__reactRouterVersion=TA}catch{}const AA=m.createContext({isTransitioning:!1}),RA="startTransition",O0=Pa[RA];function $A(e){let{basename:t,children:n,future:r,window:s}=e,o=m.useRef();o.current==null&&(o.current=DT({window:s,v5Compat:!0}));let i=o.current,[a,l]=m.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=m.useCallback(f=>{u&&O0?O0(()=>l(f)):l(f)},[l,u]);return m.useLayoutEffect(()=>i.listen(d),[i,d]),m.useEffect(()=>CA(r),[r]),m.createElement(SA,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const IA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=m.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:l,to:u,preventScrollReset:d,viewTransition:f}=t,h=D1(t,PA),{basename:p}=m.useContext(xr),y,g=!1;if(typeof u=="string"&&DA.test(u)&&(y=u,IA))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),S=Lo(_.pathname,p);_.origin===b.origin&&S!=null?u=S+_.search+_.hash:g=!0}catch{}let w=iA(u,{relative:s}),v=MA(u,{replace:i,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function x(b){r&&r(b),b.defaultPrevented||v(b)}return m.createElement("a",Ic({},h,{href:y||w,onClick:g||o?r:x,ref:n,target:l}))}),M0=m.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:i=!1,style:a,to:l,viewTransition:u,children:d}=t,f=D1(t,NA),h=bu(l,{relative:f.relative}),p=wr(),y=m.useContext(T1),{navigator:g,basename:w}=m.useContext(xr),v=y!=null&&LA(h)&&u===!0,x=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=p.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(b=b.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&w&&(_=Lo(_,w)||_);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=b===x||!i&&b.startsWith(x)&&b.charAt(S)==="/",k=_!=null&&(_===x||!i&&_.startsWith(x)&&_.charAt(x.length)==="/"),j={isActive:N,isPending:k,isTransitioning:v},T=N?r:void 0,M;typeof o=="function"?M=o(j):M=[o,N?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(j):a;return m.createElement(_e,Ic({},f,{"aria-current":T,className:M,ref:n,style:F,to:l,viewTransition:u}),typeof d=="function"?d(j):d)});var Rh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rh||(Rh={}));var L0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(L0||(L0={}));function OA(e){let t=m.useContext(xu);return t||Ye(!1),t}function MA(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:a}=t===void 0?{}:t,l=as(),u=wr(),d=bu(e,{relative:i});return m.useCallback(f=>{if(jA(f,n)){f.preventDefault();let h=r!==void 0?r:Tc(u)===Tc(d);l(e,{replace:h,state:s,preventScrollReset:o,relative:i,viewTransition:a})}},[u,l,d,r,s,n,e,o,i,a])}function LA(e,t){t===void 0&&(t={});let n=m.useContext(AA);n==null&&Ye(!1);let{basename:r}=OA(Rh.useViewTransitionState),s=bu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Lo(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Lo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ac(s.pathname,i)!=null||Ac(s.pathname,o)!=null}function O1(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=O1(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function M1(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=O1(e))&&(r&&(r+=" "),r+=t);return r}function FA(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=L1(t))&&(r&&(r+=" "),r+=n);return r}function L1(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=L1(e[r]))&&(n&&(n+=" "),n+=t);return n}var Pm="-";function zA(e){var t=BA(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,s=r===void 0?{}:r;function o(a){var l=a.split(Pm);return l[0]===""&&l.length!==1&&l.shift(),F1(l,t)||UA(a)}function i(a,l){var u=n[a]||[];return l&&s[a]?[].concat(u,s[a]):u}return{getClassGroupId:o,getConflictingClassGroupIds:i}}function F1(e,t){var i;if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),s=r?F1(e.slice(1),r):void 0;if(s)return s;if(t.validators.length!==0){var o=e.join(Pm);return(i=t.validators.find(function(a){var l=a.validator;return l(o)}))==null?void 0:i.classGroupId}}var F0=/^\[(.+)\]$/;function UA(e){if(F0.test(e)){var t=F0.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function BA(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},s=WA(Object.entries(e.classGroups),n);return s.forEach(function(o){var i=o[0],a=o[1];$h(a,r,i,t)}),r}function $h(e,t,n,r){e.forEach(function(s){if(typeof s=="string"){var o=s===""?t:z0(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(VA(s)){$h(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(i){var a=i[0],l=i[1];$h(l,z0(t,a),n,r)})})}function z0(e,t){var n=e;return t.split(Pm).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function VA(e){return e.isThemeGetter}function WA(e,t){return t?e.map(function(n){var r=n[0],s=n[1],o=s.map(function(i){return typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(function(a){var l=a[0],u=a[1];return[t+l,u]})):i});return[r,o]}):e}function HA(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function s(o,i){n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(i){var a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set:function(i,a){n.has(i)?n.set(i,a):s(i,a)}}}var z1="!";function KA(e){var t=e.separator||":",n=t.length===1,r=t[0],s=t.length;return function(i){for(var a=[],l=0,u=0,d,f=0;f<i.length;f++){var h=i[f];if(l===0){if(h===r&&(n||i.slice(f,f+s)===t)){a.push(i.slice(u,f)),u=f+s;continue}if(h==="/"){d=f;continue}}h==="["?l++:h==="]"&&l--}var p=a.length===0?i:i.substring(u),y=p.startsWith(z1),g=y?p.substring(1):p,w=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:w}}}function GA(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var s=r[0]==="[";s?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function qA(e){return{cache:HA(e.cacheSize),splitModifiers:KA(e),...zA(e)}}var XA=/\s+/;function YA(e,t){var n=t.splitModifiers,r=t.getClassGroupId,s=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(XA).map(function(i){var a=n(i),l=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,f=a.maybePostfixModifierPosition,h=r(f?d.substring(0,f):d),p=!!f;if(!h){if(!f)return{isTailwindClass:!1,originalClassName:i};if(h=r(d),!h)return{isTailwindClass:!1,originalClassName:i};p=!1}var y=GA(l).join(":"),g=u?y+z1:y;return{isTailwindClass:!0,modifierId:g,classGroupId:h,originalClassName:i,hasPostfixModifier:p}}).reverse().filter(function(i){if(!i.isTailwindClass)return!0;var a=i.modifierId,l=i.classGroupId,u=i.hasPostfixModifier,d=a+l;return o.has(d)?!1:(o.add(d),s(l,u).forEach(function(f){return o.add(a+f)}),!0)}).reverse().map(function(i){return i.originalClassName}).join(" ")}function ZA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s,o,i=a;function a(u){var d=t[0],f=t.slice(1),h=f.reduce(function(p,y){return y(p)},d());return r=qA(h),s=r.cache.get,o=r.cache.set,i=l,l(u)}function l(u){var d=s(u);if(d)return d;var f=YA(u,r);return o(u,f),f}return function(){return i(FA.apply(null,arguments))}}function ze(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var U1=/^\[(?:([a-z-]+):)?(.+)\]$/i,JA=/^\d+\/\d+$/,QA=new Set(["px","full","screen"]),eR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nR=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function mn(e){return Cs(e)||QA.has(e)||JA.test(e)||Ih(e)}function Ih(e){return Fs(e,"length",lR)}function rR(e){return Fs(e,"size",B1)}function sR(e){return Fs(e,"position",B1)}function oR(e){return Fs(e,"url",cR)}function wl(e){return Fs(e,"number",Cs)}function Cs(e){return!Number.isNaN(Number(e))}function iR(e){return e.endsWith("%")&&Cs(e.slice(0,-1))}function bi(e){return U0(e)||Fs(e,"number",U0)}function je(e){return U1.test(e)}function _i(){return!0}function Cr(e){return eR.test(e)}function aR(e){return Fs(e,"",uR)}function Fs(e,t,n){var r=U1.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function lR(e){return tR.test(e)}function B1(){return!1}function cR(e){return e.startsWith("url(")}function U0(e){return Number.isInteger(Number(e))}function uR(e){return nR.test(e)}function dR(){var e=ze("colors"),t=ze("spacing"),n=ze("blur"),r=ze("brightness"),s=ze("borderColor"),o=ze("borderRadius"),i=ze("borderSpacing"),a=ze("borderWidth"),l=ze("contrast"),u=ze("grayscale"),d=ze("hueRotate"),f=ze("invert"),h=ze("gap"),p=ze("gradientColorStops"),y=ze("gradientColorStopPositions"),g=ze("inset"),w=ze("margin"),v=ze("opacity"),x=ze("padding"),b=ze("saturate"),_=ze("scale"),S=ze("sepia"),N=ze("skew"),k=ze("space"),j=ze("translate"),T=function(){return["auto","contain","none"]},M=function(){return["auto","hidden","clip","visible","scroll"]},F=function(){return["auto",je,t]},P=function(){return[je,t]},L=function(){return["",mn]},C=function(){return["auto",Cs,je]},O=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},V=function(){return["solid","dashed","dotted","double","none"]},B=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},z=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",je]},W=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},A=function(){return[Cs,wl]},D=function(){return[Cs,je]};return{cacheSize:500,theme:{colors:[_i],spacing:[mn],blur:["none","",Cr,je],brightness:A(),borderColor:[e],borderRadius:["none","","full",Cr,je],borderSpacing:P(),borderWidth:L(),contrast:A(),grayscale:$(),hueRotate:D(),invert:$(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[iR,Ih],inset:F(),margin:F(),opacity:A(),padding:P(),saturate:A(),scale:A(),sepia:$(),skew:D(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",je]}],container:["container"],columns:[{columns:[Cr]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(O(),[je])}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bi]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",je]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",bi]}],"grid-cols":[{"grid-cols":[_i]}],"col-start-end":[{col:["auto",{span:["full",bi]},je]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[_i]}],"row-start-end":[{row:["auto",{span:[bi]},je]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",je]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",je,t]}],"min-w":[{"min-w":["min","max","fit",je,mn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Cr]},Cr,je]}],h:[{h:[je,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",je,mn]}],"max-h":[{"max-h":[je,t,"min","max","fit"]}],"font-size":[{text:["base",Cr,Ih]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wl]}],"font-family":[{font:[_i]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",je]}],"line-clamp":[{"line-clamp":["none",Cs,wl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",je,mn]}],"list-image":[{"list-image":["none",je]}],"list-style-type":[{list:["none","disc","decimal",je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(V(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",mn]}],"underline-offset":[{"underline-offset":["auto",je,mn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(O(),[sR])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(V(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(V())}],"outline-offset":[{"outline-offset":[je,mn]}],"outline-w":[{outline:[mn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[mn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cr,aR]}],"shadow-color":[{shadow:[_i]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":B()}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Cr,je]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",je]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",je]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[bi,je]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",je]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[mn,wl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var fR=ZA(dR);function he(...e){return fR(M1(e))}function me(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function B0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _u(...e){return t=>{let n=!1;const r=e.map(s=>{const o=B0(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():B0(e[s],null)}}}}function $e(...e){return m.useCallback(_u(...e),e)}function hR(e,t){const n=m.createContext(t),r=o=>{const{children:i,...a}=o,l=m.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function s(o){const i=m.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function tn(e,t=[]){let n=[];function r(o,i){const a=m.createContext(i),l=n.length;n=[...n,i];const u=f=>{var v;const{scope:h,children:p,...y}=f,g=((v=h==null?void 0:h[e])==null?void 0:v[l])||a,w=m.useMemo(()=>y,Object.values(y));return c.jsx(g.Provider,{value:w,children:p})};u.displayName=o+"Provider";function d(f,h){var g;const p=((g=h==null?void 0:h[e])==null?void 0:g[l])||a,y=m.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(i=>m.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,pR(s,...t)]}function pR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Fo(e){const t=gR(e),n=m.forwardRef((r,s)=>{const{children:o,...i}=r,a=m.Children.toArray(o),l=a.find(yR);if(l){const u=l.props.children,d=a.map(f=>f===l?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return c.jsx(t,{...i,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return c.jsx(t,{...i,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var mR=Fo("Slot");function gR(e){const t=m.forwardRef((n,r)=>{const{children:s,...o}=n;if(m.isValidElement(s)){const i=wR(s),a=xR(o,s.props);return s.type!==m.Fragment&&(a.ref=r?_u(r,i):i),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var V1=Symbol("radix.slottable");function vR(e){const t=({children:n})=>c.jsx(c.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=V1,t}function yR(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===V1}function xR(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function wR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Cu(e){const t=e+"CollectionProvider",[n,r]=tn(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:w,children:v}=g,x=ce.useRef(null),b=ce.useRef(new Map).current;return c.jsx(s,{scope:w,itemMap:b,collectionRef:x,children:v})};i.displayName=t;const a=e+"CollectionSlot",l=Fo(a),u=ce.forwardRef((g,w)=>{const{scope:v,children:x}=g,b=o(a,v),_=$e(w,b.collectionRef);return c.jsx(l,{ref:_,children:x})});u.displayName=a;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Fo(d),p=ce.forwardRef((g,w)=>{const{scope:v,children:x,...b}=g,_=ce.useRef(null),S=$e(w,_),N=o(d,v);return ce.useEffect(()=>(N.itemMap.set(_,{ref:_,...b}),()=>void N.itemMap.delete(_))),c.jsx(h,{[f]:"",ref:S,children:x})});p.displayName=d;function y(g){const w=o(e+"CollectionConsumer",g);return ce.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((N,k)=>b.indexOf(N.ref.current)-b.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},y,r]}var bR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=bR.reduce((e,t)=>{const n=Fo(`Primitive.${t}`),r=m.forwardRef((s,o)=>{const{asChild:i,...a}=s,l=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Nm(e,t){e&&Bn.flushSync(()=>e.dispatchEvent(t))}function Ut(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function _R(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var CR="DismissableLayer",Dh="dismissableLayer.update",SR="dismissableLayer.pointerDownOutside",ER="dismissableLayer.focusOutside",V0,W1=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Su=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...l}=e,u=m.useContext(W1),[d,f]=m.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),y=$e(t,k=>f(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),x=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=v,S=jR(k=>{const j=k.target,T=[...u.branches].some(M=>M.contains(j));!_||T||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),N=PR(k=>{const j=k.target;[...u.branches].some(M=>M.contains(j))||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return _R(k=>{x===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(V0=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),W0(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=V0)}},[d,h,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),W0())},[d,u]),m.useEffect(()=>{const k=()=>p({});return document.addEventListener(Dh,k),()=>document.removeEventListener(Dh,k)},[]),c.jsx(we.div,{...l,ref:y,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:me(e.onFocusCapture,N.onFocusCapture),onBlurCapture:me(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:me(e.onPointerDownCapture,S.onPointerDownCapture)})});Su.displayName=CR;var kR="DismissableLayerBranch",H1=m.forwardRef((e,t)=>{const n=m.useContext(W1),r=m.useRef(null),s=$e(t,r);return m.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),c.jsx(we.div,{...e,ref:s})});H1.displayName=kR;function jR(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){K1(SR,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function PR(e,t=globalThis==null?void 0:globalThis.document){const n=Ut(e),r=m.useRef(!1);return m.useEffect(()=>{const s=o=>{o.target&&!r.current&&K1(ER,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function W0(){const e=new CustomEvent(Dh);document.dispatchEvent(e)}function K1(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Nm(s,o):s.dispatchEvent(o)}var NR=Su,TR=H1,hn=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},AR="Portal",Eu=m.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[s,o]=m.useState(!1);hn(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?E1.createPortal(c.jsx(we.div,{...r,ref:t}),i):null});Eu.displayName=AR;function RR(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var Pn=e=>{const{present:t,children:n}=e,r=$R(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),o=$e(r.ref,IR(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:o}):null};Pn.displayName="Presence";function $R(e){const[t,n]=m.useState(),r=m.useRef(null),s=m.useRef(e),o=m.useRef("none"),i=e?"mounted":"unmounted",[a,l]=RR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=bl(r.current);o.current=a==="mounted"?u:"none"},[a]),hn(()=>{const u=r.current,d=s.current;if(d!==e){const h=o.current,p=bl(u);e?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),hn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=p=>{const g=bl(r.current).includes(p.animationName);if(p.target===t&&g&&(l("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},h=p=>{p.target===t&&(o.current=bl(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function bl(e){return(e==null?void 0:e.animationName)||"none"}function IR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var DR=Pa[" useInsertionEffect ".trim().toString()]||hn;function zs({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,i]=OR({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:s;{const d=m.useRef(e!==void 0);m.useEffect(()=>{const f=d.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=m.useCallback(d=>{var f;if(a){const h=MR(d)?d(e):d;h!==e&&((f=i.current)==null||f.call(i,h))}else o(d)},[a,e,o,i]);return[l,u]}function OR({defaultProp:e,onChange:t}){const[n,r]=m.useState(e),s=m.useRef(n),o=m.useRef(t);return DR(()=>{o.current=t},[t]),m.useEffect(()=>{var i;s.current!==n&&((i=o.current)==null||i.call(o,n),s.current=n)},[n,s]),[n,r,o]}function MR(e){return typeof e=="function"}var LR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),FR="VisuallyHidden",Tm=m.forwardRef((e,t)=>c.jsx(we.span,{...e,ref:t,style:{...LR,...e.style}}));Tm.displayName=FR;var Am="ToastProvider",[Rm,zR,UR]=Cu("Toast"),[G1,Z9]=tn("Toast",[UR]),[BR,ku]=G1(Am),q1=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=e,[a,l]=m.useState(null),[u,d]=m.useState(0),f=m.useRef(!1),h=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Am}\`. Expected non-empty \`string\`.`),c.jsx(Rm.Provider,{scope:t,children:c.jsx(BR,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:i})})};q1.displayName=Am;var X1="ToastViewport",VR=["F8"],Oh="toast.viewportPause",Mh="toast.viewportResume",Y1=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=VR,label:s="Notifications ({hotkey})",...o}=e,i=ku(X1,n),a=zR(n),l=m.useRef(null),u=m.useRef(null),d=m.useRef(null),f=m.useRef(null),h=$e(t,f,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;m.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(_=>v[_]||v.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=l.current,v=f.current;if(y&&w&&v){const x=()=>{if(!i.isClosePausedRef.current){const N=new CustomEvent(Oh);v.dispatchEvent(N),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const N=new CustomEvent(Mh);v.dispatchEvent(N),i.isClosePausedRef.current=!1}},_=N=>{!w.contains(N.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",_),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,i.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:w})=>{const x=a().map(b=>{const _=b.ref.current,S=[_,...n$(_)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?x.reverse():x).flat()},[a]);return m.useEffect(()=>{const w=f.current;if(w){const v=x=>{var S,N,k;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const j=document.activeElement,T=x.shiftKey;if(x.target===w&&T){(S=u.current)==null||S.focus();return}const P=g({tabbingDirection:T?"backwards":"forwards"}),L=P.findIndex(C=>C===j);Yd(P.slice(L+1))?x.preventDefault():T?(N=u.current)==null||N.focus():(k=d.current)==null||k.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,g]),c.jsxs(TR,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&c.jsx(Lh,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});Yd(w)}}),c.jsx(Rm.Slot,{scope:n,children:c.jsx(we.ol,{tabIndex:-1,...o,ref:h})}),y&&c.jsx(Lh,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});Yd(w)}})]})});Y1.displayName=X1;var Z1="ToastFocusProxy",Lh=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=ku(Z1,n);return c.jsx(Tm,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const a=i.relatedTarget;!((u=o.viewport)!=null&&u.contains(a))&&r()}})});Lh.displayName=Z1;var Ia="Toast",WR="toast.swipeStart",HR="toast.swipeMove",KR="toast.swipeCancel",GR="toast.swipeEnd",J1=m.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...i}=e,[a,l]=zs({prop:r,defaultProp:s??!0,onChange:o,caller:Ia});return c.jsx(Pn,{present:n||a,children:c.jsx(YR,{open:a,...i,ref:t,onClose:()=>l(!1),onPause:Ut(e.onPause),onResume:Ut(e.onResume),onSwipeStart:me(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});J1.displayName=Ia;var[qR,XR]=G1(Ia,{onClose(){}}),YR=m.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p,...y}=e,g=ku(Ia,n),[w,v]=m.useState(null),x=$e(t,C=>v(C)),b=m.useRef(null),_=m.useRef(null),S=s||g.duration,N=m.useRef(0),k=m.useRef(S),j=m.useRef(0),{onToastAdd:T,onToastRemove:M}=g,F=Ut(()=>{var O;(w==null?void 0:w.contains(document.activeElement))&&((O=g.viewport)==null||O.focus()),i()}),P=m.useCallback(C=>{!C||C===1/0||(window.clearTimeout(j.current),N.current=new Date().getTime(),j.current=window.setTimeout(F,C))},[F]);m.useEffect(()=>{const C=g.viewport;if(C){const O=()=>{P(k.current),u==null||u()},V=()=>{const B=new Date().getTime()-N.current;k.current=k.current-B,window.clearTimeout(j.current),l==null||l()};return C.addEventListener(Oh,V),C.addEventListener(Mh,O),()=>{C.removeEventListener(Oh,V),C.removeEventListener(Mh,O)}}},[g.viewport,S,l,u,P]),m.useEffect(()=>{o&&!g.isClosePausedRef.current&&P(S)},[o,S,g.isClosePausedRef,P]),m.useEffect(()=>(T(),()=>M()),[T,M]);const L=m.useMemo(()=>w?o_(w):null,[w]);return g.viewport?c.jsxs(c.Fragment,{children:[L&&c.jsx(ZR,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),c.jsx(qR,{scope:n,onClose:F,children:Bn.createPortal(c.jsx(Rm.ItemSlot,{scope:n,children:c.jsx(NR,{asChild:!0,onEscapeKeyDown:me(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:me(e.onKeyDown,C=>{C.key==="Escape"&&(a==null||a(C.nativeEvent),C.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:me(e.onPointerDown,C=>{C.button===0&&(b.current={x:C.clientX,y:C.clientY})}),onPointerMove:me(e.onPointerMove,C=>{if(!b.current)return;const O=C.clientX-b.current.x,V=C.clientY-b.current.y,B=!!_.current,z=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,W=z?$(0,O):0,A=z?0:$(0,V),D=C.pointerType==="touch"?10:2,X={x:W,y:A},Y={originalEvent:C,delta:X};B?(_.current=X,_l(HR,f,Y,{discrete:!1})):H0(X,g.swipeDirection,D)?(_.current=X,_l(WR,d,Y,{discrete:!1}),C.target.setPointerCapture(C.pointerId)):(Math.abs(O)>D||Math.abs(V)>D)&&(b.current=null)}),onPointerUp:me(e.onPointerUp,C=>{const O=_.current,V=C.target;if(V.hasPointerCapture(C.pointerId)&&V.releasePointerCapture(C.pointerId),_.current=null,b.current=null,O){const B=C.currentTarget,z={originalEvent:C,delta:O};H0(O,g.swipeDirection,g.swipeThreshold)?_l(GR,p,z,{discrete:!0}):_l(KR,h,z,{discrete:!0}),B.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),ZR=e=>{const{__scopeToast:t,children:n,...r}=e,s=ku(Ia,t),[o,i]=m.useState(!1),[a,l]=m.useState(!1);return e$(()=>i(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:c.jsx(Eu,{asChild:!0,children:c.jsx(Tm,{...r,children:o&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},JR="ToastTitle",Q1=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return c.jsx(we.div,{...r,ref:t})});Q1.displayName=JR;var QR="ToastDescription",e_=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return c.jsx(we.div,{...r,ref:t})});e_.displayName=QR;var t_="ToastAction",n_=m.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?c.jsx(s_,{altText:n,asChild:!0,children:c.jsx($m,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${t_}\`. Expected non-empty \`string\`.`),null)});n_.displayName=t_;var r_="ToastClose",$m=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=XR(r_,n);return c.jsx(s_,{asChild:!0,children:c.jsx(we.button,{type:"button",...r,ref:t,onClick:me(e.onClick,s.onClose)})})});$m.displayName=r_;var s_=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return c.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function o_(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),t$(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...o_(r))}}),t}function _l(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Nm(s,o):s.dispatchEvent(o)}var H0=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function e$(e=()=>{}){const t=Ut(e);hn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function t$(e){return e.nodeType===e.ELEMENT_NODE}function n$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Yd(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var r$=q1,i_=Y1,a_=J1,l_=Q1,c_=e_,u_=n_,d_=$m;const K0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,G0=M1,Im=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return G0(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const h=K0(d)||K0(f);return s[u][h]}),a=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...o,...a}[g]):{...o,...a}[g]===w})?[...u,f,h]:u},[]);return G0(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};var s$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pe=(e,t)=>{const n=m.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:a,...l},u)=>m.createElement("svg",{ref:u,...s$,width:s,height:s,stroke:r,strokeWidth:i?Number(o)*24/Number(s):o,className:`lucide lucide-${o$(e)}`,...l},[...t.map(([d,f])=>m.createElement(d,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${e}`,n},f_=pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),i$=pe("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]]),ju=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),a$=pe("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),l$=pe("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),h_=pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Zd=pe("BookCopy",[["path",{d:"M2 16V4a2 2 0 0 1 2-2h11",key:"spzkk5"}],["path",{d:"M5 14H4a2 2 0 1 0 0 4h1",key:"16gqf9"}],["path",{d:"M22 18H11a2 2 0 1 0 0 4h11V6H11a2 2 0 0 0-2 2v12",key:"1owzki"}]]),Pu=pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),c$=pe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),u$=pe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),Fh=pe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Dm=pe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),d$=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),p_=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Om=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f$=pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),q0=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),m_=pe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),h$=pe("Columns",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"12",x2:"12",y1:"3",y2:"21",key:"1efggb"}]]),$s=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g_=pe("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),p$=pe("FileWarning",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m$=pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),v_=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Nu=pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),g$=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ae=pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Mm=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),X0=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),zh=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),v$=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),y_=pe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),x_=pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),y$=pe("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),x$=pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),w$=pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Lm=pe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),w_=pe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Da=pe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),b$=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_$=pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),C$=pe("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),Fm=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Uh=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),S$=pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),E$=pe("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Y0=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Is=pe("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),b_=pe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Z0=pe("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),Bh=pe("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),Vh=pe("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),k$=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),j$=pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),P$=pe("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),N$=pe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),ls=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),T$=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Tu=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Dc=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Oc=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Sn=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A$=r$,__=ce.forwardRef(({className:e,...t},n)=>c.jsx(i_,{ref:n,className:he("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));__.displayName=i_.displayName;const R$=Im("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),C_=ce.forwardRef(({className:e,variant:t,...n},r)=>c.jsx(a_,{ref:r,className:he(R$({variant:t}),e),...n}));C_.displayName=a_.displayName;const $$=ce.forwardRef(({className:e,...t},n)=>c.jsx(u_,{ref:n,className:he("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));$$.displayName=u_.displayName;const S_=ce.forwardRef(({className:e,...t},n)=>c.jsx(d_,{ref:n,className:he("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:c.jsx(Sn,{className:"h-4 w-4"})}));S_.displayName=d_.displayName;const E_=ce.forwardRef(({className:e,...t},n)=>c.jsx(l_,{ref:n,className:he("text-sm font-semibold",e),...t}));E_.displayName=l_.displayName;const k_=ce.forwardRef(({className:e,...t},n)=>c.jsx(c_,{ref:n,className:he("text-sm opacity-90",e),...t}));k_.displayName=c_.displayName;const I$=1;let Jd=0;function D$(){return Jd=(Jd+1)%Number.MAX_VALUE,Jd.toString()}const St={state:{toasts:[]},listeners:[],getState:()=>St.state,setState:e=>{typeof e=="function"?St.state=e(St.state):St.state={...St.state,...e},St.listeners.forEach(t=>t(St.state))},subscribe:e=>(St.listeners.push(e),()=>{St.listeners=St.listeners.filter(t=>t!==e)})},O$=({...e})=>{const t=D$(),n=s=>St.setState(o=>({...o,toasts:o.toasts.map(i=>i.id===t?{...i,...s}:i)})),r=()=>St.setState(s=>({...s,toasts:s.toasts.filter(o=>o.id!==t)}));return St.setState(s=>({...s,toasts:[{...e,id:t,dismiss:r},...s.toasts].slice(0,I$)})),{id:t,dismiss:r,update:n}};function at(){const[e,t]=m.useState(St.getState());return m.useEffect(()=>St.subscribe(r=>{t(r)}),[]),m.useEffect(()=>{const n=[];return e.toasts.forEach(r=>{if(r.duration===1/0)return;const s=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(s)}),()=>{n.forEach(r=>clearTimeout(r))}},[e.toasts]),{toast:O$,toasts:e.toasts}}function M$(){const{toasts:e}=at();return c.jsxs(A$,{children:[e.map(({id:t,title:n,description:r,action:s,...o})=>c.jsxs(C_,{...o,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(E_,{children:n}),r&&c.jsx(k_,{children:r})]}),s,c.jsx(S_,{})]},t)),c.jsx(__,{})]})}const j_=m.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Au=m.createContext({}),Ru=m.createContext(null),$u=typeof document<"u",zm=$u?m.useLayoutEffect:m.useEffect,P_=m.createContext({strict:!1}),Um=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),L$="framerAppearId",N_="data-"+Um(L$);function F$(e,t,n,r){const{visualElement:s}=m.useContext(Au),o=m.useContext(P_),i=m.useContext(Ru),a=m.useContext(j_).reducedMotion,l=m.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:s,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;m.useInsertionEffect(()=>{u&&u.update(n,i)});const d=m.useRef(!!(n[N_]&&!window.HandoffComplete));return zm(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),m.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function go(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function z$(e,t,n){return m.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):go(n)&&(n.current=r))},[t])}function ga(e){return typeof e=="string"||Array.isArray(e)}function Iu(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Bm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vm=["initial",...Bm];function Du(e){return Iu(e.animate)||Vm.some(t=>ga(e[t]))}function T_(e){return!!(Du(e)||e.variants)}function U$(e,t){if(Du(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ga(n)?n:void 0,animate:ga(r)?r:void 0}}return e.inherit!==!1?t:{}}function B$(e){const{initial:t,animate:n}=U$(e,m.useContext(Au));return m.useMemo(()=>({initial:t,animate:n}),[J0(t),J0(n)])}function J0(e){return Array.isArray(e)?e.join(" "):e}const Q0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},va={};for(const e in Q0)va[e]={isEnabled:t=>Q0[e].some(n=>!!t[n])};function V$(e){for(const t in e)va[t]={...va[t],...e[t]}}const Wm=m.createContext({}),A_=m.createContext({}),W$=Symbol.for("motionComponentSymbol");function H$({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&V$(e);function o(a,l){let u;const d={...m.useContext(j_),...a,layoutId:K$(a)},{isStatic:f}=d,h=B$(a),p=r(a,f);if(!f&&$u){h.visualElement=F$(s,p,d,t);const y=m.useContext(A_),g=m.useContext(P_).strict;h.visualElement&&(u=h.visualElement.loadFeatures(d,g,e,y))}return m.createElement(Au.Provider,{value:h},u&&h.visualElement?m.createElement(u,{visualElement:h.visualElement,...d}):null,n(s,a,z$(p,h.visualElement,l),p,f,h.visualElement))}const i=m.forwardRef(o);return i[W$]=s,i}function K$({layoutId:e}){const t=m.useContext(Wm).id;return t&&e!==void 0?t+"-"+e:e}function G$(e){function t(r,s={}){return H$(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const q$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hm(e){return typeof e!="string"||e.includes("-")?!1:!!(q$.indexOf(e)>-1||/[A-Z]/.test(e))}const Mc={};function X$(e){Object.assign(Mc,e)}const Oa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Us=new Set(Oa);function R_(e,{layout:t,layoutId:n}){return Us.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Mc[e]||e==="opacity")}const Bt=e=>!!(e&&e.getVelocity),Y$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z$=Oa.length;function J$(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let o="";for(let i=0;i<Z$;i++){const a=Oa[i];if(e[a]!==void 0){const l=Y$[a]||a;o+=`${l}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(e,r?"":o):n&&r&&(o="none"),o}const $_=e=>t=>typeof t=="string"&&t.startsWith(e),I_=$_("--"),Wh=$_("var(--"),Q$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,e5=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Qr=(e,t,n)=>Math.min(Math.max(n,e),t),Bs={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Bi={...Bs,transform:e=>Qr(0,1,e)},Cl={...Bs,default:1},Vi=e=>Math.round(e*1e5)/1e5,Ou=/(-)?([\d]*\.?[\d])+/g,D_=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,t5=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ma(e){return typeof e=="string"}const La=e=>({test:t=>Ma(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Sr=La("deg"),Fn=La("%"),xe=La("px"),n5=La("vh"),r5=La("vw"),ey={...Fn,parse:e=>Fn.parse(e)/100,transform:e=>Fn.transform(e*100)},ty={...Bs,transform:Math.round},O_={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,size:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,rotate:Sr,rotateX:Sr,rotateY:Sr,rotateZ:Sr,scale:Cl,scaleX:Cl,scaleY:Cl,scaleZ:Cl,skew:Sr,skewX:Sr,skewY:Sr,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:Bi,originX:ey,originY:ey,originZ:xe,zIndex:ty,fillOpacity:Bi,strokeOpacity:Bi,numOctaves:ty};function Km(e,t,n,r){const{style:s,vars:o,transform:i,transformOrigin:a}=e;let l=!1,u=!1,d=!0;for(const f in t){const h=t[f];if(I_(f)){o[f]=h;continue}const p=O_[f],y=e5(h,p);if(Us.has(f)){if(l=!0,i[f]=y,!d)continue;h!==(p.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,a[f]=y):s[f]=y}if(t.transform||(l||r?s.transform=J$(e.transform,n,d,r):s.transform&&(s.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=a;s.transformOrigin=`${f} ${h} ${p}`}}const Gm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function M_(e,t,n){for(const r in t)!Bt(t[r])&&!R_(r,n)&&(e[r]=t[r])}function s5({transformTemplate:e},t,n){return m.useMemo(()=>{const r=Gm();return Km(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function o5(e,t,n){const r=e.style||{},s={};return M_(s,r,e),Object.assign(s,s5(e,t,n)),e.transformValues?e.transformValues(s):s}function i5(e,t,n){const r={},s=o5(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const a5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||a5.has(e)}let L_=e=>!Lc(e);function l5(e){e&&(L_=t=>t.startsWith("on")?!Lc(t):e(t))}try{l5(require("@emotion/is-prop-valid").default)}catch{}function c5(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(L_(s)||n===!0&&Lc(s)||!t&&!Lc(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function ny(e,t,n){return typeof e=="string"?e:xe.transform(t+n*e)}function u5(e,t,n){const r=ny(t,e.x,e.width),s=ny(n,e.y,e.height);return`${r} ${s}`}const d5={offset:"stroke-dashoffset",array:"stroke-dasharray"},f5={offset:"strokeDashoffset",array:"strokeDasharray"};function h5(e,t,n=1,r=0,s=!0){e.pathLength=1;const o=s?d5:f5;e[o.offset]=xe.transform(-r);const i=xe.transform(t),a=xe.transform(n);e[o.array]=`${i} ${a}`}function qm(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:o,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...u},d,f,h){if(Km(e,u,d,h),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:y,dimensions:g}=e;p.transform&&(g&&(y.transform=p.transform),delete p.transform),g&&(s!==void 0||o!==void 0||y.transform)&&(y.transformOrigin=u5(g,s!==void 0?s:.5,o!==void 0?o:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&h5(p,i,a,l,!1)}const F_=()=>({...Gm(),attrs:{}}),Xm=e=>typeof e=="string"&&e.toLowerCase()==="svg";function p5(e,t,n,r){const s=m.useMemo(()=>{const o=F_();return qm(o,t,{enableHardwareAcceleration:!1},Xm(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};M_(o,e.style,e),s.style={...o,...s.style}}return s}function m5(e=!1){return(n,r,s,{latestValues:o},i)=>{const l=(Hm(n)?p5:i5)(r,o,i,n),d={...c5(r,typeof n=="string",e),...l,ref:s},{children:f}=r,h=m.useMemo(()=>Bt(f)?f.get():f,[f]);return m.createElement(n,{...d,children:h})}}function z_(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const U_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function B_(e,t,n,r){z_(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(U_.has(s)?s:Um(s),t.attrs[s])}function Ym(e,t){const{style:n}=e,r={};for(const s in n)(Bt(n[s])||t.style&&Bt(t.style[s])||R_(s,e))&&(r[s]=n[s]);return r}function V_(e,t){const n=Ym(e,t);for(const r in e)if(Bt(e[r])||Bt(t[r])){const s=Oa.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function Zm(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function W_(e){const t=m.useRef(null);return t.current===null&&(t.current=e()),t.current}const Fc=e=>Array.isArray(e),g5=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),v5=e=>Fc(e)?e[e.length-1]||0:e;function tc(e){const t=Bt(e)?e.get():e;return g5(t)?t.toValue():t}function y5({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,o){const i={latestValues:x5(r,s,o,e),renderState:t()};return n&&(i.mount=a=>n(r,a,i)),i}const H_=e=>(t,n)=>{const r=m.useContext(Au),s=m.useContext(Ru),o=()=>y5(e,t,r,s);return n?o():W_(o)};function x5(e,t,n,r){const s={},o=r(e,{});for(const h in o)s[h]=tc(o[h]);let{initial:i,animate:a}=e;const l=Du(e),u=T_(e);t&&u&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const f=d?a:i;return f&&typeof f!="boolean"&&!Iu(f)&&(Array.isArray(f)?f:[f]).forEach(p=>{const y=Zm(e,p);if(!y)return;const{transitionEnd:g,transition:w,...v}=y;for(const x in v){let b=v[x];if(Array.isArray(b)){const _=d?b.length-1:0;b=b[_]}b!==null&&(s[x]=b)}for(const x in g)s[x]=g[x]}),s}const Qe=e=>e;class ry{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function w5(e){let t=new ry,n=new ry,r=0,s=!1,o=!1;const i=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const f=d&&s,h=f?t:n;return u&&i.add(l),h.add(l)&&f&&s&&(r=t.order.length),l},cancel:l=>{n.remove(l),i.delete(l)},process:l=>{if(s){o=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const d=t.order[u];d(l),i.has(d)&&(a.schedule(d),e())}s=!1,o&&(o=!1,a.process(l))}};return a}const Sl=["prepare","read","update","preRender","render","postRender"],b5=40;function _5(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=Sl.reduce((f,h)=>(f[h]=w5(()=>n=!0),f),{}),i=f=>o[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,b5),1),s.timestamp=f,s.isProcessing=!0,Sl.forEach(i),s.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:Sl.reduce((f,h)=>{const p=o[h];return f[h]=(y,g=!1,w=!1)=>(n||l(),p.schedule(y,g,w)),f},{}),cancel:f=>Sl.forEach(h=>o[h].cancel(f)),state:s,steps:o}}const{schedule:Fe,cancel:lr,state:vt,steps:Qd}=_5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qe,!0),C5={useVisualState:H_({scrapeMotionValuesFromProps:V_,createRenderState:F_,onMount:(e,t,{renderState:n,latestValues:r})=>{Fe.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Fe.render(()=>{qm(n,r,{enableHardwareAcceleration:!1},Xm(t.tagName),e.transformTemplate),B_(t,n)})}})},S5={useVisualState:H_({scrapeMotionValuesFromProps:Ym,createRenderState:Gm})};function E5(e,{forwardMotionProps:t=!1},n,r){return{...Hm(e)?C5:S5,preloadedFeatures:n,useRender:m5(t),createVisualElement:r,Component:e}}function Qn(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const K_=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Mu(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const k5=e=>t=>K_(t)&&e(t,Mu(t));function tr(e,t,n,r){return Qn(e,t,k5(n),r)}const j5=(e,t)=>n=>t(e(n)),qr=(...e)=>e.reduce(j5);function G_(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const sy=G_("dragHorizontal"),oy=G_("dragVertical");function q_(e){let t=!1;if(e==="y")t=oy();else if(e==="x")t=sy();else{const n=sy(),r=oy();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function X_(){const e=q_(!0);return e?(e(),!1):!0}class cs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function iy(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(o,i)=>{if(o.pointerType==="touch"||X_())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&Fe.update(()=>a[r](o,i))};return tr(e.current,n,s,{passive:!e.getProps()[r]})}class P5 extends cs{mount(){this.unmount=qr(iy(this.node,!0),iy(this.node,!1))}unmount(){}}class N5 extends cs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qr(Qn(this.node.current,"focus",()=>this.onFocus()),Qn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Y_=(e,t)=>t?e===t?!0:Y_(e,t.parentElement):!1;function ef(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Mu(n))}class T5 extends cs{constructor(){super(...arguments),this.removeStartListeners=Qe,this.removeEndListeners=Qe,this.removeAccessibleListeners=Qe,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=tr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Fe.update(()=>{!f&&!Y_(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),i=tr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=qr(o,i),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const i=a=>{a.key!=="Enter"||!this.checkPressEnd()||ef("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&Fe.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=Qn(this.node.current,"keyup",i),ef("down",(a,l)=>{this.startPress(a,l)})},n=Qn(this.node.current,"keydown",t),r=()=>{this.isPressing&&ef("cancel",(o,i)=>this.cancelPress(o,i))},s=Qn(this.node.current,"blur",r);this.removeAccessibleListeners=qr(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Fe.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!X_()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Fe.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=tr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Qn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Hh=new WeakMap,tf=new WeakMap,A5=e=>{const t=Hh.get(e.target);t&&t(e)},R5=e=>{e.forEach(A5)};function $5({root:e,...t}){const n=e||document;tf.has(n)||tf.set(n,{});const r=tf.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(R5,{root:e,...t})),r[s]}function I5(e,t,n){const r=$5(t);return Hh.set(e,n),r.observe(e),()=>{Hh.delete(e),r.unobserve(e)}}const D5={some:0,all:1};class O5 extends cs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:D5[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(l)};return I5(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(M5(t,n))&&this.startObserver()}unmount(){}}function M5({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const L5={inView:{Feature:O5},tap:{Feature:T5},focus:{Feature:N5},hover:{Feature:P5}};function Z_(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function F5(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function z5(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Lu(e,t,n){const r=e.getProps();return Zm(r,t,n!==void 0?n:r.custom,F5(e),z5(e))}let U5=Qe,Jm=Qe;const Xr=e=>e*1e3,nr=e=>e/1e3,B5={current:!1},J_=e=>Array.isArray(e)&&typeof e[0]=="number";function Q_(e){return!!(!e||typeof e=="string"&&eC[e]||J_(e)||Array.isArray(e)&&e.every(Q_))}const Ti=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,eC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ti([0,.65,.55,1]),circOut:Ti([.55,0,1,.45]),backIn:Ti([.31,.01,.66,-.59]),backOut:Ti([.33,1.53,.69,.99])};function tC(e){if(e)return J_(e)?Ti(e):Array.isArray(e)?e.map(tC):eC[e]}function V5(e,t,n,{delay:r=0,duration:s,repeat:o=0,repeatType:i="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const d=tC(a);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}function W5(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const nC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,H5=1e-7,K5=12;function G5(e,t,n,r,s){let o,i,a=0;do i=t+(n-t)/2,o=nC(i,r,s)-e,o>0?n=i:t=i;while(Math.abs(o)>H5&&++a<K5);return i}function Fa(e,t,n,r){if(e===t&&n===r)return Qe;const s=o=>G5(o,0,1,e,n);return o=>o===0||o===1?o:nC(s(o),t,r)}const q5=Fa(.42,0,1,1),X5=Fa(0,0,.58,1),rC=Fa(.42,0,.58,1),Y5=e=>Array.isArray(e)&&typeof e[0]!="number",sC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,oC=e=>t=>1-e(1-t),Qm=e=>1-Math.sin(Math.acos(e)),iC=oC(Qm),Z5=sC(Qm),aC=Fa(.33,1.53,.69,.99),eg=oC(aC),J5=sC(eg),Q5=e=>(e*=2)<1?.5*eg(e):.5*(2-Math.pow(2,-10*(e-1))),e3={linear:Qe,easeIn:q5,easeInOut:rC,easeOut:X5,circIn:Qm,circInOut:Z5,circOut:iC,backIn:eg,backInOut:J5,backOut:aC,anticipate:Q5},ay=e=>{if(Array.isArray(e)){Jm(e.length===4);const[t,n,r,s]=e;return Fa(t,n,r,s)}else if(typeof e=="string")return e3[e];return e},tg=(e,t)=>n=>!!(Ma(n)&&t5.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),lC=(e,t,n)=>r=>{if(!Ma(r))return r;const[s,o,i,a]=r.match(Ou);return{[e]:parseFloat(s),[t]:parseFloat(o),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},t3=e=>Qr(0,255,e),nf={...Bs,transform:e=>Math.round(t3(e))},Ss={test:tg("rgb","red"),parse:lC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+nf.transform(e)+", "+nf.transform(t)+", "+nf.transform(n)+", "+Vi(Bi.transform(r))+")"};function n3(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Kh={test:tg("#"),parse:n3,transform:Ss.transform},vo={test:tg("hsl","hue"),parse:lC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Fn.transform(Vi(t))+", "+Fn.transform(Vi(n))+", "+Vi(Bi.transform(r))+")"},Et={test:e=>Ss.test(e)||Kh.test(e)||vo.test(e),parse:e=>Ss.test(e)?Ss.parse(e):vo.test(e)?vo.parse(e):Kh.parse(e),transform:e=>Ma(e)?e:e.hasOwnProperty("red")?Ss.transform(e):vo.transform(e)},qe=(e,t,n)=>-n*e+n*t+e;function rf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function r3({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,o=0,i=0;if(!t)s=o=i=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=rf(l,a,e+1/3),o=rf(l,a,e),i=rf(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}const sf=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},s3=[Kh,Ss,vo],o3=e=>s3.find(t=>t.test(e));function ly(e){const t=o3(e);let n=t.parse(e);return t===vo&&(n=r3(n)),n}const cC=(e,t)=>{const n=ly(e),r=ly(t),s={...n};return o=>(s.red=sf(n.red,r.red,o),s.green=sf(n.green,r.green,o),s.blue=sf(n.blue,r.blue,o),s.alpha=qe(n.alpha,r.alpha,o),Ss.transform(s))};function i3(e){var t,n;return isNaN(e)&&Ma(e)&&(((t=e.match(Ou))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(D_))===null||n===void 0?void 0:n.length)||0)>0}const uC={regex:Q$,countKey:"Vars",token:"${v}",parse:Qe},dC={regex:D_,countKey:"Colors",token:"${c}",parse:Et.parse},fC={regex:Ou,countKey:"Numbers",token:"${n}",parse:Bs.parse};function of(e,{regex:t,countKey:n,token:r,parse:s}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(s)))}function zc(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&of(n,uC),of(n,dC),of(n,fC),n}function hC(e){return zc(e).values}function pC(e){const{values:t,numColors:n,numVars:r,tokenised:s}=zc(e),o=t.length;return i=>{let a=s;for(let l=0;l<o;l++)l<r?a=a.replace(uC.token,i[l]):l<r+n?a=a.replace(dC.token,Et.transform(i[l])):a=a.replace(fC.token,Vi(i[l]));return a}}const a3=e=>typeof e=="number"?0:e;function l3(e){const t=hC(e);return pC(e)(t.map(a3))}const es={test:i3,parse:hC,createTransformer:pC,getAnimatableNone:l3},mC=(e,t)=>n=>`${n>0?t:e}`;function gC(e,t){return typeof e=="number"?n=>qe(e,t,n):Et.test(e)?cC(e,t):e.startsWith("var(")?mC(e,t):yC(e,t)}const vC=(e,t)=>{const n=[...e],r=n.length,s=e.map((o,i)=>gC(o,t[i]));return o=>{for(let i=0;i<r;i++)n[i]=s[i](o);return n}},c3=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=gC(e[s],t[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}},yC=(e,t)=>{const n=es.createTransformer(t),r=zc(e),s=zc(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?qr(vC(r.values,s.values),n):mC(e,t)},ya=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},cy=(e,t)=>n=>qe(e,t,n);function u3(e){return typeof e=="number"?cy:typeof e=="string"?Et.test(e)?cC:yC:Array.isArray(e)?vC:typeof e=="object"?c3:cy}function d3(e,t,n){const r=[],s=n||u3(e[0]),o=e.length-1;for(let i=0;i<o;i++){let a=s(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||Qe:t;a=qr(l,a)}r.push(a)}return r}function xC(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const o=e.length;if(Jm(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=d3(t,r,s),a=i.length,l=u=>{let d=0;if(a>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=ya(e[d],e[d+1],u);return i[d](f)};return n?u=>l(Qr(e[0],e[o-1],u)):l}function f3(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=ya(0,t,r);e.push(qe(n,1,s))}}function h3(e){const t=[0];return f3(t,e.length-1),t}function p3(e,t){return e.map(n=>n*t)}function m3(e,t){return e.map(()=>t||rC).splice(0,e.length-1)}function Uc({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Y5(r)?r.map(ay):ay(r),o={done:!1,value:t[0]},i=p3(n&&n.length===t.length?n:h3(t),e),a=xC(i,t,{ease:Array.isArray(s)?s:m3(t,s)});return{calculatedDuration:e,next:l=>(o.value=a(l),o.done=l>=e,o)}}function wC(e,t){return t?e*(1e3/t):0}const g3=5;function bC(e,t,n){const r=Math.max(t-g3,0);return wC(n-e(r),t-r)}const af=.001,v3=.01,uy=10,y3=.05,x3=1;function w3({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,o;U5(e<=Xr(uy));let i=1-t;i=Qr(y3,x3,i),e=Qr(v3,uy,nr(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-n,p=Gh(u,i),y=Math.exp(-f);return af-h/p*y},o=u=>{const f=u*i*e,h=f*n+n,p=Math.pow(i,2)*Math.pow(u,2)*e,y=Math.exp(-f),g=Gh(Math.pow(u,2),i);return(-s(u)+af>0?-1:1)*((h-p)*y)/g}):(s=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-af+d*f},o=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const a=5/e,l=_3(s,o,a);if(e=Xr(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:e}}}const b3=12;function _3(e,t,n){let r=n;for(let s=1;s<b3;s++)r=r-e(r)/t(r);return r}function Gh(e,t){return e*Math.sqrt(1-t*t)}const C3=["duration","bounce"],S3=["stiffness","damping","mass"];function dy(e,t){return t.some(n=>e[n]!==void 0)}function E3(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!dy(e,S3)&&dy(e,C3)){const n=w3(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function _C({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],o=e[e.length-1],i={done:!1,value:s},{stiffness:a,damping:l,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=E3({...r,velocity:-nr(r.velocity||0)}),p=f||0,y=l/(2*Math.sqrt(a*u)),g=o-s,w=nr(Math.sqrt(a/u)),v=Math.abs(g)<5;n||(n=v?.01:2),t||(t=v?.005:.5);let x;if(y<1){const b=Gh(w,y);x=_=>{const S=Math.exp(-y*w*_);return o-S*((p+y*w*g)/b*Math.sin(b*_)+g*Math.cos(b*_))}}else if(y===1)x=b=>o-Math.exp(-w*b)*(g+(p+w*g)*b);else{const b=w*Math.sqrt(y*y-1);x=_=>{const S=Math.exp(-y*w*_),N=Math.min(b*_,300);return o-S*((p+y*w*g)*Math.sinh(N)+b*g*Math.cosh(N))/b}}return{calculatedDuration:h&&d||null,next:b=>{const _=x(b);if(h)i.done=b>=d;else{let S=p;b!==0&&(y<1?S=bC(x,b,_):S=0);const N=Math.abs(S)<=n,k=Math.abs(o-_)<=t;i.done=N&&k}return i.value=i.done?o:_,i}}}function fy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:i,min:a,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},p=j=>a!==void 0&&j<a||l!==void 0&&j>l,y=j=>a===void 0?l:l===void 0||Math.abs(a-j)<Math.abs(l-j)?a:l;let g=n*t;const w=f+g,v=i===void 0?w:i(w);v!==w&&(g=v-f);const x=j=>-g*Math.exp(-j/r),b=j=>v+x(j),_=j=>{const T=x(j),M=b(j);h.done=Math.abs(T)<=u,h.value=h.done?v:M};let S,N;const k=j=>{p(h.value)&&(S=j,N=_C({keyframes:[h.value,y(h.value)],velocity:bC(b,j,h.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:j=>{let T=!1;return!N&&S===void 0&&(T=!0,_(j),k(j)),S!==void 0&&j>S?N.next(j-S):(!T&&_(j),h)}}}const k3=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Fe.update(t,!0),stop:()=>lr(t),now:()=>vt.isProcessing?vt.timestamp:performance.now()}},hy=2e4;function py(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<hy;)t+=n,r=e.next(t);return t>=hy?1/0:t}const j3={decay:fy,inertia:fy,tween:Uc,keyframes:Uc,spring:_C};function Bc({autoplay:e=!0,delay:t=0,driver:n=k3,keyframes:r,type:s="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:f,...h}){let p=1,y=!1,g,w;const v=()=>{w=new Promise(A=>{g=A})};v();let x;const b=j3[s]||Uc;let _;b!==Uc&&typeof r[0]!="number"&&(_=xC([0,100],r,{clamp:!1}),r=[0,100]);const S=b({...h,keyframes:r});let N;a==="mirror"&&(N=b({...h,keyframes:[...r].reverse(),velocity:-(h.velocity||0)}));let k="idle",j=null,T=null,M=null;S.calculatedDuration===null&&o&&(S.calculatedDuration=py(S));const{calculatedDuration:F}=S;let P=1/0,L=1/0;F!==null&&(P=F+i,L=P*(o+1)-i);let C=0;const O=A=>{if(T===null)return;p>0&&(T=Math.min(T,A)),p<0&&(T=Math.min(A-L/p,T)),j!==null?C=j:C=Math.round(A-T)*p;const D=C-t*(p>=0?1:-1),X=p>=0?D<0:D>L;C=Math.max(D,0),k==="finished"&&j===null&&(C=L);let Y=C,H=S;if(o){const ae=Math.min(C,L)/P;let le=Math.floor(ae),ue=ae%1;!ue&&ae>=1&&(ue=1),ue===1&&le--,le=Math.min(le,o+1),!!(le%2)&&(a==="reverse"?(ue=1-ue,i&&(ue-=i/P)):a==="mirror"&&(H=N)),Y=Qr(0,1,ue)*P}const Z=X?{done:!1,value:r[0]}:H.next(Y);_&&(Z.value=_(Z.value));let{done:J}=Z;!X&&F!==null&&(J=p>=0?C>=L:C<=0);const re=j===null&&(k==="finished"||k==="running"&&J);return f&&f(Z.value),re&&z(),Z},V=()=>{x&&x.stop(),x=void 0},B=()=>{k="idle",V(),g(),v(),T=M=null},z=()=>{k="finished",d&&d(),V(),g()},$=()=>{if(y)return;x||(x=n(O));const A=x.now();l&&l(),j!==null?T=A-j:(!T||k==="finished")&&(T=A),k==="finished"&&v(),M=T,j=null,k="running",x.start()};e&&$();const W={then(A,D){return w.then(A,D)},get time(){return nr(C)},set time(A){A=Xr(A),C=A,j!==null||!x||p===0?j=A:T=x.now()-A/p},get duration(){const A=S.calculatedDuration===null?py(S):S.calculatedDuration;return nr(A)},get speed(){return p},set speed(A){A===p||!x||(p=A,W.time=nr(C))},get state(){return k},play:$,pause:()=>{k="paused",j=C},stop:()=>{y=!0,k!=="idle"&&(k="idle",u&&u(),B())},cancel:()=>{M!==null&&O(M),B()},complete:()=>{k="finished"},sample:A=>(T=0,O(A))};return W}function P3(e){let t;return()=>(t===void 0&&(t=e()),t)}const N3=P3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),T3=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),El=10,A3=2e4,R3=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Q_(t.ease);function $3(e,t,{onUpdate:n,onComplete:r,...s}){if(!(N3()&&T3.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let i=!1,a,l,u=!1;const d=()=>{l=new Promise(b=>{a=b})};d();let{keyframes:f,duration:h=300,ease:p,times:y}=s;if(R3(t,s)){const b=Bc({...s,repeat:0,delay:0});let _={done:!1,value:f[0]};const S=[];let N=0;for(;!_.done&&N<A3;)_=b.sample(N),S.push(_.value),N+=El;y=void 0,f=S,h=N-El,p="linear"}const g=V5(e.owner.current,t,f,{...s,duration:h,ease:p,times:y}),w=()=>{u=!1,g.cancel()},v=()=>{u=!0,Fe.update(w),a(),d()};return g.onfinish=()=>{u||(e.set(W5(f,s)),r&&r(),v())},{then(b,_){return l.then(b,_)},attachTimeline(b){return g.timeline=b,g.onfinish=null,Qe},get time(){return nr(g.currentTime||0)},set time(b){g.currentTime=Xr(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return nr(h)},play:()=>{i||(g.play(),lr(w))},pause:()=>g.pause(),stop:()=>{if(i=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const _=Bc({...s,autoplay:!1});e.setWithVelocity(_.sample(b-El).value,_.sample(b).value,El)}v()},complete:()=>{u||g.finish()},cancel:v}}function I3({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Qe,pause:Qe,stop:Qe,then:o=>(o(),Promise.resolve()),cancel:Qe,complete:Qe});return t?Bc({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const D3={type:"spring",stiffness:500,damping:25,restSpeed:10},O3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),M3={type:"keyframes",duration:.8},L3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},F3=(e,{keyframes:t})=>t.length>2?M3:Us.has(e)?e.startsWith("scale")?O3(t[1]):D3:L3,qh=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(es.test(t)||t==="0")&&!t.startsWith("url(")),z3=new Set(["brightness","contrast","saturate","opacity"]);function U3(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ou)||[];if(!r)return e;const s=n.replace(r,"");let o=z3.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+s+")"}const B3=/([a-z-]*)\(.*?\)/g,Xh={...es,getAnimatableNone:e=>{const t=e.match(B3);return t?t.map(U3).join(" "):e}},V3={...O_,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:Xh,WebkitFilter:Xh},ng=e=>V3[e];function CC(e,t){let n=ng(e);return n!==Xh&&(n=es),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const SC=e=>/^0[^.\s]+$/.test(e);function W3(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||SC(e)}function H3(e,t,n,r){const s=qh(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const i=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?i:o[u-1]),W3(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];o[d]=CC(t,a)}return o}function K3({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:i,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function rg(e,t){return e[t]||e.default||e}const G3={skipAnimations:!1},sg=(e,t,n,r={})=>s=>{const o=rg(r,e)||{},i=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Xr(i);const l=H3(t,e,n,o),u=l[0],d=l[l.length-1],f=qh(e,u),h=qh(e,d);let p={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:y=>{t.set(y),o.onUpdate&&o.onUpdate(y)},onComplete:()=>{s(),o.onComplete&&o.onComplete()}};if(K3(o)||(p={...p,...F3(e,p)}),p.duration&&(p.duration=Xr(p.duration)),p.repeatDelay&&(p.repeatDelay=Xr(p.repeatDelay)),!f||!h||B5.current||o.type===!1||G3.skipAnimations)return I3(p);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const y=$3(t,e,p);if(y)return y}return Bc(p)};function Vc(e){return!!(Bt(e)&&e.add)}const EC=e=>/^\-?\d*\.?\d+$/.test(e);function og(e,t){e.indexOf(t)===-1&&e.push(t)}function ig(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ag{constructor(){this.subscriptions=[]}add(t){return og(this.subscriptions,t),()=>ig(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let o=0;o<s;o++){const i=this.subscriptions[o];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const q3=e=>!isNaN(parseFloat(e));class X3{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:i}=vt;this.lastUpdated!==i&&(this.timeDelta=o,this.lastUpdated=i,Fe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Fe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=q3(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ag);const r=this.events[t].add(n);return t==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?wC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zo(e,t){return new X3(e,t)}const kC=e=>t=>t.test(e),Y3={test:e=>e==="auto",parse:e=>e},jC=[Bs,xe,Fn,Sr,r5,n5,Y3],Ci=e=>jC.find(kC(e)),Z3=[...jC,Et,es],J3=e=>Z3.find(kC(e));function Q3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,zo(n))}function eI(e,t){const n=Lu(e,t);let{transitionEnd:r={},transition:s={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const i in o){const a=v5(o[i]);Q3(e,i,a)}}function tI(e,t,n){var r,s;const o=Object.keys(t).filter(a=>!e.hasValue(a)),i=o.length;if(i)for(let a=0;a<i;a++){const l=o[a],u=t[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&s!==void 0?s:t[l]),d!=null&&(typeof d=="string"&&(EC(d)||SC(d))?d=parseFloat(d):!J3(d)&&es.test(u)&&(d=CC(l,u)),e.addValue(l,zo(d,{owner:e})),n[l]===void 0&&(n[l]=d),d!==null&&e.setBaseTarget(l,d))}}function nI(e,t){return t?(t[e]||t.default||t).from:void 0}function rI(e,t,n){const r={};for(const s in e){const o=nI(s,t);if(o!==void 0)r[s]=o;else{const i=n.getValue(s);i&&(r[s]=i.get())}}return r}function sI({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function oI(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function PC(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in a){const h=e.getValue(f),p=a[f];if(!h||p===void 0||d&&sI(d,f))continue;const y={delay:n,elapsed:0,...rg(o||{},f)};if(window.HandoffAppearAnimations){const v=e.getProps()[N_];if(v){const x=window.HandoffAppearAnimations(v,f,h,Fe);x!==null&&(y.elapsed=x,y.isHandoff=!0)}}let g=!y.isHandoff&&!oI(h,p);if(y.type==="spring"&&(h.getVelocity()||y.velocity)&&(g=!1),h.animation&&(g=!1),g)continue;h.start(sg(f,h,p,e.shouldReduceMotion&&Us.has(f)?{type:!1}:y));const w=h.animation;Vc(l)&&(l.add(f),w.then(()=>l.remove(f))),u.push(w)}return i&&Promise.all(u).then(()=>{i&&eI(e,i)}),u}function Yh(e,t,n={}){const r=Lu(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(PC(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return iI(e,t,u+l,d,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[o,i]:[i,o];return l().then(()=>u())}else return Promise.all([o(),i(n.delay)])}function iI(e,t,n=0,r=0,s=1,o){const i=[],a=(e.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(aI).forEach((u,d)=>{u.notify("AnimationStart",t),i.push(Yh(u,t,{...o,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(i)}function aI(e,t){return e.sortNodePosition(t)}function lI(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(o=>Yh(e,o,n));r=Promise.all(s)}else if(typeof t=="string")r=Yh(e,t,n);else{const s=typeof t=="function"?Lu(e,t,n.custom):t;r=Promise.all(PC(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const cI=[...Bm].reverse(),uI=Bm.length;function dI(e){return t=>Promise.all(t.map(({animation:n,options:r})=>lI(e,n,r)))}function fI(e){let t=dI(e);const n=pI();let r=!0;const s=(l,u)=>{const d=Lu(e,u);if(d){const{transition:f,transitionEnd:h,...p}=d;l={...l,...p,...h}}return l};function o(l){t=l(e)}function i(l,u){const d=e.getProps(),f=e.getVariantContext(!0)||{},h=[],p=new Set;let y={},g=1/0;for(let v=0;v<uI;v++){const x=cI[v],b=n[x],_=d[x]!==void 0?d[x]:f[x],S=ga(_),N=x===u?b.isActive:null;N===!1&&(g=v);let k=_===f[x]&&_!==d[x]&&S;if(k&&r&&e.manuallyAnimateOnMount&&(k=!1),b.protectedKeys={...y},!b.isActive&&N===null||!_&&!b.prevProp||Iu(_)||typeof _=="boolean")continue;let T=hI(b.prevProp,_)||x===u&&b.isActive&&!k&&S||v>g&&S,M=!1;const F=Array.isArray(_)?_:[_];let P=F.reduce(s,{});N===!1&&(P={});const{prevResolvedValues:L={}}=b,C={...L,...P},O=V=>{T=!0,p.has(V)&&(M=!0,p.delete(V)),b.needsAnimating[V]=!0};for(const V in C){const B=P[V],z=L[V];if(y.hasOwnProperty(V))continue;let $=!1;Fc(B)&&Fc(z)?$=!Z_(B,z):$=B!==z,$?B!==void 0?O(V):p.add(V):B!==void 0&&p.has(V)?O(V):b.protectedKeys[V]=!0}b.prevProp=_,b.prevResolvedValues=P,b.isActive&&(y={...y,...P}),r&&e.blockInitialAnimation&&(T=!1),T&&(!k||M)&&h.push(...F.map(V=>({animation:V,options:{type:x,...l}})))}if(p.size){const v={};p.forEach(x=>{const b=e.getBaseTarget(x);b!==void 0&&(v[x]=b)}),h.push({animation:v})}let w=!!h.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(h):Promise.resolve()}function a(l,u,d){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(p=>{var y;return(y=p.animationState)===null||y===void 0?void 0:y.setActive(l,u)}),n[l].isActive=u;const h=i(d,l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:i,setActive:a,setAnimateFunction:o,getState:()=>n}}function hI(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Z_(t,e):!1}function ds(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pI(){return{animate:ds(!0),whileInView:ds(),whileHover:ds(),whileTap:ds(),whileDrag:ds(),whileFocus:ds(),exit:ds()}}class mI extends cs{constructor(t){super(t),t.animationState||(t.animationState=fI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Iu(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let gI=0;class vI extends cs{constructor(){super(...arguments),this.id=gI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const yI={animation:{Feature:mI},exit:{Feature:vI}},my=(e,t)=>Math.abs(e-t);function xI(e,t){const n=my(e.x,t.x),r=my(e.y,t.y);return Math.sqrt(n**2+r**2)}class NC{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=cf(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=xI(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:y}=f,{timestamp:g}=vt;this.history.push({...y,timestamp:g});const{onStart:w,onMove:v}=this.handlers;h||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=lf(h,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=cf(f.type==="pointercancel"?this.lastMoveEventInfo:lf(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,w),y&&y(f,w)},!K_(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const i=Mu(t),a=lf(i,this.transformPagePoint),{point:l}=a,{timestamp:u}=vt;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,cf(a,this.history)),this.removeListeners=qr(tr(this.contextWindow,"pointermove",this.handlePointerMove),tr(this.contextWindow,"pointerup",this.handlePointerUp),tr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function lf(e,t){return t?{point:t(e.point)}:e}function gy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function cf({point:e},t){return{point:e,delta:gy(e,TC(t)),offset:gy(e,wI(t)),velocity:bI(t,.1)}}function wI(e){return e[0]}function TC(e){return e[e.length-1]}function bI(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=TC(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Xr(t)));)n--;if(!r)return{x:0,y:0};const o=nr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Jt(e){return e.max-e.min}function Zh(e,t=0,n=.01){return Math.abs(e-t)<=n}function vy(e,t,n,r=.5){e.origin=r,e.originPoint=qe(t.min,t.max,e.origin),e.scale=Jt(n)/Jt(t),(Zh(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=qe(n.min,n.max,e.origin)-e.originPoint,(Zh(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Wi(e,t,n,r){vy(e.x,t.x,n.x,r?r.originX:void 0),vy(e.y,t.y,n.y,r?r.originY:void 0)}function yy(e,t,n){e.min=n.min+t.min,e.max=e.min+Jt(t)}function _I(e,t,n){yy(e.x,t.x,n.x),yy(e.y,t.y,n.y)}function xy(e,t,n){e.min=t.min-n.min,e.max=e.min+Jt(t)}function Hi(e,t,n){xy(e.x,t.x,n.x),xy(e.y,t.y,n.y)}function CI(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?qe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?qe(n,e,r.max):Math.min(e,n)),e}function wy(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function SI(e,{top:t,left:n,bottom:r,right:s}){return{x:wy(e.x,n,s),y:wy(e.y,t,r)}}function by(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function EI(e,t){return{x:by(e.x,t.x),y:by(e.y,t.y)}}function kI(e,t){let n=.5;const r=Jt(e),s=Jt(t);return s>r?n=ya(t.min,t.max-r,e.min):r>s&&(n=ya(e.min,e.max-s,t.min)),Qr(0,1,n)}function jI(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Jh=.35;function PI(e=Jh){return e===!1?e=0:e===!0&&(e=Jh),{x:_y(e,"left","right"),y:_y(e,"top","bottom")}}function _y(e,t,n){return{min:Cy(e,t),max:Cy(e,n)}}function Cy(e,t){return typeof e=="number"?e:e[t]||0}const Sy=()=>({translate:0,scale:1,origin:0,originPoint:0}),yo=()=>({x:Sy(),y:Sy()}),Ey=()=>({min:0,max:0}),rt=()=>({x:Ey(),y:Ey()});function sn(e){return[e("x"),e("y")]}function AC({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function NI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function TI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function uf(e){return e===void 0||e===1}function Qh({scale:e,scaleX:t,scaleY:n}){return!uf(e)||!uf(t)||!uf(n)}function ms(e){return Qh(e)||RC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function RC(e){return ky(e.x)||ky(e.y)}function ky(e){return e&&e!=="0%"}function Wc(e,t,n){const r=e-n,s=t*r;return n+s}function jy(e,t,n,r,s){return s!==void 0&&(e=Wc(e,s,r)),Wc(e,n,r)+t}function ep(e,t=0,n=1,r,s){e.min=jy(e.min,t,n,r,s),e.max=jy(e.max,t,n,r,s)}function $C(e,{x:t,y:n}){ep(e.x,t.translate,t.scale,t.originPoint),ep(e.y,n.translate,n.scale,n.originPoint)}function AI(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let o,i;for(let a=0;a<s;a++){o=n[a],i=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xo(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,$C(e,i)),r&&ms(o.latestValues)&&xo(e,o.latestValues))}t.x=Py(t.x),t.y=Py(t.y)}function Py(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ar(e,t){e.min=e.min+t,e.max=e.max+t}function Ny(e,t,[n,r,s]){const o=t[s]!==void 0?t[s]:.5,i=qe(e.min,e.max,o);ep(e,t[n],t[r],i,t.scale)}const RI=["x","scaleX","originX"],$I=["y","scaleY","originY"];function xo(e,t){Ny(e.x,t,RI),Ny(e.y,t,$I)}function IC(e,t){return AC(TI(e.getBoundingClientRect(),t))}function II(e,t,n){const r=IC(e,n),{scroll:s}=t;return s&&(Ar(r.x,s.offset.x),Ar(r.y,s.offset.y)),r}const DC=({current:e})=>e?e.ownerDocument.defaultView:null,DI=new WeakMap;class OI{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mu(d,"page").point)},o=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:y}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=q_(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sn(w=>{let v=this.getAxisMotionValue(w).get()||0;if(Fn.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(v=Jt(b)*(parseFloat(v)/100))}}this.originPoint[w]=v}),y&&Fe.update(()=>y(d,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:w}=f;if(p&&this.currentDirection===null){this.currentDirection=MI(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),g&&g(d,f)},a=(d,f)=>this.stop(d,f),l=()=>sn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new NC(t,{onSessionStart:s,onStart:o,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:DC(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Fe.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!kl(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=CI(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&go(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=SI(s.layoutBox,n):this.constraints=!1,this.elastic=PI(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&sn(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=jI(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!go(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=II(r,s.root,this.visualElement.getTransformPagePoint());let i=EI(s.layout.layoutBox,o);if(n){const a=n(NI(i));this.hasMutatedConstraints=!!a,a&&(i=AC(a))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=sn(d=>{if(!kl(d,n,this.currentDirection))return;let f=l&&l[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?t[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(sg(t,r,0,n))}stopAnimation(){sn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){sn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){sn(n=>{const{drag:r}=this.getProps();if(!kl(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:a}=s.layout.layoutBox[n];o.set(t[n]-qe(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!go(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sn(i=>{const a=this.getAxisMotionValue(i);if(a){const l=a.get();s[i]=kI({min:l,max:l},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sn(i=>{if(!kl(i,t,null))return;const a=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];a.set(qe(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;DI.set(this.visualElement,this);const t=this.visualElement.current,n=tr(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();go(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const i=Qn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(sn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:i=Jh,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function kl(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function MI(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class LI extends cs{constructor(t){super(t),this.removeGroupControls=Qe,this.removeListeners=Qe,this.controls=new OI(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ty=e=>(t,n)=>{e&&Fe.update(()=>e(t,n))};class FI extends cs{constructor(){super(...arguments),this.removePointerDownListener=Qe}onPointerDown(t){this.session=new NC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Ty(t),onStart:Ty(n),onMove:r,onEnd:(o,i)=>{delete this.session,s&&Fe.update(()=>s(o,i))}}}mount(){this.removePointerDownListener=tr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function zI(){const e=m.useContext(Ru);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=m.useId();return m.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const nc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ay(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Si={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xe.test(e))e=parseFloat(e);else return e;const n=Ay(e,t.target.x),r=Ay(e,t.target.y);return`${n}% ${r}%`}},UI={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=es.parse(e);if(s.length>5)return r;const o=es.createTransformer(e),i=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+i]/=a,s[1+i]/=l;const u=qe(a,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),o(s)}};class BI extends ce.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=t;X$(VI),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),nc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,i=r.projection;return i&&(i.isPresent=o,s||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||Fe.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function OC(e){const[t,n]=zI(),r=m.useContext(Wm);return ce.createElement(BI,{...e,layoutGroup:r,switchLayoutGroup:m.useContext(A_),isPresent:t,safeToRemove:n})}const VI={borderRadius:{...Si,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Si,borderTopRightRadius:Si,borderBottomLeftRadius:Si,borderBottomRightRadius:Si,boxShadow:UI},MC=["TopLeft","TopRight","BottomLeft","BottomRight"],WI=MC.length,Ry=e=>typeof e=="string"?parseFloat(e):e,$y=e=>typeof e=="number"||xe.test(e);function HI(e,t,n,r,s,o){s?(e.opacity=qe(0,n.opacity!==void 0?n.opacity:1,KI(r)),e.opacityExit=qe(t.opacity!==void 0?t.opacity:1,0,GI(r))):o&&(e.opacity=qe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<WI;i++){const a=`border${MC[i]}Radius`;let l=Iy(t,a),u=Iy(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||$y(l)===$y(u)?(e[a]=Math.max(qe(Ry(l),Ry(u),r),0),(Fn.test(u)||Fn.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=qe(t.rotate||0,n.rotate||0,r))}function Iy(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const KI=LC(0,.5,iC),GI=LC(.5,.95,Qe);function LC(e,t,n){return r=>r<e?0:r>t?1:n(ya(e,t,r))}function Dy(e,t){e.min=t.min,e.max=t.max}function rn(e,t){Dy(e.x,t.x),Dy(e.y,t.y)}function Oy(e,t,n,r,s){return e-=t,e=Wc(e,1/n,r),s!==void 0&&(e=Wc(e,1/s,r)),e}function qI(e,t=0,n=1,r=.5,s,o=e,i=e){if(Fn.test(t)&&(t=parseFloat(t),t=qe(i.min,i.max,t/100)-i.min),typeof t!="number")return;let a=qe(o.min,o.max,r);e===o&&(a-=t),e.min=Oy(e.min,t,n,a,s),e.max=Oy(e.max,t,n,a,s)}function My(e,t,[n,r,s],o,i){qI(e,t[n],t[r],t[s],t.scale,o,i)}const XI=["x","scaleX","originX"],YI=["y","scaleY","originY"];function Ly(e,t,n,r){My(e.x,t,XI,n?n.x:void 0,r?r.x:void 0),My(e.y,t,YI,n?n.y:void 0,r?r.y:void 0)}function Fy(e){return e.translate===0&&e.scale===1}function FC(e){return Fy(e.x)&&Fy(e.y)}function ZI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function zC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function zy(e){return Jt(e.x)/Jt(e.y)}class JI{constructor(){this.members=[]}add(t){og(this.members,t),t.scheduleRender()}remove(t){if(ig(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uy(e,t,n){let r="";const s=e.x.translate/t.x,o=e.y.translate/t.y;if((s||o)&&(r=`translate3d(${s}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const i=e.x.scale*t.x,a=e.y.scale*t.y;return(i!==1||a!==1)&&(r+=`scale(${i}, ${a})`),r||"none"}const QI=(e,t)=>e.depth-t.depth;class eD{constructor(){this.children=[],this.isDirty=!1}add(t){og(this.children,t),this.isDirty=!0}remove(t){ig(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(QI),this.isDirty=!1,this.children.forEach(t)}}function tD(e,t){const n=performance.now(),r=({timestamp:s})=>{const o=s-n;o>=t&&(lr(r),e(o-t))};return Fe.read(r,!0),()=>lr(r)}function nD(e){window.MotionDebug&&window.MotionDebug.record(e)}function rD(e){return e instanceof SVGElement&&e.tagName!=="svg"}function sD(e,t,n){const r=Bt(e)?e:zo(e);return r.start(sg("",r,t,n)),r.animation}const By=["","X","Y","Z"],oD={visibility:"hidden"},Vy=1e3;let iD=0;const gs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function UC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},a=t==null?void 0:t()){this.id=iD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,gs.totalNodes=gs.resolvedTargetDeltas=gs.recalculatedProjection=0,this.nodes.forEach(cD),this.nodes.forEach(pD),this.nodes.forEach(mD),this.nodes.forEach(uD),nD(gs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new eD)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new ag),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rD(i),this.instance=i;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=tD(h,250),nc.hasAnimatedSinceResize&&(nc.hasAnimatedSinceResize=!1,this.nodes.forEach(Hy))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||wD,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!zC(this.targetLayout,y)||p,b=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const _={...rg(g,"layout"),onPlay:w,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||Hy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gD),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wy);return}this.isUpdating||this.nodes.forEach(fD),this.isUpdating=!1,this.nodes.forEach(hD),this.nodes.forEach(aD),this.nodes.forEach(lD),this.clearAllSnapshots();const a=performance.now();vt.delta=Qr(0,1e3/60,a-vt.timestamp),vt.timestamp=a,vt.isProcessing=!0,Qd.update.process(vt),Qd.preRender.process(vt),Qd.render.process(vt),vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(dD),this.sharedNodes.forEach(vD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:i,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!FC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&(a||ms(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),bD(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return rt();const a=i.measureViewportBox(),{scroll:l}=this.root;return l&&(Ar(a.x,l.offset.x),Ar(a.y,l.offset.y)),a}removeElementScroll(i){const a=rt();rn(a,i);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){rn(a,i);const{scroll:h}=this.root;h&&(Ar(a.x,-h.offset.x),Ar(a.y,-h.offset.y))}Ar(a.x,d.offset.x),Ar(a.y,d.offset.y)}}return a}applyTransform(i,a=!1){const l=rt();rn(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&xo(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ms(d.latestValues)&&xo(l,d.latestValues)}return ms(this.latestValues)&&xo(l,this.latestValues),l}removeTransform(i){const a=rt();rn(a,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ms(u.latestValues))continue;Qh(u.latestValues)&&u.updateSnapshot();const d=rt(),f=u.measurePageBox();rn(d,f),Ly(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ms(this.latestValues)&&Ly(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=vt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),Hi(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rt(),this.targetWithTransforms=rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_I(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rn(this.target,this.layout.layoutBox),$C(this.target,this.targetDelta)):rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),Hi(this.relativeTargetOrigin,this.target,p.target),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}gs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qh(this.parent.latestValues)||RC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===vt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;rn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;AI(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=yo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=yo(),this.projectionDeltaWithTransform=yo());const g=this.projectionTransform;Wi(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=Uy(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==h||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),gs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(i,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=yo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=rt(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,w=this.getStack(),v=!w||w.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(xD));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const S=_/1e3;Ky(f.x,i.x,S),Ky(f.y,i.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hi(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yD(this.relativeTarget,this.relativeTargetOrigin,h,S),b&&ZI(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=rt()),rn(b,this.relativeTarget)),g&&(this.animationValues=d,HI(d,u,this.latestValues,S,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{nc.hasAnimatedSinceResize=!0,this.currentAnimation=sD(0,Vy,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Vy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=i;if(!(!a||!l||!u)){if(this!==i&&this.layout&&u&&BC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||rt();const f=Jt(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const h=Jt(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}rn(a,l),xo(a,d),Wi(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new JI),this.sharedNodes.get(i).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<By.length;d++){const f="rotate"+By[d];l[f]&&(u[f]=l[f],i.setStaticValue(f,0))}i.render();for(const d in u)i.setStaticValue(d,u[d]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oD;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=tc(i==null?void 0:i.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=tc(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!ms(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Uy(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in Mc){if(h[g]===void 0)continue;const{correct:w,applyTo:v}=Mc[g],x=u.transform==="none"?h[g]:w(h[g],f);if(v){const b=v.length;for(let _=0;_<b;_++)u[v[_]]=x}else u[g]=x}return this.options.layoutId&&(u.pointerEvents=f===this?tc(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Wy),this.root.sharedNodes.clear()}}}function aD(e){e.updateLayout()}function lD(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:o}=e.options,i=n.source!==e.layout.source;o==="size"?sn(f=>{const h=i?n.measuredBox[f]:n.layoutBox[f],p=Jt(h);h.min=r[f].min,h.max=h.min+p}):BC(o,n.layoutBox,r)&&sn(f=>{const h=i?n.measuredBox[f]:n.layoutBox[f],p=Jt(r[f]);h.max=h.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const a=yo();Wi(a,r,n.layoutBox);const l=yo();i?Wi(l,e.applyTransform(s,!0),n.measuredBox):Wi(l,r,n.layoutBox);const u=!FC(a);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const y=rt();Hi(y,n.layoutBox,h.layoutBox);const g=rt();Hi(g,r,p.layoutBox),zC(y,g)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=y,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function cD(e){gs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function uD(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dD(e){e.clearSnapshot()}function Wy(e){e.clearMeasurements()}function fD(e){e.isLayoutDirty=!1}function hD(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Hy(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pD(e){e.resolveTargetDelta()}function mD(e){e.calcProjection()}function gD(e){e.resetRotation()}function vD(e){e.removeLeadSnapshot()}function Ky(e,t,n){e.translate=qe(t.translate,0,n),e.scale=qe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Gy(e,t,n,r){e.min=qe(t.min,n.min,r),e.max=qe(t.max,n.max,r)}function yD(e,t,n,r){Gy(e.x,t.x,n.x,r),Gy(e.y,t.y,n.y,r)}function xD(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const wD={duration:.45,ease:[.4,0,.1,1]},qy=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Xy=qy("applewebkit/")&&!qy("chrome/")?Math.round:Qe;function Yy(e){e.min=Xy(e.min),e.max=Xy(e.max)}function bD(e){Yy(e.x),Yy(e.y)}function BC(e,t,n){return e==="position"||e==="preserve-aspect"&&!Zh(zy(t),zy(n),.2)}const _D=UC({attachResizeListener:(e,t)=>Qn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),df={current:void 0},VC=UC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!df.current){const e=new _D({});e.mount(window),e.setOptions({layoutScroll:!0}),df.current=e}return df.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),CD={pan:{Feature:FI},drag:{Feature:LI,ProjectionNode:VC,MeasureLayout:OC}},SD=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ED(e){const t=SD.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function tp(e,t,n=1){const[r,s]=ED(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const i=o.trim();return EC(i)?parseFloat(i):i}else return Wh(s)?tp(s,t,n+1):s}function kD(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const o=s.get();if(!Wh(o))return;const i=tp(o,r);i&&s.set(i)});for(const s in t){const o=t[s];if(!Wh(o))continue;const i=tp(o,r);i&&(t[s]=i,n||(n={}),n[s]===void 0&&(n[s]=o))}return{target:t,transitionEnd:n}}const jD=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),WC=e=>jD.has(e),PD=e=>Object.keys(e).some(WC),Zy=e=>e===Bs||e===xe,Jy=(e,t)=>parseFloat(e.split(", ")[t]),Qy=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Jy(s[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?Jy(o[1],e):0}},ND=new Set(["x","y","z"]),TD=Oa.filter(e=>!ND.has(e));function AD(e){const t=[];return TD.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Uo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Qy(4,13),y:Qy(5,14)};Uo.translateX=Uo.x;Uo.translateY=Uo.y;const RD=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,o=getComputedStyle(s),{display:i}=o,a={};i==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Uo[u](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(a[u]),e[u]=Uo[u](l,o)}),e},$D=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(WC);let o=[],i=!1;const a=[];if(s.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let d=n[l],f=Ci(d);const h=t[l];let p;if(Fc(h)){const y=h.length,g=h[0]===null?1:0;d=h[g],f=Ci(d);for(let w=g;w<y&&h[w]!==null;w++)p?Jm(Ci(h[w])===p):p=Ci(h[w])}else p=Ci(h);if(f!==p)if(Zy(f)&&Zy(p)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof h=="string"?t[l]=parseFloat(h):Array.isArray(h)&&p===xe&&(t[l]=h.map(parseFloat))}else f!=null&&f.transform&&(p!=null&&p.transform)&&(d===0||h===0)?d===0?u.set(p.transform(d)):t[l]=f.transform(h):(i||(o=AD(e),i=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(h))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=RD(t,e,a);return o.length&&o.forEach(([d,f])=>{e.getValue(d).set(f)}),e.render(),$u&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function ID(e,t,n,r){return PD(t)?$D(e,t,n,r):{target:t,transitionEnd:r}}const DD=(e,t,n,r)=>{const s=kD(e,t,r);return t=s.target,r=s.transitionEnd,ID(e,t,n,r)},np={current:null},HC={current:!1};function OD(){if(HC.current=!0,!!$u)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>np.current=e.matches;e.addListener(t),t()}else np.current=!1}function MD(e,t,n){const{willChange:r}=t;for(const s in t){const o=t[s],i=n[s];if(Bt(o))e.addValue(s,o),Vc(r)&&r.add(s);else if(Bt(i))e.addValue(s,zo(o,{owner:e})),Vc(r)&&r.remove(s);else if(i!==o)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(s);e.addValue(s,zo(a!==void 0?a:o,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const ex=new WeakMap,KC=Object.keys(va),LD=KC.length,tx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],FD=Vm.length;class zD{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Fe.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=i,this.isControllingVariants=Du(n),this.isVariantNode=T_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const f in d){const h=d[f];a[f]!==void 0&&Bt(h)&&(h.set(a[f],!1),Vc(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,ex.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),HC.current||OD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:np.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ex.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Us.has(t),s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Fe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,o){let i,a;for(let l=0;l<LD;l++){const u=KC[l],{isEnabled:d,Feature:f,ProjectionNode:h,MeasureLayout:p}=va[u];h&&(i=h),d(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:f,layoutScroll:h,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||f&&go(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:h,layoutRoot:p})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tx.length;r++){const s=tx[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o=t["on"+s];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=MD(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<FD;r++){const s=Vm[r],o=this.props[s];(ga(o)||o===!1)&&(n[s]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=zo(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Zm(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Bt(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ag),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class GC extends zD{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},o){let i=rI(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),i&&(i=s(i))),o){tI(this,r,i);const a=DD(this,r,i,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function UD(e){return window.getComputedStyle(e)}class BD extends GC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Us.has(n)){const r=ng(n);return r&&r.default||0}else{const r=UD(t),s=(I_(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return IC(t,n)}build(t,n,r,s){Km(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Ym(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Bt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){z_(t,n,r,s)}}class VD extends GC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Us.has(n)){const r=ng(n);return r&&r.default||0}return n=U_.has(n)?n:Um(n),t.getAttribute(n)}measureInstanceViewportBox(){return rt()}scrapeMotionValuesFromProps(t,n){return V_(t,n)}build(t,n,r,s){qm(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){B_(t,n,r,s)}mount(t){this.isSVGTag=Xm(t.tagName),super.mount(t)}}const WD=(e,t)=>Hm(e)?new VD(t,{enableHardwareAcceleration:!1}):new BD(t,{enableHardwareAcceleration:!0}),HD={layout:{ProjectionNode:VC,MeasureLayout:OC}},KD={...yI,...L5,...CD,...HD},ge=G$((e,t)=>E5(e,t,KD,WD));function qC(){const e=m.useRef(!1);return zm(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function GD(){const e=qC(),[t,n]=m.useState(0),r=m.useCallback(()=>{e.current&&n(t+1)},[t]);return[m.useCallback(()=>Fe.postRender(r),[r]),t]}class qD extends m.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function XD({children:e,isPresent:t}){const n=m.useId(),r=m.useRef(null),s=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:o,height:i,top:a,left:l}=s.current;if(t||!r.current||!o||!i)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${i}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),m.createElement(qD,{isPresent:t,childRef:r,sizeRef:s},m.cloneElement(e,{ref:r}))}const ff=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:i})=>{const a=W_(YD),l=m.useId(),u=m.useMemo(()=>({id:l,initial:t,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const f of a.values())if(!f)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),o?void 0:[n]);return m.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),m.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),i==="popLayout"&&(e=m.createElement(XD,{isPresent:n},e)),m.createElement(Ru.Provider,{value:u},e)};function YD(){return new Map}function ZD(e){return m.useEffect(()=>()=>e(),[])}const vs=e=>e.key||"";function JD(e,t){e.forEach(n=>{const r=vs(n);t.set(r,n)})}function QD(e){const t=[];return m.Children.forEach(e,n=>{m.isValidElement(n)&&t.push(n)}),t}const ts=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:i="sync"})=>{const a=m.useContext(Wm).forceRender||GD()[0],l=qC(),u=QD(e);let d=u;const f=m.useRef(new Map).current,h=m.useRef(d),p=m.useRef(new Map).current,y=m.useRef(!0);if(zm(()=>{y.current=!1,JD(u,p),h.current=d}),ZD(()=>{y.current=!0,p.clear(),f.clear()}),y.current)return m.createElement(m.Fragment,null,d.map(x=>m.createElement(ff,{key:vs(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:i},x)));d=[...d];const g=h.current.map(vs),w=u.map(vs),v=g.length;for(let x=0;x<v;x++){const b=g[x];w.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return i==="wait"&&f.size&&(d=[]),f.forEach((x,b)=>{if(w.indexOf(b)!==-1)return;const _=p.get(b);if(!_)return;const S=g.indexOf(b);let N=x;if(!N){const k=()=>{f.delete(b);const j=Array.from(p.keys()).filter(T=>!w.includes(T));if(j.forEach(T=>p.delete(T)),h.current=u.filter(T=>{const M=vs(T);return M===b||j.includes(M)}),!f.size){if(l.current===!1)return;a(),r&&r()}};N=m.createElement(ff,{key:vs(_),isPresent:!1,onExitComplete:k,custom:t,presenceAffectsLayout:o,mode:i},_),f.set(b,N)}d.splice(S,0,N)}),d=d.map(x=>{const b=x.key;return f.has(b)?x:m.createElement(ff,{key:vs(x),isPresent:!0,presenceAffectsLayout:o,mode:i},x)}),m.createElement(m.Fragment,null,f.size?d:d.map(x=>m.cloneElement(x)))},lg=Im("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=ce.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const i=r?mR:"button";return c.jsx(i,{className:he(lg({variant:t,size:n,className:e})),ref:o,...s})});te.displayName="Button";const Ve=ce.forwardRef(({className:e,type:t,...n},r)=>c.jsx("input",{type:t,className:he("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ve.displayName="Input";const eO="modulepreload",tO=function(e){return"/"+e},nx={},Bo=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=tO(o),o in nx)return;nx[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":eO,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},nO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Bo(()=>Promise.resolve().then(()=>ei),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class cg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class rO extends cg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sO extends cg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class oO extends cg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var rp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(rp||(rp={}));var iO=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class aO{constructor(t,{headers:n={},customFetch:r,region:s=rp.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=nO(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return iO(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(a["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(a["Content-Type"]="application/json",u=JSON.stringify(i)));const d=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(y=>{throw new rO(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new sO(d);if(!d.ok)throw new oO(d);let h=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="text/event-stream"?p=d:h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Ot={},ug={},Fu={},za={},zu={},Uu={},lO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vo=lO();const cO=Vo.fetch,XC=Vo.fetch.bind(Vo),YC=Vo.Headers,uO=Vo.Request,dO=Vo.Response,ei=Object.freeze(Object.defineProperty({__proto__:null,Headers:YC,Request:uO,Response:dO,default:XC,fetch:cO},Symbol.toStringTag,{value:"Module"})),fO=cP(ei);var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});let hO=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Bu.default=hO;var ZC=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uu,"__esModule",{value:!0});const pO=ZC(fO),mO=ZC(Bu);let gO=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=pO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let u=null,d=null,f=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),w=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&w&&w.length>1&&(f=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const g=await o.text();try{u=JSON.parse(g),Array.isArray(u)&&o.status===404&&(d=[],u=null,h=200,p="OK")}catch{o.status===404&&g===""?(h=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new mO.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Uu.default=gO;var vO=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zu,"__esModule",{value:!0});const yO=vO(Uu);let xO=class extends yO.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};zu.default=xO;var wO=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(za,"__esModule",{value:!0});const bO=wO(zu);let _O=class extends bO.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${i}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};za.default=_O;var CO=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fu,"__esModule",{value:!0});const Ei=CO(za);let SO=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new Ei.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ei.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ei.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Ei.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ei.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Fu.default=SO;var Vu={},Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.version=void 0;Wu.version="0.0.0-automated";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.DEFAULT_HEADERS=void 0;const EO=Wu;Vu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${EO.version}`};var JC=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ug,"__esModule",{value:!0});const kO=JC(Fu),jO=JC(za),PO=Vu;let NO=class QC{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},PO.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new kO.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new QC(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${t}`);let l;r||s?(i=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(i="POST",l=n);const u=Object.assign({},this.headers);return o&&(u.Prefer=`count=${o}`),new jO.default({method:i,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ug.default=NO;var ti=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PostgrestError=Ot.PostgrestBuilder=Ot.PostgrestTransformBuilder=Ot.PostgrestFilterBuilder=Ot.PostgrestQueryBuilder=Ot.PostgrestClient=void 0;const eS=ti(ug);Ot.PostgrestClient=eS.default;const tS=ti(Fu);Ot.PostgrestQueryBuilder=tS.default;const nS=ti(za);Ot.PostgrestFilterBuilder=nS.default;const rS=ti(zu);Ot.PostgrestTransformBuilder=rS.default;const sS=ti(Uu);Ot.PostgrestBuilder=sS.default;const oS=ti(Bu);Ot.PostgrestError=oS.default;var TO=Ot.default={PostgrestClient:eS.default,PostgrestQueryBuilder:tS.default,PostgrestFilterBuilder:nS.default,PostgrestTransformBuilder:rS.default,PostgrestBuilder:sS.default,PostgrestError:oS.default};const{PostgrestClient:AO,PostgrestQueryBuilder:sW,PostgrestFilterBuilder:oW,PostgrestTransformBuilder:iW,PostgrestBuilder:aW,PostgrestError:lW}=TO,RO="2.11.2",$O={"X-Client-Info":`realtime-js/${RO}`},IO="1.0.0",iS=1e4,DO=1e3;var ko;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ko||(ko={}));var Ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ht||(Ht={}));var yn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(yn||(yn={}));var sp;(function(e){e.websocket="websocket"})(sp||(sp={}));var xs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xs||(xs={}));class OO{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(t.slice(i,i+s));i=i+s;const l=r.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class aS{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(De||(De={}));const rx=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,i)=>(o[i]=MO(i,e,t,s),o),{})},MO=(e,t,n,r)=>{const s=t.find(a=>a.name===e),o=s==null?void 0:s.type,i=n[e];return o&&!r.includes(o)?lS(o,i):op(i)},lS=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return UO(t,n)}switch(e){case De.bool:return LO(t);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return FO(t);case De.json:case De.jsonb:return zO(t);case De.timestamp:return BO(t);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return op(t);default:return op(t)}},op=e=>e,LO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},FO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},UO=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const i=e.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>lS(t,a))}return e},BO=e=>typeof e=="string"?e.replace(" ","T"):e,cS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class hf{constructor(t,n,r={},s=iS){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sx||(sx={}));class Ki{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ki.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=Ki.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ki.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const o=this.cloneDeep(t),i=this.transformState(n),a={},l={};return this.map(o,(u,d)=>{i[u]||(l[u]=d)}),this.map(i,(u,d)=>{const f=o[u];if(f){const h=d.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),y=d.filter(w=>p.indexOf(w.presence_ref)<0),g=f.filter(w=>h.indexOf(w.presence_ref)<0);y.length>0&&(a[u]=y),g.length>0&&(l[u]=g)}else a[u]=d}),this.syncDiff(o,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const f=t[a].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[a].unshift(...h)}r(a,d,l)}),this.map(i,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ox;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ox||(ox={}));var ix;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ix||(ix={}));var Gn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class dg{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hf(this,yn.join,this.params,this.timeout),this.rejoinTimer=new aS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ht.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Ki(this),this.broadcastEndpointURL=cS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(d=>t==null?void 0:t(Gn.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Gn.CLOSED));const l={},u={broadcast:o,presence:i,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Gn.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,y=[];for(let g=0;g<p;g++){const w=h[g],{filter:{event:v,schema:x,table:b,filter:_}}=w,S=d&&d[g];if(S&&S.event===v&&S.schema===x&&S.table===b&&S.filter===_)y.push(Object.assign(Object.assign({},w),{id:S.id}));else{this.unsubscribe(),t==null||t(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Gn.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ht.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new hf(this,yn.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hf(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=yn;if(r&&[a,l,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,g,w;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var y,g,w,v,x,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const _=p.id,S=(y=p.filter)===null||y===void 0?void 0:y.event;return _&&((g=n.ids)===null||g===void 0?void 0:g.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(x=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:g,table:w,commit_timestamp:v,type:x,errors:b}=y;h=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}p.callback(h,r)})}_isClosed(){return this.state===Ht.closed}_isJoined(){return this.state===Ht.joined}_isJoining(){return this.state===Ht.joining}_isLeaving(){return this.state===Ht.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&dg.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(yn.close,{},t)}_onError(t){this._on(yn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ht.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=rx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=rx(t.columns,t.old_record)),n}}const VO=()=>{},WO=typeof WebSocket<"u",HO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KO{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=$O,this.params={},this.timeout=iS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=VO,this.conn=null,this.sendBuffer=[],this.serializer=new OO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>Bo(()=>Promise.resolve().then(()=>ei),void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${sp.websocket}`,this.httpEndpoint=cS(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,i)=>i(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new aS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(WO){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new GO(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Bo(()=>import("./browser-78a08aba.js").then(t=>t.b),[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:IO}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ko.connecting:return xs.Connecting;case ko.open:return xs.Open;case ko.closing:return xs.Closing;default:return xs.Closed}}isConnected(){return this.connectionState()===xs.Open}channel(t,n={config:{}}){const r=new dg(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:s,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(yn.access_token,{access_token:n})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(DO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:o,ref:i}=n;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(yn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([HO],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class GO{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ko.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class fg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function lt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class qO extends fg{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ip extends fg{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var XO=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const uS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Bo(()=>Promise.resolve().then(()=>ei),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},YO=()=>XO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bo(()=>Promise.resolve().then(()=>ei),void 0)).Response:Response}),ap=e=>{if(Array.isArray(e))return e.map(n=>ap(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=ap(r)}),t};var Vs=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const pf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZO=(e,t,n)=>Vs(void 0,void 0,void 0,function*(){const r=yield YO();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new qO(pf(s),e.status||500))}).catch(s=>{t(new ip(pf(s),s))}):t(new ip(pf(e),e))}),JO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ua(e,t,n,r,s,o){return Vs(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(n,JO(t,r,s,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>ZO(l,a,r))})})}function Hc(e,t,n,r){return Vs(this,void 0,void 0,function*(){return Ua(e,"GET",t,n,r)})}function Rr(e,t,n,r,s){return Vs(this,void 0,void 0,function*(){return Ua(e,"POST",t,r,s,n)})}function QO(e,t,n,r,s){return Vs(this,void 0,void 0,function*(){return Ua(e,"PUT",t,r,s,n)})}function e4(e,t,n,r){return Vs(this,void 0,void 0,function*(){return Ua(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function dS(e,t,n,r,s){return Vs(this,void 0,void 0,function*(){return Ua(e,"DELETE",t,r,s,n)})}var It=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const t4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ax={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n4{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=uS(s)}uploadOrUpdate(t,n,r,s){return It(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ax),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(o){if(lt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return It(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return It(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:ax.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),h=yield f.json();return f.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(lt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return It(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield Rr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new fg("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}update(t,n,r){return It(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return It(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return It(this,void 0,void 0,function*(){try{return{data:{path:(yield Rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return It(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield Rr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return It(this,void 0,void 0,function*(){try{const s=yield Rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}download(t,n){return It(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Hc(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(lt(a))return{data:null,error:a};throw a}})}info(t){return It(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Hc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ap(r),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}exists(t){return It(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield e4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(lt(r)&&r instanceof ip){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return It(this,void 0,void 0,function*(){try{return{data:yield dS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}list(t,n,r){return It(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},t4),n),{prefix:t||""});return{data:yield Rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(lt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const r4="2.7.1",s4={"X-Client-Info":`storage-js/${r4}`};var qs=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class o4{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},s4),n),this.fetch=uS(r)}listBuckets(){return qs(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(lt(t))return{data:null,error:t};throw t}})}getBucket(t){return qs(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return qs(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return qs(this,void 0,void 0,function*(){try{return{data:yield QO(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return qs(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return qs(this,void 0,void 0,function*(){try{return{data:yield dS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}})}}class i4 extends o4{constructor(t,n={},r){super(t,n,r)}from(t){return new n4(this.url,this.headers,t,this.fetch)}}const a4="2.49.4";let Ai="";typeof Deno<"u"?Ai="deno":typeof document<"u"?Ai="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ai="react-native":Ai="node";const l4={"X-Client-Info":`supabase-js-${Ai}/${a4}`},c4={headers:l4},u4={schema:"public"},d4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},f4={};var h4=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const p4=e=>{let t;return e?t=e:typeof fetch>"u"?t=XC:t=fetch,(...n)=>t(...n)},m4=()=>typeof Headers>"u"?YC:Headers,g4=(e,t,n)=>{const r=p4(n),s=m4();return(o,i)=>h4(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:u}))})};var v4=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function y4(e){return e.replace(/\/$/,"")}function x4(e,t){const{db:n,auth:r,realtime:s,global:o}=e,{db:i,auth:a,realtime:l,global:u}=t,d={db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),o),accessToken:()=>v4(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const fS="2.69.1",no=30*1e3,lp=3,mf=lp*no,w4="http://localhost:9999",b4="supabase.auth.token",_4={"X-Client-Info":`gotrue-js/${fS}`},cp="X-Supabase-Api-Version",hS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},C4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S4=6e5;class hg extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class E4 extends hg{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function k4(e){return be(e)&&e.name==="AuthApiError"}class pS extends hg{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class us extends hg{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Er extends us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function j4(e){return be(e)&&e.name==="AuthSessionMissingError"}class gf extends us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jl extends us{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Pl extends us{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function P4(e){return be(e)&&e.name==="AuthImplicitGrantRedirectError"}class lx extends us{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class up extends us{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function vf(e){return be(e)&&e.name==="AuthRetryableFetchError"}class cx extends us{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Gi extends us{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ux="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dx=` 	
\r=`.split(""),N4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dx.length;t+=1)e[dx[t].charCodeAt(0)]=-2;for(let t=0;t<ux.length;t+=1)e[ux[t].charCodeAt(0)]=t;return e})();function mS(e,t,n){const r=N4[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fx(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{R4(i,r,n)};for(let i=0;i<e.length;i+=1)mS(e.charCodeAt(i),s,o);return t.join("")}function T4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function A4(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}T4(r,t)}}function R4(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function $4(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)mS(e.charCodeAt(s),n,r);return new Uint8Array(t)}function I4(e){const t=[];return A4(e,n=>t.push(n)),new Uint8Array(t)}function D4(e){return Math.round(Date.now()/1e3)+e}function O4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Rn=()=>typeof window<"u"&&typeof document<"u",fs={tested:!1,writable:!1},qi=()=>{if(!Rn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fs.tested)return fs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fs.tested=!0,fs.writable=!0}catch{fs.tested=!0,fs.writable=!1}return fs.writable};function M4(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const gS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Bo(()=>Promise.resolve().then(()=>ei),void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},L4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vS=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Nl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tl=async(e,t)=>{await e.removeItem(t)};class Hu{constructor(){this.promise=new Hu.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Hu.promiseConstructor=Promise;function yf(e){const t=e.split(".");if(t.length!==3)throw new Gi("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!C4.test(t[r]))throw new Gi("JWT not in base64url format");return{header:JSON.parse(fx(t[0])),payload:JSON.parse(fx(t[1])),signature:$4(t[2]),raw:{header:t[0],payload:t[1]}}}async function F4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function z4(e,t){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){r(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function U4(e){return("0"+e.toString(16)).substr(-2)}function B4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,U4).join("")}async function V4(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function W4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await V4(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xs(e,t,n=!1){const r=B4();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await vS(e,`${t}-code-verifier`,s);const o=await W4(r);return[o,r===o?"plain":"s256"]}const H4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K4(e){const t=e.headers.get(cp);if(!t||!t.match(H4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function G4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function q4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var X4=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ys=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Y4=[502,503,504];async function hx(e){var t;if(!L4(e))throw new up(ys(e),0);if(Y4.includes(e.status))throw new up(ys(e),e.status);let n;try{n=await e.json()}catch(o){throw new pS(ys(o),o)}let r;const s=K4(e);if(s&&s.getTime()>=hS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new cx(ys(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Er}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new cx(ys(n),e.status,n.weak_password.reasons);throw new E4(ys(n),e.status||500,r)}const Z4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Pe(e,t,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[cp]||(o[cp]=hS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await J4(e,t,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function J4(e,t,n,r,s,o){const i=Z4(t,r,s,o);let a;try{a=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new up(ys(l),0)}if(a.ok||await hx(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await hx(l)}}function kr(e){var t;let n=null;nM(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=D4(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function px(e){const t=kr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Dr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Q4(e){return{data:e,error:null}}function eM(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=e,i=X4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function tM(e){return e}function nM(e){return e.access_token&&e.refresh_token&&e.expires_in}var rM=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class sM{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=gS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await Pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Dr})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=rM(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:eM,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Dr})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,o,i,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:tM});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await Pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Dr})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await Pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Dr})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Dr})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await Pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}}const oM={getItem:e=>qi()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{qi()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{qi()&&globalThis.localStorage.removeItem(e)}};function mx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function iM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ys={debug:!!(globalThis&&qi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aM extends yS{}async function lM(e,t,n){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new aM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ys.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}iM();const cM={url:w4,storageKey:b4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gx(e,t,n){return await n()}class xa{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xa.nextInstanceID,xa.nextInstanceID+=1,this.instanceID>0&&Rn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},cM),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new sM({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=gS(s.fetch),this.lock=s.lock||gx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Rn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=lM:this.lock=gx,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:qi()?this.storage=oM:(this.memoryStorage={},this.storage=mx(this.memoryStorage)):(this.memoryStorage={},this.storage=mx(this.memoryStorage)),Rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=M4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Rn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),P4(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return be(n)?{error:n}:{error:new pS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:kr}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,s;try{let o;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Xs(this.storage,this.storageKey)),o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:y},xform:kr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:kr})}else throw new jl("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:i,options:a}=t;n=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:px})}else if("phone"in t){const{phone:o,password:i,options:a}=t;n=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:px})}else throw new jl("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Nl(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:i}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:kr});if(await Tl(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new gf}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(be(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:o,nonce:i}=t,a=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:kr}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new gf}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,o,i;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xs(this.storage,this.storageKey));const{error:f}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new jl("You must provide either an email or phone number.")}catch(a){if(be(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,o;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:kr});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,u=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Xs(this.storage,this.storageKey)),await Pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Q4})}catch(o){if(be(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Er;const{error:s}=await Pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:o}=t,{error:i}=await Pe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:r,type:s,options:o}=t,{data:i,error:a}=await Pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new jl("You must provide either an email or phone number and a type")}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Nl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<mf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Dr}):await this._useSession(async n=>{var r,s,o;const{data:i,error:a}=n;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Dr})})}catch(n){if(be(n))return j4(n)&&(await this._removeSession(),await Tl(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Er;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Xs(this.storage,this.storageKey));const{data:u,error:d}=await Pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Dr});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Er;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:i}=yf(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:a}=n;if(a)throw a;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Er;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Rn())throw new Pl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Pl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new lx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lx("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:u}=t;if(!o||!a||!i||!u)throw new Pl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;l&&(h=parseInt(l));const p=h-d;p*1e3<=no&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:g,error:w}=await this._getUser(o);if(w)throw w;const v={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(r){if(be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Nl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(k4(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Tl(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=O4(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Xs(this.storage,this.storageKey,!0));try{return await Pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(be(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var i,a,l,u,d;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Pe(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Rn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(be(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)throw i;return await Pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await z4(async s=>(s>0&&await F4(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:kr})),(s,o)=>{const i=200*Math.pow(2,s);return o&&vf(o)&&Date.now()+i-r<no})}catch(r){if(this._debug(n,"error",r),be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Rn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Nl(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<mf;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${mf}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),vf(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Hu;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Er;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),be(o)){const i={session:null,error:o};return vf(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await vS(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Tl(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),no);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/no);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${no}ms, refresh threshold is ${lp} ticks`),s<=lp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Xs(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await Pe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:a}=await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=yf(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(i=>i.kid===t);if(r||(r=this.jwks.keys.find(i=>i.kid===t),r&&this.jwks_cached_at+S4>Date.now()))return r;const{data:s,error:o}=await Pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new Gi("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(i=>i.kid===t),!r)throw new Gi("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};r=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:l}}=yf(r);if(G4(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const u=q4(s.alg),d=await this.fetchJwk(s.kid,n),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,i,I4(`${a}.${l}`)))throw new Gi("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}xa.nextInstanceID=0;const uM=xa;class dM extends uM{constructor(t){super(t)}}var fM=globalThis&&globalThis.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function l(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class hM{constructor(t,n,r){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=y4(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:u4,realtime:f4,auth:Object.assign(Object.assign({},d4),{storageKey:l}),global:c4},d=x4(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=g4(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new AO(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new aO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new i4(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return fM(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:i,lock:a,debug:l},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dM({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:i,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new KO(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pM=(e,t,n)=>new hM(e,t,n),mM="https://ayomxspoosbrsldbbptc.supabase.co",gM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5b214c3Bvb3NicnNsZGJicHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyMDUwOTYsImV4cCI6MjA2MTc4MTA5Nn0.eHEJnJgzeZkxzCAfIHXg1tYUYk8spWiMamybyVk6FfQ",ie=pM(mM,gM),dp=e=>{if(typeof e!="string")return e;const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},n=/[&<>"'/]/ig;return e.replace(n,r=>t[r])},vM=async({email:e,password:t})=>{const n=dp(e),{data:r,error:s}=await ie.auth.signInWithPassword({email:n,password:t});if(s)throw s;return r},yM=async({email:e,password:t,username:n})=>{const r=dp(e),s=dp(n);if(!s||s.length<3)throw new Error("Le pseudo doit contenir au moins 3 caractères.");if(s.length>50)throw new Error("Le pseudo ne doit pas dépasser 50 caractères.");if(!/^[a-zA-Z0-9_]+$/.test(s))throw new Error("Le pseudo ne peut contenir que des lettres, des chiffres et des underscores (_).");const{count:o,error:i}=await ie.from("profiles").select("*",{count:"exact",head:!0}).eq("username",s);if(i)throw console.error("Error checking username:",i),new Error("Une erreur s'est produite lors de la vérification du pseudo.");if(o>0)throw new Error("Ce pseudo est déjà pris.");const{data:a,error:l}=await ie.auth.signUp({email:r,password:t,options:{data:{username:s}}});if(l)throw l;return a},xM=async()=>{const{error:e}=await ie.auth.signOut();if(e)throw e},Ku="webtoon-images",_t=(e,t)=>{if(!t||!e)return null;try{const{data:n}=ie.storage.from(e).getPublicUrl(t);return(n==null?void 0:n.publicUrl)||null}catch(n){return console.error(`Error getting public URL from ${e} for path ${t}:`,n),null}},Ba=async(e,t,n)=>{try{const{data:r,error:s}=await ie.storage.from(e).upload(n,t,{cacheControl:"3600",upsert:!0});if(s)throw console.error(`Error uploading file to ${e} path ${n}:`,s),s;return r.path}catch(r){throw console.error(`Exception during file upload to ${e} path ${n}:`,r),r}},En=async(e,t)=>{if(!(!t||!e))try{const{error:n}=await ie.storage.from(e).remove([t]);if(n){if(n.message&&!n.message.includes("Not Found")&&!n.message.includes("Bucket not found"))throw console.error(`Error deleting file from ${e} path ${t}:`,n),n;console.warn(`File not found during deletion attempt (or bucket issue): ${e}/${t}`)}}catch(n){throw console.error(`Exception during file deletion from ${e} path ${t}:`,n),n}},wM=async(e,t)=>{try{const{data:n,error:r}=await ie.storage.from(e).list(t,{limit:1e3});if(r)throw console.error(`Error listing files in ${e} prefix ${t}:`,r),r;return n||[]}catch(n){throw console.error(`Exception during file listing in ${e} prefix ${t}:`,n),n}},Kc=(e,t)=>Ba(Ku,e,t),xS=(e,t,n,r)=>{const s=r.name.split(".").pop(),o=`page_${String(n).padStart(3,"0")}.${s}`,i=`public/${e}/${t}/pages/${o}`;return Ba(Ku,r,i)},wS=async(e,t)=>{const{data:n,error:r}=await ie.storage.from(e).list(t);if(r){console.error(`Error listing files in folder ${t} for deletion:`,r);return}if(n&&n.length>0){const s=n.map(i=>`${t}/${i.name}`),{error:o}=await ie.storage.from(e).remove(s);if(o)throw console.error(`Error removing files from folder ${t}:`,o),o}},bM=async e=>{const t=`public/${e}`;try{await wS(Ku,t)}catch(n){console.error(`Error deleting webtoon folder contents (${e}):`,n)}},_M=async(e,t)=>{const n=`public/${e}/${t}`;try{await wS(Ku,n)}catch(r){console.error(`Error deleting chapter folder contents (${t}):`,r)}},pg="avatars",wn="popups",CM=async e=>{const{data:t,error:n}=await ie.from("profiles").select("id, username, avatar_url, role, bio").eq("id",e).single();if(n&&n.code!=="PGRST116")throw console.error("Error fetching user profile:",n.message),n;return t&&t.avatar_url&&(t.avatarUrl=_t(pg,t.avatar_url)),t},SM=async(e,t)=>{const{bio:n,username:r,role:s}=t,o={username:r,bio:n,updated_at:new Date};s&&(o.role=s);const{data:i,error:a}=await ie.from("profiles").update(o).eq("id",e).select("id, username, avatar_url, role, bio").single();if(a)throw console.error("Error updating user profile in DB:",a.message),a;const l={...i};return l.avatar_url?l.avatarUrl=_t(pg,l.avatar_url):l.avatarUrl=null,l},EM=async()=>{const{data:e,error:t}=await ie.from("profiles").select("id, username, role, updated_at, avatar_url, bio");if(t)throw console.error("Error fetching profiles:",t.message),t;if(!e||e.length===0)return[];const n=e.map(i=>i.id),{data:r,error:s}=await ie.rpc("get_user_emails_by_ids",{user_ids:n});if(s)throw console.error("Error fetching users from auth.users via RPC:",s.message),s;const o=r.reduce((i,a)=>(i[a.id]=a.email,i),{});return e.map(i=>({...i,email:o[i.id]||"N/A",avatarUrl:i.avatar_url?_t(pg,i.avatar_url):null,roleName:i.role||"user"}))},kM=async(e,t)=>{const{data:n,error:r}=await ie.from("profiles").update({role:t,updated_at:new Date}).eq("id",e).select().single();if(r)throw console.error("Error updating user role:",r.message),r;return n},jM=async()=>{const{data:e,error:t}=await ie.from("popups").select("*").order("created_at",{ascending:!1});if(t)throw t;return e.map(n=>({...n,imageUrl:n.image_url?_t(wn,n.image_url):null}))},PM=async()=>{const{data:e,error:t}=await ie.from("popups").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching active popups:",t.message),t;return e.map(n=>({...n,imageUrl:n.image_url?_t(wn,n.image_url):null}))},NM=async e=>{const{imageFile:t,...n}=e;let r=null;const s=crypto.randomUUID();if(t){const a=t.name.split(".").pop();r=`public/${s}/image.${a}`;try{await Ba(wn,t,r)}catch(l){throw console.error("Popup image upload failed:",l.message),new Error("Failed to upload popup image.")}}const{data:o,error:i}=await ie.from("popups").insert({id:s,...n,image_url:r,created_at:new Date,updated_at:new Date}).select().single();if(i)throw r&&await En(wn,r).catch(a=>console.error("Popup image cleanup failed:",a.message)),i;return o},TM=async(e,t)=>{const{imageFile:n,existingImageUrl:r,removeImage:s,...o}=t;let i=null;r&&r.includes(wn+"/")?i=r.substring(r.lastIndexOf(wn+"/")+wn.length+1):r&&(i=r);let a=i,l=null;if(n){const h=n.name.split(".").pop(),p=`public/${e}/image_${Date.now()}.${h}`;i&&i!==p&&(l=i),a=p;try{await Ba(wn,n,a)}catch(y){throw console.error("Popup image update upload failed:",y.message),new Error("Failed to upload updated popup image.")}}else s&&i&&(l=i,a=null);const{data:u,error:d}=await ie.from("popups").update({...o,image_url:a,updated_at:new Date}).eq("id",e).select().single();if(d)throw d;l&&await En(wn,l).catch(h=>console.error("Old popup image cleanup failed:",h.message));const f={...u};return f.image_url?f.imageUrl=_t(wn,f.image_url):f.imageUrl=null,f},AM=async e=>{const{data:t}=await ie.from("popups").select("image_url").eq("id",e).single();t&&t.image_url&&await En(wn,t.image_url).catch(r=>console.error("Popup image deletion failed:",r.message));const{error:n}=await ie.from("popups").delete().eq("id",e);if(n)throw n},bS=m.createContext(null),RM=({children:e})=>{const[t,n]=m.useState(null),[r,s]=m.useState(null),[o,i]=m.useState(!0),a=m.useCallback(async(p,y)=>{var g;if(!(p!=null&&p.id))return y!=null&&y.current&&s(null),null;i(!0);try{const w=await CM(p.id);if(!(y!=null&&y.current))return null;if(w){const v={id:w.id,username:w.username,avatarUrl:w.avatarUrl,roleName:w.role||"user",bio:w.bio,email:p.email};return y.current&&s(v),v}else{console.warn(`No profile found for user ID: ${p.id}. Defaulting.`);const v={id:p.id,username:((g=p.email)==null?void 0:g.split("@")[0])||"Utilisateur",avatarUrl:null,roleName:"user",bio:"",email:p.email};return y.current&&s(v),v}}catch(w){if(console.error("Error fetching profile (AuthContext):",w.message),y!=null&&y.current){const v={id:p.id,username:"Erreur Profil",avatarUrl:null,roleName:"user",bio:"",email:p.email};s(v)}return null}finally{y!=null&&y.current&&i(!1)}},[]);m.useEffect(()=>{const p={current:!0};let y=null;return(async()=>{i(!0);try{const{data:{session:v},error:x}=await ie.auth.getSession();if(!p.current)return;if(x)throw x;v!=null&&v.user?(n(v.user),await a(v.user,p)):(n(null),s(null),i(!1))}catch(v){console.error("Error during auth check:",v),p.current&&(n(null),s(null),i(!1))}const{data:w}=ie.auth.onAuthStateChange(async(v,x)=>{p.current&&(v==="SIGNED_IN"&&(x!=null&&x.user)?(n(x.user),await a(x.user,p)):v==="SIGNED_OUT"?p.current&&(n(null),s(null)):v==="USER_UPDATED"&&(x!=null&&x.user)?(n(x.user),await a(x.user,p)):x!=null&&x.user?((t==null?void 0:t.id)!==x.user.id||!r||r.id!==x.user.id)&&(n(x.user),await a(x.user,p)):p.current&&(n(null),s(null)),p.current&&i(!1))});y=w==null?void 0:w.subscription})(),()=>{p.current=!1,y&&y.unsubscribe()}},[a]);const l=async p=>await vM(p),u=async p=>await yM(p),d=async()=>{await xM()},f=m.useCallback(async()=>{t&&await a(t,{current:!0})},[t,a]),h={user:t,profile:r,isAdmin:(r==null?void 0:r.roleName)==="admin",userRole:(r==null?void 0:r.roleName)||"user",loading:o,signIn:l,signUp:u,signOut:d,refreshProfile:f};return c.jsx(bS.Provider,{value:h,children:e})},Wt=()=>{const e=m.useContext(bS);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Wo="webtoon-images",mg=e=>{var t;return{...e,coverImageUrl:_t(Wo,e.cover_image_url),bannerImageUrl:_t(Wo,e.banner_image_url),chapterCount:((t=e.chapters)==null?void 0:t.length)||0,tags:e.tags||[],views:e.views||0,showPublicViews:e.show_public_views||!1}},Gu=async(e="",t=[],n=!1)=>{let r=ie.from("webtoons").select(`
      id, title, description, cover_image_url, banner_image_url, 
      is_banner, tags, views, show_public_views, chapters ( id )
    `).order("created_at",{ascending:!1});if(e){const i=`%${e}%`;r=r.or(`title.ilike.${i},description.ilike.${i}`)}t.length>0&&(r=r.contains("tags",t)),n&&(r=r.eq("is_banner",!0));const{data:s,error:o}=await r;if(o)throw console.error("Error fetching webtoons:",o.message),o;return(s||[]).map(mg)},qu=async e=>{await ie.from("webtoons").select("*, chapters (id, number, created_at, views)").eq("id",e).single()},$M=async e=>{let t=null,n=null;const r=e.id||crypto.randomUUID();if(e.coverImageFile){const o=e.coverImageFile,i=o.name.split(".").pop();t=`public/${r}/cover.${i}`,await Kc(o,t).catch(a=>{throw console.error("Cover upload failed:",a.message),new Error("Failed to upload cover image.")})}if(e.bannerImageFile){const o=e.bannerImageFile,i=o.name.split(".").pop();n=`public/${r}/banner.${i}`,await Kc(o,n).catch(a=>console.error("Banner image upload failed:",a.message))}const{error:s}=await ie.from("webtoons").insert({id:r,title:e.title,description:e.description,cover_image_url:t,tags:e.tags||[],is_banner:e.is_banner||!1,banner_image_url:n,show_public_views:e.show_public_views||!1,views:0});if(s)throw console.error("Error adding webtoon to DB:",s.message),t&&await En(Wo,t).catch(o=>console.error("Cover cleanup failed:",o.message)),n&&await En(Wo,n).catch(o=>console.error("Banner cleanup failed:",o.message)),s;return{id:r,...e}},IM=async(e,t)=>{let n=t.existingCoverPath,r=t.existingBannerPath,s=null,o=null;if(t.coverImageFile){const l=t.coverImageFile,u=l.name.split(".").pop(),d=`public/${e}/cover.${u}`;n&&d!==n&&(s=n),n=d,await Kc(l,n).catch(f=>{throw console.error("Cover update upload failed:",f.message),new Error("Failed to upload updated cover image.")})}else t.removeCover&&n&&(s=n,n=null);if(t.bannerImageFile){const l=t.bannerImageFile,u=l.name.split(".").pop(),d=`public/${e}/banner.${u}`;r&&d!==r&&(o=r),r=d,await Kc(l,r).catch(f=>console.error("Banner update upload failed:",f.message))}else t.removeBanner&&r&&(o=r,r=null);const i={title:t.title,description:t.description,cover_image_url:n,tags:t.tags||[],is_banner:t.is_banner||!1,banner_image_url:r};typeof t.show_public_views=="boolean"&&(i.show_public_views=t.show_public_views);const{error:a}=await ie.from("webtoons").update(i).eq("id",e);if(a)throw console.error("Error updating webtoon in DB:",a.message),a;s&&await En(Wo,s).catch(l=>console.error("Old cover cleanup failed:",l.message)),o&&await En(Wo,o).catch(l=>console.error("Old banner cleanup failed:",l.message))},DM=async e=>{await bM(e);const{error:t}=await ie.from("webtoons").delete().eq("id",e);if(t)throw console.error("Error deleting webtoon from DB:",t.message),t},OM=async(e,t)=>{if(!e)return!1;const{count:n,error:r}=await ie.from("user_favorites").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("webtoon_id",t);return r?(console.error("Error checking favorite:",r.message),!1):n>0},MM=async(e,t)=>{if(!e)throw new Error("User not logged in");const{error:n}=await ie.from("user_favorites").insert({user_id:e,webtoon_id:t});if(n)throw console.error("Error adding favorite:",n.message),n},LM=async(e,t)=>{if(!e)throw new Error("User not logged in");const{error:n}=await ie.from("user_favorites").delete().eq("user_id",e).eq("webtoon_id",t);if(n)throw console.error("Error removing favorite:",n.message),n},FM=async e=>{if(!e)return[];const{data:t,error:n}=await ie.from("user_favorites").select("webtoon:webtoons!inner (id, title, cover_image_url, banner_image_url, is_banner, tags, views, show_public_views, chapters ( id ))").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching user favorites:",n.message),n;return(t||[]).map(r=>mg(r.webtoon||{}))},zM=async()=>{const{data:e,error:t}=await ie.rpc("get_distinct_tags");return t?(console.error("Error fetching distinct tags:",t.message),[]):e||[]},UM=async(e,t)=>{if(!e||!t)return;const{error:n}=await ie.from("user_chapter_reads").upsert({user_id:e,chapter_id:t,read_at:new Date().toISOString()},{onConflict:"user_id, chapter_id"});n&&console.error("Error marking chapter as read:",n.message)},BM=async(e,t)=>{if(!e||!t)return[];const{data:n,error:r}=await ie.from("chapters").select("id").eq("webtoon_id",t);if(r||!n||n.length===0)return r&&console.error("Error fetching chapter IDs for webtoon:",r.message),[];const s=n.map(a=>a.id),{data:o,error:i}=await ie.from("user_chapter_reads").select("chapter_id").eq("user_id",e).in("chapter_id",s);return i?(console.error("Error fetching read chapters:",i.message),[]):(o||[]).map(a=>a.chapter_id)},VM=async()=>{const{count:e,error:t}=await ie.from("webtoons").select("id",{count:"exact",head:!0});if(t)throw console.error("Error fetching webtoon count:",t.message),t;if(e===0||!e)return null;const n=Math.floor(Math.random()*e),{data:r,error:s}=await ie.from("webtoons").select("id").limit(1).range(n,n);if(s)throw console.error("Error fetching random webtoon ID:",s.message),s;return r&&r.length>0?r[0].id:null},WM=async e=>{const{error:t}=await ie.rpc("increment_webtoon_view",{webtoon_id_param:e});t&&console.error("Error incrementing webtoon view:",t.message)},HM=async(e,t=5)=>{const{data:n,error:r}=await ie.from("webtoons").select("id, tags").eq("id",e).single();if(r||!n)return console.error("Error fetching current webtoon for similarity:",r==null?void 0:r.message),[];if(!n.tags||n.tags.length===0)return[];const{data:s,error:o}=await ie.from("webtoons").select("id, title, cover_image_url, tags, views, show_public_views, chapters(id)").neq("id",e).overlaps("tags",n.tags).order("views",{ascending:!1}).limit(t);return o?(console.error("Error fetching similar webtoons:",o.message),[]):(s||[]).map(mg)},KM=async(e,t)=>{const{data:n,error:r}=await ie.from("webtoons").update({show_public_views:t}).eq("id",e).select("id, show_public_views").single();if(r)throw console.error("Error updating show_public_views:",r.message),r;return n};var GM=Pa[" useId ".trim().toString()]||(()=>{}),qM=0;function js(e){const[t,n]=m.useState(GM());return hn(()=>{e||n(r=>r??String(qM++))},[e]),e||(t?`radix-${t}`:"")}var xf="focusScope.autoFocusOnMount",wf="focusScope.autoFocusOnUnmount",vx={bubbles:!1,cancelable:!0},XM="FocusScope",gg=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[a,l]=m.useState(null),u=Ut(s),d=Ut(o),f=m.useRef(null),h=$e(t,g=>l(g)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const _=b.target;a.contains(_)?f.current=_:jr(f.current,{select:!0})},w=function(b){if(p.paused||!a)return;const _=b.relatedTarget;_!==null&&(a.contains(_)||jr(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&jr(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),m.useEffect(()=>{if(a){xx.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(xf,vx);a.addEventListener(xf,u),a.dispatchEvent(v),v.defaultPrevented||(YM(tL(_S(a)),{select:!0}),document.activeElement===g&&jr(a))}return()=>{a.removeEventListener(xf,u),setTimeout(()=>{const v=new CustomEvent(wf,vx);a.addEventListener(wf,d),a.dispatchEvent(v),v.defaultPrevented||jr(g??document.body,{select:!0}),a.removeEventListener(wf,d),xx.remove(p)},0)}}},[a,u,d,p]);const y=m.useCallback(g=>{if(!n&&!r||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const x=g.currentTarget,[b,_]=ZM(x);b&&_?!g.shiftKey&&v===_?(g.preventDefault(),n&&jr(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&jr(_,{select:!0})):v===x&&g.preventDefault()}},[n,r,p.paused]);return c.jsx(we.div,{tabIndex:-1,...i,ref:h,onKeyDown:y})});gg.displayName=XM;function YM(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(jr(r,{select:t}),document.activeElement!==n)return}function ZM(e){const t=_S(e),n=yx(t,e),r=yx(t.reverse(),e);return[n,r]}function _S(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function yx(e,t){for(const n of e)if(!JM(n,{upTo:t}))return n}function JM(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function QM(e){return e instanceof HTMLInputElement&&"select"in e}function jr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&QM(e)&&t&&e.select()}}var xx=eL();function eL(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=wx(e,t),e.unshift(t)},remove(t){var n;e=wx(e,t),(n=e[0])==null||n.resume()}}}function wx(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function tL(e){return e.filter(t=>t.tagName!=="A")}var bf=0;function CS(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??bx()),document.body.insertAdjacentElement("beforeend",e[1]??bx()),bf++,()=>{bf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bf--}},[])}function bx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var xt=function(){return xt=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},xt.apply(this,arguments)};function vg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function SS(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Xi="right-scroll-bar-position",Yi="width-before-scroll-bar",nL="with-scroll-bars-hidden",rL="--removed-body-scroll-bar-size";function _f(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function sL(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var oL=typeof window<"u"?m.useLayoutEffect:m.useEffect,_x=new WeakMap;function ES(e,t){var n=sL(t||null,function(r){return e.forEach(function(s){return _f(s,r)})});return oL(function(){var r=_x.get(n);if(r){var s=new Set(r),o=new Set(e),i=n.current;s.forEach(function(a){o.has(a)||_f(a,null)}),o.forEach(function(a){s.has(a)||_f(a,i)})}_x.set(n,e)},[e]),n}function iL(e){return e}function aL(e,t){t===void 0&&(t=iL);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var l=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function kS(e){e===void 0&&(e={});var t=aL(null);return t.options=xt({async:!0,ssr:!1},e),t}var jS=function(e){var t=e.sideCar,n=vg(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,xt({},n))};jS.isSideCarExport=!0;function PS(e,t){return e.useMedium(t),jS}var NS=kS(),Cf=function(){},Xu=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:Cf,onWheelCapture:Cf,onTouchMoveCapture:Cf}),s=r[0],o=r[1],i=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,y=e.inert,g=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,x=e.gapMode,b=vg(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=ES([n,t]),N=xt(xt({},b),s);return m.createElement(m.Fragment,null,d&&m.createElement(_,{sideCar:NS,removeScrollBar:u,shards:f,noIsolation:p,inert:y,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:x}),i?m.cloneElement(m.Children.only(a),xt(xt({},N),{ref:S})):m.createElement(v,xt({},N,{className:l,ref:S}),a))});Xu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xu.classNames={fullWidth:Yi,zeroRight:Xi};var Cx,lL=function(){if(Cx)return Cx;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function cL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=lL();return t&&e.setAttribute("nonce",t),e}function uL(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function dL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var fL=function(){var e=0,t=null;return{add:function(n){e==0&&(t=cL())&&(uL(t,n),dL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hL=function(){var e=fL();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},yg=function(){var e=hL(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},pL={left:0,top:0,right:0,gap:0},Sf=function(e){return parseInt(e||"",10)||0},mL=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Sf(n),Sf(r),Sf(s)]},gL=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return pL;var t=mL(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},vL=yg(),jo="data-scroll-locked",yL=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(nL,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(jo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xi,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Yi,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xi," .").concat(Xi,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yi," .").concat(Yi,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(jo,`] {
    `).concat(rL,": ").concat(a,`px;
  }
`)},Sx=function(){var e=parseInt(document.body.getAttribute(jo)||"0",10);return isFinite(e)?e:0},xL=function(){m.useEffect(function(){return document.body.setAttribute(jo,(Sx()+1).toString()),function(){var e=Sx()-1;e<=0?document.body.removeAttribute(jo):document.body.setAttribute(jo,e.toString())}},[])},TS=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;xL();var o=m.useMemo(function(){return gL(s)},[s]);return m.createElement(vL,{styles:yL(o,!t,s,n?"":"!important")})},fp=!1;if(typeof window<"u")try{var Al=Object.defineProperty({},"passive",{get:function(){return fp=!0,!0}});window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{fp=!1}var Zs=fp?{passive:!1}:!1,wL=function(e){return e.tagName==="TEXTAREA"},AS=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!wL(e)&&n[t]==="visible")},bL=function(e){return AS(e,"overflowY")},_L=function(e){return AS(e,"overflowX")},Ex=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=RS(e,r);if(s){var o=$S(e,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},CL=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},SL=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},RS=function(e,t){return e==="v"?bL(t):_L(t)},$S=function(e,t){return e==="v"?CL(t):SL(t)},EL=function(e,t){return e==="h"&&t==="rtl"?-1:1},kL=function(e,t,n,r,s){var o=EL(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,l=t.contains(a),u=!1,d=i>0,f=0,h=0;do{var p=$S(e,a),y=p[0],g=p[1],w=p[2],v=g-w-o*y;(y||v)&&RS(e,a)&&(f+=v,h+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&(s&&Math.abs(f)<1||!s&&i>f)||!d&&(s&&Math.abs(h)<1||!s&&-i>h))&&(u=!0),u},Rl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kx=function(e){return[e.deltaX,e.deltaY]},jx=function(e){return e&&"current"in e?e.current:e},jL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},PL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},NL=0,Js=[];function TL(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(NL++)[0],o=m.useState(yg)[0],i=m.useRef(e);m.useEffect(function(){i.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=SS([e.lockRef.current],(e.shards||[]).map(jx),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=m.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var v=Rl(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-v[0],_="deltaY"in g?g.deltaY:x[1]-v[1],S,N=g.target,k=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&N.type==="range")return!1;var j=Ex(k,N);if(!j)return!0;if(j?S=k:(S=k==="v"?"h":"v",j=Ex(k,N)),!j)return!1;if(!r.current&&"changedTouches"in g&&(b||_)&&(r.current=S),!S)return!0;var T=r.current||S;return kL(T,w,g,T==="h"?b:_,!0)},[]),l=m.useCallback(function(g){var w=g;if(!(!Js.length||Js[Js.length-1]!==o)){var v="deltaY"in w?kx(w):Rl(w),x=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&jL(S.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(i.current.shards||[]).map(jx).filter(Boolean).filter(function(S){return S.contains(w.target)}),_=b.length>0?a(w,b[0]):!i.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(g,w,v,x){var b={name:g,delta:w,target:v,should:x,shadowParent:AL(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=m.useCallback(function(g){n.current=Rl(g),r.current=void 0},[]),f=m.useCallback(function(g){u(g.type,kx(g),g.target,a(g,e.lockRef.current))},[]),h=m.useCallback(function(g){u(g.type,Rl(g),g.target,a(g,e.lockRef.current))},[]);m.useEffect(function(){return Js.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Zs),document.addEventListener("touchmove",l,Zs),document.addEventListener("touchstart",d,Zs),function(){Js=Js.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,Zs),document.removeEventListener("touchmove",l,Zs),document.removeEventListener("touchstart",d,Zs)}},[]);var p=e.removeScrollBar,y=e.inert;return m.createElement(m.Fragment,null,y?m.createElement(o,{styles:PL(s)}):null,p?m.createElement(TS,{gapMode:e.gapMode}):null)}function AL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const RL=PS(NS,TL);var IS=m.forwardRef(function(e,t){return m.createElement(Xu,xt({},e,{ref:t,sideCar:RL}))});IS.classNames=Xu.classNames;const DS=IS;var $L=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qs=new WeakMap,$l=new WeakMap,Il={},Ef=0,OS=function(e){return e&&(e.host||OS(e.parentNode))},IL=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=OS(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},DL=function(e,t,n,r){var s=IL(t,Array.isArray(e)?e:[e]);Il[n]||(Il[n]=new WeakMap);var o=Il[n],i=[],a=new Set,l=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var p=h.getAttribute(r),y=p!==null&&p!=="false",g=(Qs.get(h)||0)+1,w=(o.get(h)||0)+1;Qs.set(h,g),o.set(h,w),i.push(h),g===1&&y&&$l.set(h,!0),w===1&&h.setAttribute(n,"true"),y||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return d(t),a.clear(),Ef++,function(){i.forEach(function(f){var h=Qs.get(f)-1,p=o.get(f)-1;Qs.set(f,h),o.set(f,p),h||($l.has(f)||f.removeAttribute(r),$l.delete(f)),p||f.removeAttribute(n)}),Ef--,Ef||(Qs=new WeakMap,Qs=new WeakMap,$l=new WeakMap,Il={})}},xg=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=t||$L(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),DL(r,s,n,"aria-hidden")):function(){return null}},Yu="Dialog",[MS,LS]=tn(Yu),[OL,Nn]=MS(Yu),FS=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,a=m.useRef(null),l=m.useRef(null),[u,d]=zs({prop:r,defaultProp:s??!1,onChange:o,caller:Yu});return c.jsx(OL,{scope:t,triggerRef:a,contentRef:l,contentId:js(),titleId:js(),descriptionId:js(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};FS.displayName=Yu;var zS="DialogTrigger",US=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Nn(zS,n),o=$e(t,s.triggerRef);return c.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_g(s.open),...r,ref:o,onClick:me(e.onClick,s.onOpenToggle)})});US.displayName=zS;var wg="DialogPortal",[ML,BS]=MS(wg,{forceMount:void 0}),VS=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=Nn(wg,t);return c.jsx(ML,{scope:t,forceMount:n,children:m.Children.map(r,i=>c.jsx(Pn,{present:n||o.open,children:c.jsx(Eu,{asChild:!0,container:s,children:i})}))})};VS.displayName=wg;var Gc="DialogOverlay",WS=m.forwardRef((e,t)=>{const n=BS(Gc,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Nn(Gc,e.__scopeDialog);return o.modal?c.jsx(Pn,{present:r||o.open,children:c.jsx(FL,{...s,ref:t})}):null});WS.displayName=Gc;var LL=Fo("DialogOverlay.RemoveScroll"),FL=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Nn(Gc,n);return c.jsx(DS,{as:LL,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(we.div,{"data-state":_g(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ds="DialogContent",HS=m.forwardRef((e,t)=>{const n=BS(Ds,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Nn(Ds,e.__scopeDialog);return c.jsx(Pn,{present:r||o.open,children:o.modal?c.jsx(zL,{...s,ref:t}):c.jsx(UL,{...s,ref:t})})});HS.displayName=Ds;var zL=m.forwardRef((e,t)=>{const n=Nn(Ds,e.__scopeDialog),r=m.useRef(null),s=$e(t,n.contentRef,r);return m.useEffect(()=>{const o=r.current;if(o)return xg(o)},[]),c.jsx(KS,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:me(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:me(e.onFocusOutside,o=>o.preventDefault())})}),UL=m.forwardRef((e,t)=>{const n=Nn(Ds,e.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return c.jsx(KS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),KS=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,a=Nn(Ds,n),l=m.useRef(null),u=$e(t,l);return CS(),c.jsxs(c.Fragment,{children:[c.jsx(gg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:c.jsx(Su,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":_g(a.open),...i,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(VL,{titleId:a.titleId}),c.jsx(HL,{contentRef:l,descriptionId:a.descriptionId})]})]})}),bg="DialogTitle",GS=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Nn(bg,n);return c.jsx(we.h2,{id:s.titleId,...r,ref:t})});GS.displayName=bg;var qS="DialogDescription",XS=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Nn(qS,n);return c.jsx(we.p,{id:s.descriptionId,...r,ref:t})});XS.displayName=qS;var YS="DialogClose",ZS=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Nn(YS,n);return c.jsx(we.button,{type:"button",...r,ref:t,onClick:me(e.onClick,()=>s.onOpenChange(!1))})});ZS.displayName=YS;function _g(e){return e?"open":"closed"}var JS="DialogTitleWarning",[BL,QS]=hR(JS,{contentName:Ds,titleName:bg,docsSlug:"dialog"}),VL=({titleId:e})=>{const t=QS(JS),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},WL="DialogDescriptionWarning",HL=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${QS(WL).contentName}}.`;return m.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},e2=FS,KL=US,t2=VS,Cg=WS,Sg=HS,Eg=GS,kg=XS,Zu=ZS;const jg=e2,GL=t2,n2=Zu,r2=ce.forwardRef(({className:e,...t},n)=>c.jsx(Cg,{ref:n,className:he("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));r2.displayName=Cg.displayName;const Ju=ce.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(GL,{children:[c.jsx(r2,{}),c.jsxs(Sg,{ref:r,className:he("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",e),...n,children:[t,c.jsxs(Zu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Sn,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ju.displayName=Sg.displayName;const Qu=({className:e,...t})=>c.jsx("div",{className:he("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Qu.displayName="DialogHeader";const ed=({className:e,...t})=>c.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ed.displayName="DialogFooter";const td=ce.forwardRef(({className:e,...t},n)=>c.jsx(Eg,{ref:n,className:he("text-lg font-semibold leading-none tracking-tight",e),...t}));td.displayName=Eg.displayName;const nd=ce.forwardRef(({className:e,...t},n)=>c.jsx(kg,{ref:n,className:he("text-sm text-muted-foreground",e),...t}));nd.displayName=kg.displayName;const qL="popups",XL=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(0),[s,o]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const u=await PM(),d=new Date,h=u.filter(p=>{const y=p.start_date?new Date(p.start_date):null,g=p.end_date?new Date(p.end_date):null,w=y?d>=y:!0,v=g?d<=g:!0;return w&&v}).map(p=>({...p,imageUrl:p.image_url?_t(qL,p.image_url):null})).filter(p=>!JSON.parse(localStorage.getItem("shownPopups")||"[]").includes(p.id));h.length>0&&(t(h),r(0),o(!0))}catch(u){console.error("Failed to fetch or filter popups:",u)}})()},[]);const i=()=>{if(e.length>0){const l=e[n].id,u=JSON.parse(localStorage.getItem("shownPopups")||"[]");u.includes(l)||localStorage.setItem("shownPopups",JSON.stringify([...u,l]))}n<e.length-1?r(l=>l+1):o(!1)};if(!s||e.length===0||n>=e.length)return null;const a=e[n];return c.jsx(ts,{children:s&&c.jsx(jg,{open:s,onOpenChange:l=>{l||i()},children:c.jsx(Ju,{className:"sm:max-w-md bg-card/90 backdrop-blur-lg border-border/70 shadow-2xl rounded-xl p-0 overflow-hidden",children:c.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3,ease:"easeOut"},children:[a.imageUrl&&c.jsx("div",{className:"w-full aspect-video bg-muted overflow-hidden",children:c.jsx("img",{src:a.imageUrl,alt:a.title||"Popup Image",className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs(Qu,{className:"text-left",children:[c.jsx(td,{className:"text-2xl font-bold text-foreground",children:a.title}),a.content&&c.jsx(nd,{className:"text-muted-foreground mt-2 text-base leading-relaxed",children:a.content})]}),c.jsxs(ed,{className:"flex flex-col sm:flex-row sm:justify-end gap-2 pt-4",children:[a.link_url&&a.link_text&&c.jsx(te,{variant:"default",size:"lg",asChild:!0,className:"bg-primary hover:bg-primary/90 text-primary-foreground flex-1 sm:flex-none",children:c.jsx("a",{href:a.link_url,target:"_blank",rel:"noopener noreferrer",children:a.link_text})}),c.jsx(te,{variant:"outline",size:"lg",onClick:i,className:"border-border/70 hover:bg-muted/50 flex-1 sm:flex-none",children:"Fermer"})]})]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:i,className:"absolute top-3 right-3 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/50","aria-label":"Fermer la pop-up",children:c.jsx(Sn,{className:"h-5 w-5"})})]})})})})};var YL=m.createContext(void 0);function rd(e){const t=m.useContext(YL);return e||t||"ltr"}const ZL=["top","right","bottom","left"],ns=Math.min,Gt=Math.max,qc=Math.round,Dl=Math.floor,zn=e=>({x:e,y:e}),JL={left:"right",right:"left",bottom:"top",top:"bottom"},QL={start:"end",end:"start"};function hp(e,t,n){return Gt(e,ns(t,n))}function cr(e,t){return typeof e=="function"?e(t):e}function ur(e){return e.split("-")[0]}function ni(e){return e.split("-")[1]}function Pg(e){return e==="x"?"y":"x"}function Ng(e){return e==="y"?"height":"width"}function rr(e){return["top","bottom"].includes(ur(e))?"y":"x"}function Tg(e){return Pg(rr(e))}function e6(e,t,n){n===void 0&&(n=!1);const r=ni(e),s=Tg(e),o=Ng(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Xc(i)),[i,Xc(i)]}function t6(e){const t=Xc(e);return[pp(e),t,pp(t)]}function pp(e){return e.replace(/start|end/g,t=>QL[t])}function n6(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:i;default:return[]}}function r6(e,t,n,r){const s=ni(e);let o=n6(ur(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(pp)))),o}function Xc(e){return e.replace(/left|right|bottom|top/g,t=>JL[t])}function s6(e){return{top:0,right:0,bottom:0,left:0,...e}}function s2(e){return typeof e!="number"?s6(e):{top:e,right:e,bottom:e,left:e}}function Yc(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Px(e,t,n){let{reference:r,floating:s}=e;const o=rr(t),i=Tg(t),a=Ng(i),l=ur(t),u=o==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(ni(t)){case"start":p[i]-=h*(n&&u?-1:1);break;case"end":p[i]+=h*(n&&u?-1:1);break}return p}const o6=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=Px(u,r,l),h=r,p={},y=0;for(let g=0;g<a.length;g++){const{name:w,fn:v}=a[g],{x,y:b,data:_,reset:S}=await v({x:d,y:f,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});d=x??d,f=b??f,p={...p,[w]:{...p[w],..._}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:f}=Px(u,h,l)),g=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function wa(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=cr(t,e),y=s2(p),w=a[h?f==="floating"?"reference":"floating":f],v=Yc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),x=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),_=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Yc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-S.top+y.top)/_.y,bottom:(S.bottom-v.bottom+y.bottom)/_.y,left:(v.left-S.left+y.left)/_.x,right:(S.right-v.right+y.right)/_.x}}const i6=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=cr(e,t)||{};if(u==null)return{};const f=s2(d),h={x:n,y:r},p=Tg(s),y=Ng(p),g=await i.getDimensions(u),w=p==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",_=o.reference[y]+o.reference[p]-h[p]-o.floating[y],S=h[p]-o.reference[p],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=N?N[b]:0;(!k||!await(i.isElement==null?void 0:i.isElement(N)))&&(k=a.floating[b]||o.floating[y]);const j=_/2-S/2,T=k/2-g[y]/2-1,M=ns(f[v],T),F=ns(f[x],T),P=M,L=k-g[y]-F,C=k/2-g[y]/2+j,O=hp(P,C,L),V=!l.arrow&&ni(s)!=null&&C!==O&&o.reference[y]/2-(C<P?M:F)-g[y]/2<0,B=V?C<P?C-P:C-L:0;return{[p]:h[p]+B,data:{[p]:O,centerOffset:C-O-B,...V&&{alignmentOffset:B}},reset:V}}}),a6=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=cr(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=ur(s),x=rr(a),b=ur(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=h||(b||!g?[Xc(a)]:t6(a)),N=y!=="none";!h&&N&&S.push(...r6(a,g,y,_));const k=[a,...S],j=await wa(t,w),T=[];let M=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&T.push(j[v]),f){const O=e6(s,i,_);T.push(j[O[0]],j[O[1]])}if(M=[...M,{placement:s,overflows:T}],!T.every(O=>O<=0)){var F,P;const O=(((F=o.flip)==null?void 0:F.index)||0)+1,V=k[O];if(V){var L;const z=f==="alignment"?x!==rr(V):!1,$=((L=M[0])==null?void 0:L.overflows[0])>0;if(!z||$)return{data:{index:O,overflows:M},reset:{placement:V}}}let B=(P=M.filter(z=>z.overflows[0]<=0).sort((z,$)=>z.overflows[1]-$.overflows[1])[0])==null?void 0:P.placement;if(!B)switch(p){case"bestFit":{var C;const z=(C=M.filter($=>{if(N){const W=rr($.placement);return W===x||W==="y"}return!0}).map($=>[$.placement,$.overflows.filter(W=>W>0).reduce((W,A)=>W+A,0)]).sort(($,W)=>$[1]-W[1])[0])==null?void 0:C[0];z&&(B=z);break}case"initialPlacement":B=a;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function Nx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Tx(e){return ZL.some(t=>e[t]>=0)}const l6=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=cr(e,t);switch(r){case"referenceHidden":{const o=await wa(t,{...s,elementContext:"reference"}),i=Nx(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Tx(i)}}}case"escaped":{const o=await wa(t,{...s,altBoundary:!0}),i=Nx(o,n.floating);return{data:{escapedOffsets:i,escaped:Tx(i)}}}default:return{}}}}};async function c6(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=ur(n),a=ni(n),l=rr(n)==="y",u=["left","top"].includes(i)?-1:1,d=o&&l?-1:1,f=cr(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const u6=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await c6(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},d6=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...l}=cr(e,t),u={x:n,y:r},d=await wa(t,l),f=rr(ur(s)),h=Pg(f);let p=u[h],y=u[f];if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+d[w],b=p-d[v];p=hp(x,p,b)}if(i){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=y+d[w],b=y-d[v];y=hp(x,y,b)}const g=a.fn({...t,[h]:p,[f]:y});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[f]:i}}}}}},f6=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=cr(e,t),d={x:n,y:r},f=rr(s),h=Pg(f);let p=d[h],y=d[f];const g=cr(a,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=h==="y"?"height":"width",_=o.reference[h]-o.floating[b]+w.mainAxis,S=o.reference[h]+o.reference[b]-w.mainAxis;p<_?p=_:p>S&&(p=S)}if(u){var v,x;const b=h==="y"?"width":"height",_=["top","left"].includes(ur(s)),S=o.reference[f]-o.floating[b]+(_&&((v=i.offset)==null?void 0:v[f])||0)+(_?0:w.crossAxis),N=o.reference[f]+o.reference[b]+(_?0:((x=i.offset)==null?void 0:x[f])||0)-(_?w.crossAxis:0);y<S?y=S:y>N&&(y=N)}return{[h]:p,[f]:y}}}},h6=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...u}=cr(e,t),d=await wa(t,u),f=ur(s),h=ni(s),p=rr(s)==="y",{width:y,height:g}=o.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=f,w=h==="end"?"top":"bottom");const x=g-d.top-d.bottom,b=y-d.left-d.right,_=ns(g-d[w],x),S=ns(y-d[v],b),N=!t.middlewareData.shift;let k=_,j=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=x),N&&!h){const M=Gt(d.left,0),F=Gt(d.right,0),P=Gt(d.top,0),L=Gt(d.bottom,0);p?j=y-2*(M!==0||F!==0?M+F:Gt(d.left,d.right)):k=g-2*(P!==0||L!==0?P+L:Gt(d.top,d.bottom))}await l({...t,availableWidth:j,availableHeight:k});const T=await i.getDimensions(a.floating);return y!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function sd(){return typeof window<"u"}function ri(e){return o2(e)?(e.nodeName||"").toLowerCase():"#document"}function Yt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Wn(e){var t;return(t=(o2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function o2(e){return sd()?e instanceof Node||e instanceof Yt(e).Node:!1}function kn(e){return sd()?e instanceof Element||e instanceof Yt(e).Element:!1}function Un(e){return sd()?e instanceof HTMLElement||e instanceof Yt(e).HTMLElement:!1}function Ax(e){return!sd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Yt(e).ShadowRoot}function Va(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=jn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function p6(e){return["table","td","th"].includes(ri(e))}function od(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ag(e){const t=Rg(),n=kn(e)?jn(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function m6(e){let t=rs(e);for(;Un(t)&&!Ho(t);){if(Ag(t))return t;if(od(t))return null;t=rs(t)}return null}function Rg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ho(e){return["html","body","#document"].includes(ri(e))}function jn(e){return Yt(e).getComputedStyle(e)}function id(e){return kn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rs(e){if(ri(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ax(e)&&e.host||Wn(e);return Ax(t)?t.host:t}function i2(e){const t=rs(e);return Ho(t)?e.ownerDocument?e.ownerDocument.body:e.body:Un(t)&&Va(t)?t:i2(t)}function ba(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=i2(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=Yt(s);if(o){const a=mp(i);return t.concat(i,i.visualViewport||[],Va(s)?s:[],a&&n?ba(a):[])}return t.concat(s,ba(s,[],n))}function mp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function a2(e){const t=jn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Un(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=qc(n)!==o||qc(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function $g(e){return kn(e)?e:e.contextElement}function Po(e){const t=$g(e);if(!Un(t))return zn(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=a2(t);let i=(o?qc(n.width):n.width)/r,a=(o?qc(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const g6=zn(0);function l2(e){const t=Yt(e);return!Rg()||!t.visualViewport?g6:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function v6(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Yt(e)?!1:t}function Os(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=$g(e);let i=zn(1);t&&(r?kn(r)&&(i=Po(r)):i=Po(e));const a=v6(o,n,r)?l2(o):zn(0);let l=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,d=s.width/i.x,f=s.height/i.y;if(o){const h=Yt(o),p=r&&kn(r)?Yt(r):r;let y=h,g=mp(y);for(;g&&r&&p!==y;){const w=Po(g),v=g.getBoundingClientRect(),x=jn(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,_=v.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,f*=w.y,l+=b,u+=_,y=Yt(g),g=mp(y)}}return Yc({width:d,height:f,x:l,y:u})}function Ig(e,t){const n=id(e).scrollLeft;return t?t.left+n:Os(Wn(e)).left+n}function c2(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Ig(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function y6(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=Wn(r),a=t?od(t.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=zn(1);const d=zn(0),f=Un(r);if((f||!f&&!o)&&((ri(r)!=="body"||Va(i))&&(l=id(r)),Un(r))){const p=Os(r);u=Po(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=i&&!f&&!o?c2(i,l,!0):zn(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-l.scrollTop*u.y+d.y+h.y}}function x6(e){return Array.from(e.getClientRects())}function w6(e){const t=Wn(e),n=id(e),r=e.ownerDocument.body,s=Gt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Gt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Ig(e);const a=-n.scrollTop;return jn(r).direction==="rtl"&&(i+=Gt(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function b6(e,t){const n=Yt(e),r=Wn(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const u=Rg();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}function _6(e,t){const n=Os(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Un(e)?Po(e):zn(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,u=r*o.y;return{width:i,height:a,x:l,y:u}}function Rx(e,t,n){let r;if(t==="viewport")r=b6(e,n);else if(t==="document")r=w6(Wn(e));else if(kn(t))r=_6(t,n);else{const s=l2(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Yc(r)}function u2(e,t){const n=rs(e);return n===t||!kn(n)||Ho(n)?!1:jn(n).position==="fixed"||u2(n,t)}function C6(e,t){const n=t.get(e);if(n)return n;let r=ba(e,[],!1).filter(a=>kn(a)&&ri(a)!=="body"),s=null;const o=jn(e).position==="fixed";let i=o?rs(e):e;for(;kn(i)&&!Ho(i);){const a=jn(i),l=Ag(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Va(i)&&!l&&u2(e,i))?r=r.filter(d=>d!==i):s=a,i=rs(i)}return t.set(e,r),r}function S6(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?od(t)?[]:C6(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((u,d)=>{const f=Rx(t,d,s);return u.top=Gt(f.top,u.top),u.right=ns(f.right,u.right),u.bottom=ns(f.bottom,u.bottom),u.left=Gt(f.left,u.left),u},Rx(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function E6(e){const{width:t,height:n}=a2(e);return{width:t,height:n}}function k6(e,t,n){const r=Un(t),s=Wn(t),o=n==="fixed",i=Os(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=zn(0);function u(){l.x=Ig(s)}if(r||!r&&!o)if((ri(t)!=="body"||Va(s))&&(a=id(t)),r){const p=Os(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else s&&u();o&&!r&&s&&u();const d=s&&!r&&!o?c2(s,a):zn(0),f=i.left+a.scrollLeft-l.x-d.x,h=i.top+a.scrollTop-l.y-d.y;return{x:f,y:h,width:i.width,height:i.height}}function kf(e){return jn(e).position==="static"}function $x(e,t){if(!Un(e)||jn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Wn(e)===n&&(n=n.ownerDocument.body),n}function d2(e,t){const n=Yt(e);if(od(e))return n;if(!Un(e)){let s=rs(e);for(;s&&!Ho(s);){if(kn(s)&&!kf(s))return s;s=rs(s)}return n}let r=$x(e,t);for(;r&&p6(r)&&kf(r);)r=$x(r,t);return r&&Ho(r)&&kf(r)&&!Ag(r)?n:r||m6(e)||n}const j6=async function(e){const t=this.getOffsetParent||d2,n=this.getDimensions,r=await n(e.floating);return{reference:k6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function P6(e){return jn(e).direction==="rtl"}const N6={convertOffsetParentRelativeRectToViewportRelativeRect:y6,getDocumentElement:Wn,getClippingRect:S6,getOffsetParent:d2,getElementRects:j6,getClientRects:x6,getDimensions:E6,getScale:Po,isElement:kn,isRTL:P6};function f2(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function T6(e,t){let n=null,r;const s=Wn(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(a||t(),!h||!p)return;const y=Dl(f),g=Dl(s.clientWidth-(d+h)),w=Dl(s.clientHeight-(f+p)),v=Dl(d),b={rootMargin:-y+"px "+-g+"px "+-w+"px "+-v+"px",threshold:Gt(0,ns(1,l))||1};let _=!0;function S(N){const k=N[0].intersectionRatio;if(k!==l){if(!_)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!f2(u,e.getBoundingClientRect())&&i(),_=!1}try{n=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return i(!0),o}function Dg(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=$g(e),d=s||o?[...u?ba(u):[],...ba(t)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const f=u&&a?T6(u,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),u&&!l&&p.observe(u),p.observe(t));let y,g=l?Os(e):null;l&&w();function w(){const v=Os(e);g&&!f2(g,v)&&n(),g=v,y=requestAnimationFrame(w)}return n(),()=>{var v;d.forEach(x=>{s&&x.removeEventListener("scroll",n),o&&x.removeEventListener("resize",n)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const A6=u6,R6=d6,$6=a6,I6=h6,D6=l6,Ix=i6,O6=f6,M6=(e,t,n)=>{const r=new Map,s={platform:N6,...n},o={...s.platform,_c:r};return o6(e,t,{...s,platform:o})};var rc=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Zc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Zc(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Zc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function h2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Dx(e,t){const n=h2(e);return Math.round(t*n)/n}function jf(e){const t=m.useRef(e);return rc(()=>{t.current=e}),t}function Og(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[d,f]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=m.useState(r);Zc(h,r)||p(r);const[y,g]=m.useState(null),[w,v]=m.useState(null),x=m.useCallback(z=>{z!==N.current&&(N.current=z,g(z))},[]),b=m.useCallback(z=>{z!==k.current&&(k.current=z,v(z))},[]),_=o||y,S=i||w,N=m.useRef(null),k=m.useRef(null),j=m.useRef(d),T=l!=null,M=jf(l),F=jf(s),P=jf(u),L=m.useCallback(()=>{if(!N.current||!k.current)return;const z={placement:t,strategy:n,middleware:h};F.current&&(z.platform=F.current),M6(N.current,k.current,z).then($=>{const W={...$,isPositioned:P.current!==!1};C.current&&!Zc(j.current,W)&&(j.current=W,Bn.flushSync(()=>{f(W)}))})},[h,t,n,F,P]);rc(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[u]);const C=m.useRef(!1);rc(()=>(C.current=!0,()=>{C.current=!1}),[]),rc(()=>{if(_&&(N.current=_),S&&(k.current=S),_&&S){if(M.current)return M.current(_,S,L);L()}},[_,S,L,M,T]);const O=m.useMemo(()=>({reference:N,floating:k,setReference:x,setFloating:b}),[x,b]),V=m.useMemo(()=>({reference:_,floating:S}),[_,S]),B=m.useMemo(()=>{const z={position:n,left:0,top:0};if(!V.floating)return z;const $=Dx(V.floating,d.x),W=Dx(V.floating,d.y);return a?{...z,transform:"translate("+$+"px, "+W+"px)",...h2(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:W}},[n,a,V.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:L,refs:O,elements:V,floatingStyles:B}),[d,L,O,V,B])}const L6=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ix({element:r.current,padding:s}).fn(n):{}:r?Ix({element:r,padding:s}).fn(n):{}}}},Mg=(e,t)=>({...A6(e),options:[e,t]}),Lg=(e,t)=>({...R6(e),options:[e,t]}),Fg=(e,t)=>({...O6(e),options:[e,t]}),zg=(e,t)=>({...$6(e),options:[e,t]}),Ug=(e,t)=>({...I6(e),options:[e,t]}),Bg=(e,t)=>({...D6(e),options:[e,t]}),Vg=(e,t)=>({...L6(e),options:[e,t]});var F6="Arrow",p2=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return c.jsx(we.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});p2.displayName=F6;var z6=p2;function Wg(e){const[t,n]=m.useState(void 0);return hn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,a=u.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Hg="Popper",[m2,g2]=tn(Hg),[U6,v2]=m2(Hg),y2=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return c.jsx(U6,{scope:t,anchor:r,onAnchorChange:s,children:n})};y2.displayName=Hg;var x2="PopperAnchor",w2=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=v2(x2,n),i=m.useRef(null),a=$e(t,i);return m.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:c.jsx(we.div,{...s,ref:a})});w2.displayName=x2;var Kg="PopperContent",[B6,V6]=m2(Kg),b2=m.forwardRef((e,t)=>{var J,re,ae,le,ue,ye;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:y,...g}=e,w=v2(Kg,n),[v,x]=m.useState(null),b=$e(t,ke=>x(ke)),[_,S]=m.useState(null),N=Wg(_),k=(N==null?void 0:N.width)??0,j=(N==null?void 0:N.height)??0,T=r+(o!=="center"?"-"+o:""),M=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},F=Array.isArray(u)?u:[u],P=F.length>0,L={padding:M,boundary:F.filter(H6),altBoundary:P},{refs:C,floatingStyles:O,placement:V,isPositioned:B,middlewareData:z}=Og({strategy:"fixed",placement:T,whileElementsMounted:(...ke)=>Dg(...ke,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[Mg({mainAxis:s+j,alignmentAxis:i}),l&&Lg({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Fg():void 0,...L}),l&&zg({...L}),Ug({...L,apply:({elements:ke,rects:E,availableWidth:q,availableHeight:G})=>{const{width:I,height:R}=E.reference,U=ke.floating.style;U.setProperty("--radix-popper-available-width",`${q}px`),U.setProperty("--radix-popper-available-height",`${G}px`),U.setProperty("--radix-popper-anchor-width",`${I}px`),U.setProperty("--radix-popper-anchor-height",`${R}px`)}}),_&&Vg({element:_,padding:a}),K6({arrowWidth:k,arrowHeight:j}),h&&Bg({strategy:"referenceHidden",...L})]}),[$,W]=S2(V),A=Ut(y);hn(()=>{B&&(A==null||A())},[B,A]);const D=(J=z.arrow)==null?void 0:J.x,X=(re=z.arrow)==null?void 0:re.y,Y=((ae=z.arrow)==null?void 0:ae.centerOffset)!==0,[H,Z]=m.useState();return hn(()=>{v&&Z(window.getComputedStyle(v).zIndex)},[v]),c.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:B?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(le=z.transformOrigin)==null?void 0:le.x,(ue=z.transformOrigin)==null?void 0:ue.y].join(" "),...((ye=z.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(B6,{scope:n,placedSide:$,onArrowChange:S,arrowX:D,arrowY:X,shouldHideArrow:Y,children:c.jsx(we.div,{"data-side":$,"data-align":W,...g,ref:b,style:{...g.style,animation:B?void 0:"none"}})})})});b2.displayName=Kg;var _2="PopperArrow",W6={top:"bottom",right:"left",bottom:"top",left:"right"},C2=m.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=V6(_2,r),i=W6[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(z6,{...s,ref:n,style:{...s.style,display:"block"}})})});C2.displayName=_2;function H6(e){return e!==null}var K6=e=>({name:"transformOrigin",options:e,fn(t){var w,v,x;const{placement:n,rects:r,middlewareData:s}=t,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[u,d]=S2(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let y="",g="";return u==="bottom"?(y=i?f:`${h}px`,g=`${-l}px`):u==="top"?(y=i?f:`${h}px`,g=`${r.floating.height+l}px`):u==="right"?(y=`${-l}px`,g=i?f:`${p}px`):u==="left"&&(y=`${r.floating.width+l}px`,g=i?f:`${p}px`),{data:{x:y,y:g}}}});function S2(e){const[t,n="center"]=e.split("-");return[t,n]}var G6=y2,q6=w2,X6=b2,Y6=C2,Pf="rovingFocusGroup.onEntryFocus",Z6={bubbles:!1,cancelable:!0},Wa="RovingFocusGroup",[gp,E2,J6]=Cu(Wa),[Q6,ad]=tn(Wa,[J6]),[eF,tF]=Q6(Wa),k2=m.forwardRef((e,t)=>c.jsx(gp.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(gp.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(nF,{...e,ref:t})})}));k2.displayName=Wa;var nF=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=m.useRef(null),p=$e(t,h),y=rd(o),[g,w]=zs({prop:i,defaultProp:a??null,onChange:l,caller:Wa}),[v,x]=m.useState(!1),b=Ut(u),_=E2(n),S=m.useRef(!1),[N,k]=m.useState(0);return m.useEffect(()=>{const j=h.current;if(j)return j.addEventListener(Pf,b),()=>j.removeEventListener(Pf,b)},[b]),c.jsx(eF,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:m.useCallback(j=>w(j),[w]),onItemShiftTab:m.useCallback(()=>x(!0),[]),onFocusableItemAdd:m.useCallback(()=>k(j=>j+1),[]),onFocusableItemRemove:m.useCallback(()=>k(j=>j-1),[]),children:c.jsx(we.div,{tabIndex:v||N===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:me(e.onMouseDown,()=>{S.current=!0}),onFocus:me(e.onFocus,j=>{const T=!S.current;if(j.target===j.currentTarget&&T&&!v){const M=new CustomEvent(Pf,Z6);if(j.currentTarget.dispatchEvent(M),!M.defaultPrevented){const F=_().filter(V=>V.focusable),P=F.find(V=>V.active),L=F.find(V=>V.id===g),O=[P,L,...F].filter(Boolean).map(V=>V.ref.current);N2(O,d)}}S.current=!1}),onBlur:me(e.onBlur,()=>x(!1))})})}),j2="RovingFocusGroupItem",P2=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:i,...a}=e,l=js(),u=o||l,d=tF(j2,n),f=d.currentTabStopId===u,h=E2(n),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:g}=d;return m.useEffect(()=>{if(r)return p(),()=>y()},[r,p,y]),c.jsx(gp.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:c.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...a,ref:t,onMouseDown:me(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:me(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:me(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=oF(w,d.orientation,d.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=h().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const _=b.indexOf(w.currentTarget);b=d.loop?iF(b,_+1):b.slice(_+1)}setTimeout(()=>N2(b))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:g!=null}):i})})});P2.displayName=j2;var rF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sF(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oF(e,t,n){const r=sF(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rF[r]}function N2(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function iF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var T2=k2,A2=P2,vp=["Enter"," "],aF=["ArrowDown","PageUp","Home"],R2=["ArrowUp","PageDown","End"],lF=[...aF,...R2],cF={ltr:[...vp,"ArrowRight"],rtl:[...vp,"ArrowLeft"]},uF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ha="Menu",[_a,dF,fF]=Cu(Ha),[Ws,$2]=tn(Ha,[fF,g2,ad]),ld=g2(),I2=ad(),[hF,Hs]=Ws(Ha),[pF,Ka]=Ws(Ha),D2=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=e,a=ld(t),[l,u]=m.useState(null),d=m.useRef(!1),f=Ut(o),h=rd(s);return m.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),c.jsx(G6,{...a,children:c.jsx(hF,{scope:t,open:n,onOpenChange:f,content:l,onContentChange:u,children:c.jsx(pF,{scope:t,onClose:m.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:i,children:r})})})};D2.displayName=Ha;var mF="MenuAnchor",Gg=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ld(n);return c.jsx(q6,{...s,...r,ref:t})});Gg.displayName=mF;var qg="MenuPortal",[gF,O2]=Ws(qg,{forceMount:void 0}),M2=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=Hs(qg,t);return c.jsx(gF,{scope:t,forceMount:n,children:c.jsx(Pn,{present:n||o.open,children:c.jsx(Eu,{asChild:!0,container:s,children:r})})})};M2.displayName=qg;var un="MenuContent",[vF,Xg]=Ws(un),L2=m.forwardRef((e,t)=>{const n=O2(un,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Hs(un,e.__scopeMenu),i=Ka(un,e.__scopeMenu);return c.jsx(_a.Provider,{scope:e.__scopeMenu,children:c.jsx(Pn,{present:r||o.open,children:c.jsx(_a.Slot,{scope:e.__scopeMenu,children:i.modal?c.jsx(yF,{...s,ref:t}):c.jsx(xF,{...s,ref:t})})})})}),yF=m.forwardRef((e,t)=>{const n=Hs(un,e.__scopeMenu),r=m.useRef(null),s=$e(t,r);return m.useEffect(()=>{const o=r.current;if(o)return xg(o)},[]),c.jsx(Yg,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:me(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),xF=m.forwardRef((e,t)=>{const n=Hs(un,e.__scopeMenu);return c.jsx(Yg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),wF=Fo("MenuContent.ScrollLock"),Yg=m.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:y,...g}=e,w=Hs(un,n),v=Ka(un,n),x=ld(n),b=I2(n),_=dF(n),[S,N]=m.useState(null),k=m.useRef(null),j=$e(t,k,w.onContentChange),T=m.useRef(0),M=m.useRef(""),F=m.useRef(0),P=m.useRef(null),L=m.useRef("right"),C=m.useRef(0),O=y?DS:m.Fragment,V=y?{as:wF,allowPinchZoom:!0}:void 0,B=$=>{var J,re;const W=M.current+$,A=_().filter(ae=>!ae.disabled),D=document.activeElement,X=(J=A.find(ae=>ae.ref.current===D))==null?void 0:J.textValue,Y=A.map(ae=>ae.textValue),H=RF(Y,W,X),Z=(re=A.find(ae=>ae.textValue===H))==null?void 0:re.ref.current;(function ae(le){M.current=le,window.clearTimeout(T.current),le!==""&&(T.current=window.setTimeout(()=>ae(""),1e3))})(W),Z&&setTimeout(()=>Z.focus())};m.useEffect(()=>()=>window.clearTimeout(T.current),[]),CS();const z=m.useCallback($=>{var A,D;return L.current===((A=P.current)==null?void 0:A.side)&&IF($,(D=P.current)==null?void 0:D.area)},[]);return c.jsx(vF,{scope:n,searchRef:M,onItemEnter:m.useCallback($=>{z($)&&$.preventDefault()},[z]),onItemLeave:m.useCallback($=>{var W;z($)||((W=k.current)==null||W.focus(),N(null))},[z]),onTriggerLeave:m.useCallback($=>{z($)&&$.preventDefault()},[z]),pointerGraceTimerRef:F,onPointerGraceIntentChange:m.useCallback($=>{P.current=$},[]),children:c.jsx(O,{...V,children:c.jsx(gg,{asChild:!0,trapped:s,onMountAutoFocus:me(o,$=>{var W;$.preventDefault(),(W=k.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:c.jsx(Su,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:c.jsx(T2,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:N,onEntryFocus:me(l,$=>{v.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(X6,{role:"menu","aria-orientation":"vertical","data-state":eE(w.open),"data-radix-menu-content":"",dir:v.dir,...x,...g,ref:j,style:{outline:"none",...g.style},onKeyDown:me(g.onKeyDown,$=>{const A=$.target.closest("[data-radix-menu-content]")===$.currentTarget,D=$.ctrlKey||$.altKey||$.metaKey,X=$.key.length===1;A&&($.key==="Tab"&&$.preventDefault(),!D&&X&&B($.key));const Y=k.current;if($.target!==Y||!lF.includes($.key))return;$.preventDefault();const Z=_().filter(J=>!J.disabled).map(J=>J.ref.current);R2.includes($.key)&&Z.reverse(),TF(Z)}),onBlur:me(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(T.current),M.current="")}),onPointerMove:me(e.onPointerMove,Ca($=>{const W=$.target,A=C.current!==$.clientX;if($.currentTarget.contains(W)&&A){const D=$.clientX>C.current?"right":"left";L.current=D,C.current=$.clientX}}))})})})})})})});L2.displayName=un;var bF="MenuGroup",Zg=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return c.jsx(we.div,{role:"group",...r,ref:t})});Zg.displayName=bF;var _F="MenuLabel",F2=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return c.jsx(we.div,{...r,ref:t})});F2.displayName=_F;var Jc="MenuItem",Ox="menu.itemSelect",cd=m.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=m.useRef(null),i=Ka(Jc,e.__scopeMenu),a=Xg(Jc,e.__scopeMenu),l=$e(t,o),u=m.useRef(!1),d=()=>{const f=o.current;if(!n&&f){const h=new CustomEvent(Ox,{bubbles:!0,cancelable:!0});f.addEventListener(Ox,p=>r==null?void 0:r(p),{once:!0}),Nm(f,h),h.defaultPrevented?u.current=!1:i.onClose()}};return c.jsx(z2,{...s,ref:l,disabled:n,onClick:me(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:me(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:me(e.onKeyDown,f=>{const h=a.searchRef.current!=="";n||h&&f.key===" "||vp.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});cd.displayName=Jc;var z2=m.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,i=Xg(Jc,n),a=I2(n),l=m.useRef(null),u=$e(t,l),[d,f]=m.useState(!1),[h,p]=m.useState("");return m.useEffect(()=>{const y=l.current;y&&p((y.textContent??"").trim())},[o.children]),c.jsx(_a.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:c.jsx(A2,{asChild:!0,...a,focusable:!r,children:c.jsx(we.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:me(e.onPointerMove,Ca(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(e.onPointerLeave,Ca(y=>i.onItemLeave(y))),onFocus:me(e.onFocus,()=>f(!0)),onBlur:me(e.onBlur,()=>f(!1))})})})}),CF="MenuCheckboxItem",U2=m.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return c.jsx(K2,{scope:e.__scopeMenu,checked:n,children:c.jsx(cd,{role:"menuitemcheckbox","aria-checked":Qc(n)?"mixed":n,...s,ref:t,"data-state":Qg(n),onSelect:me(s.onSelect,()=>r==null?void 0:r(Qc(n)?!0:!n),{checkForDefaultPrevented:!1})})})});U2.displayName=CF;var B2="MenuRadioGroup",[SF,EF]=Ws(B2,{value:void 0,onValueChange:()=>{}}),V2=m.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=Ut(r);return c.jsx(SF,{scope:e.__scopeMenu,value:n,onValueChange:o,children:c.jsx(Zg,{...s,ref:t})})});V2.displayName=B2;var W2="MenuRadioItem",H2=m.forwardRef((e,t)=>{const{value:n,...r}=e,s=EF(W2,e.__scopeMenu),o=n===s.value;return c.jsx(K2,{scope:e.__scopeMenu,checked:o,children:c.jsx(cd,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":Qg(o),onSelect:me(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});H2.displayName=W2;var Jg="MenuItemIndicator",[K2,kF]=Ws(Jg,{checked:!1}),G2=m.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=kF(Jg,n);return c.jsx(Pn,{present:r||Qc(o.checked)||o.checked===!0,children:c.jsx(we.span,{...s,ref:t,"data-state":Qg(o.checked)})})});G2.displayName=Jg;var jF="MenuSeparator",q2=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return c.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});q2.displayName=jF;var PF="MenuArrow",X2=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=ld(n);return c.jsx(Y6,{...s,...r,ref:t})});X2.displayName=PF;var NF="MenuSub",[cW,Y2]=Ws(NF),Ri="MenuSubTrigger",Z2=m.forwardRef((e,t)=>{const n=Hs(Ri,e.__scopeMenu),r=Ka(Ri,e.__scopeMenu),s=Y2(Ri,e.__scopeMenu),o=Xg(Ri,e.__scopeMenu),i=m.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,u={__scopeMenu:e.__scopeMenu},d=m.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return m.useEffect(()=>d,[d]),m.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),c.jsx(Gg,{asChild:!0,...u,children:c.jsx(z2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":eE(n.open),...e,ref:_u(t,s.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:me(e.onPointerMove,Ca(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:me(e.onPointerLeave,Ca(f=>{var p,y;d();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const g=(y=n.content)==null?void 0:y.dataset.side,w=g==="right",v=w?-5:5,x=h[w?"left":"right"],b=h[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+v,y:f.clientY},{x,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:me(e.onKeyDown,f=>{var p;const h=o.searchRef.current!=="";e.disabled||h&&f.key===" "||cF[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});Z2.displayName=Ri;var J2="MenuSubContent",Q2=m.forwardRef((e,t)=>{const n=O2(un,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Hs(un,e.__scopeMenu),i=Ka(un,e.__scopeMenu),a=Y2(J2,e.__scopeMenu),l=m.useRef(null),u=$e(t,l);return c.jsx(_a.Provider,{scope:e.__scopeMenu,children:c.jsx(Pn,{present:r||o.open,children:c.jsx(_a.Slot,{scope:e.__scopeMenu,children:c.jsx(Yg,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:me(e.onFocusOutside,d=>{d.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:me(e.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:me(e.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),h=uF[i.dir].includes(d.key);f&&h&&(o.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});Q2.displayName=J2;function eE(e){return e?"open":"closed"}function Qc(e){return e==="indeterminate"}function Qg(e){return Qc(e)?"indeterminate":e?"checked":"unchecked"}function TF(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function AF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function RF(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=AF(e,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==n));const l=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function $F(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o],l=t[i],u=a.x,d=a.y,f=l.x,h=l.y;d>r!=h>r&&n<(f-u)*(r-d)/(h-d)+u&&(s=!s)}return s}function IF(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return $F(n,t)}function Ca(e){return t=>t.pointerType==="mouse"?e(t):void 0}var DF=D2,OF=Gg,MF=M2,LF=L2,FF=Zg,zF=F2,UF=cd,BF=U2,VF=V2,WF=H2,HF=G2,KF=q2,GF=X2,qF=Z2,XF=Q2,ud="DropdownMenu",[YF,uW]=tn(ud,[$2]),$t=$2(),[ZF,tE]=YF(ud),nE=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=e,l=$t(t),u=m.useRef(null),[d,f]=zs({prop:s,defaultProp:o??!1,onChange:i,caller:ud});return c.jsx(ZF,{scope:t,triggerId:js(),triggerRef:u,contentId:js(),open:d,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(h=>!h),[f]),modal:a,children:c.jsx(DF,{...l,open:d,onOpenChange:f,dir:r,modal:a,children:n})})};nE.displayName=ud;var rE="DropdownMenuTrigger",sE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=tE(rE,n),i=$t(n);return c.jsx(OF,{asChild:!0,...i,children:c.jsx(we.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:_u(t,o.triggerRef),onPointerDown:me(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:me(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});sE.displayName=rE;var JF="DropdownMenuPortal",oE=e=>{const{__scopeDropdownMenu:t,...n}=e,r=$t(t);return c.jsx(MF,{...r,...n})};oE.displayName=JF;var iE="DropdownMenuContent",aE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=tE(iE,n),o=$t(n),i=m.useRef(!1);return c.jsx(LF,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:me(e.onCloseAutoFocus,a=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:me(e.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aE.displayName=iE;var QF="DropdownMenuGroup",e8=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(FF,{...s,...r,ref:t})});e8.displayName=QF;var t8="DropdownMenuLabel",lE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(zF,{...s,...r,ref:t})});lE.displayName=t8;var n8="DropdownMenuItem",cE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(UF,{...s,...r,ref:t})});cE.displayName=n8;var r8="DropdownMenuCheckboxItem",uE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(BF,{...s,...r,ref:t})});uE.displayName=r8;var s8="DropdownMenuRadioGroup",dE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(VF,{...s,...r,ref:t})});dE.displayName=s8;var o8="DropdownMenuRadioItem",fE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(WF,{...s,...r,ref:t})});fE.displayName=o8;var i8="DropdownMenuItemIndicator",hE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(HF,{...s,...r,ref:t})});hE.displayName=i8;var a8="DropdownMenuSeparator",pE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(KF,{...s,...r,ref:t})});pE.displayName=a8;var l8="DropdownMenuArrow",c8=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(GF,{...s,...r,ref:t})});c8.displayName=l8;var u8="DropdownMenuSubTrigger",mE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(qF,{...s,...r,ref:t})});mE.displayName=u8;var d8="DropdownMenuSubContent",gE=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$t(n);return c.jsx(XF,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gE.displayName=d8;var f8=nE,h8=sE,p8=oE,vE=aE,yE=lE,xE=cE,wE=uE,m8=dE,bE=fE,_E=hE,CE=pE,SE=mE,EE=gE;const kE=f8,jE=h8,g8=m8,v8=ce.forwardRef(({className:e,inset:t,children:n,...r},s)=>c.jsxs(SE,{ref:s,className:he("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,c.jsx(Om,{className:"ml-auto h-4 w-4"})]}));v8.displayName=SE.displayName;const y8=ce.forwardRef(({className:e,...t},n)=>c.jsx(EE,{ref:n,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));y8.displayName=EE.displayName;const ev=ce.forwardRef(({className:e,sideOffset:t=4,...n},r)=>c.jsx(p8,{children:c.jsx(vE,{ref:r,sideOffset:t,className:he("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ev.displayName=vE.displayName;const sc=ce.forwardRef(({className:e,inset:t,...n},r)=>c.jsx(xE,{ref:r,className:he("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));sc.displayName=xE.displayName;const x8=ce.forwardRef(({className:e,children:t,checked:n,...r},s)=>c.jsxs(wE,{ref:s,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(_E,{children:c.jsx(Dm,{className:"h-4 w-4"})})}),t]}));x8.displayName=wE.displayName;const yp=ce.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(bE,{ref:r,className:he("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(_E,{children:c.jsx(f$,{className:"h-2 w-2 fill-current"})})}),t]}));yp.displayName=bE.displayName;const tv=ce.forwardRef(({className:e,inset:t,...n},r)=>c.jsx(yE,{ref:r,className:he("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));tv.displayName=yE.displayName;const Sa=ce.forwardRef(({className:e,...t},n)=>c.jsx(CE,{ref:n,className:he("-mx-1 my-1 h-px bg-muted",e),...t}));Sa.displayName=CE.displayName;const w8=async e=>{if(!e)return[];const{data:t,error:n}=await ie.from("notifications").select("id, message, created_at, webtoon_id, chapter_id, webtoons (title, cover_image_url)").eq("user_id",e).eq("is_read",!1).order("created_at",{ascending:!1}).limit(10);if(n)throw console.error("Error fetching unread notifications:",n.message),n;return t||[]},b8=async e=>{const{error:t}=await ie.from("notifications").update({is_read:!0}).eq("id",e);if(t)throw console.error("Error marking notification as read:",t.message),t;return!0},_8=async e=>{if(!e)return!1;const{error:t}=await ie.from("notifications").update({is_read:!0}).eq("user_id",e).eq("is_read",!1);if(t)throw console.error("Error marking all notifications as read:",t.message),t;return!0},C8=async e=>{if(!e)return{count:0};const{count:t,error:n}=await ie.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("is_read",!1);return n?(console.error("Error fetching notification count:",n.message),{count:0}):{count:t||0}};function ft(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function S8(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Ol=43200,Mx=1440;let E8={};function k8(){return E8}function Lx(e){const t=ft(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function oc(e,t){const n=ft(e),r=ft(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function j8(e){return S8(e,Date.now())}function P8(e,t){const n=ft(e),r=ft(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function N8(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function T8(e,t){return+ft(e)-+ft(t)}function A8(e){const t=ft(e);return t.setHours(23,59,59,999),t}function R8(e){const t=ft(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function $8(e){const t=ft(e);return+A8(t)==+R8(t)}function I8(e,t){const n=ft(e),r=ft(t),s=oc(n,r),o=Math.abs(P8(n,r));let i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*o);let a=oc(n,r)===-s;$8(ft(e))&&o===1&&oc(e,r)===1&&(a=!1),i=s*(o-Number(a))}return i===0?0:i}function D8(e,t,n){const r=T8(e,t)/1e3;return N8(n==null?void 0:n.roundingMethod)(r)}const O8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M8=(e,t,n)=>{let r;const s=O8[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function No(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const L8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},F8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},z8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U8={date:No({formats:L8,defaultWidth:"full"}),time:No({formats:F8,defaultWidth:"full"}),dateTime:No({formats:z8,defaultWidth:"full"})},B8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V8=(e,t,n,r)=>B8[e];function Dn(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{const i=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const W8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},H8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},G8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},q8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},X8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Y8=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Z8={ordinalNumber:Y8,era:Dn({values:W8,defaultWidth:"wide"}),quarter:Dn({values:H8,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dn({values:K8,defaultWidth:"wide"}),day:Dn({values:G8,defaultWidth:"wide"}),dayPeriod:Dn({values:q8,defaultWidth:"wide",formattingValues:X8,defaultFormattingWidth:"wide"})};function On(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const i=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?Q8(a,f=>f.test(i)):J8(a,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function J8(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Q8(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function PE(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const a=t.slice(s.length);return{value:i,rest:a}}}const ez=/^(\d+)(th|st|nd|rd)?/i,tz=/\d+/i,nz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rz={any:[/^b/i,/^(a|c)/i]},sz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oz={any:[/1/i,/2/i,/3/i,/4/i]},iz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},az={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fz={ordinalNumber:PE({matchPattern:ez,parsePattern:tz,valueCallback:e=>parseInt(e,10)}),era:On({matchPatterns:nz,defaultMatchWidth:"wide",parsePatterns:rz,defaultParseWidth:"any"}),quarter:On({matchPatterns:sz,defaultMatchWidth:"wide",parsePatterns:oz,defaultParseWidth:"any",valueCallback:e=>e+1}),month:On({matchPatterns:iz,defaultMatchWidth:"wide",parsePatterns:az,defaultParseWidth:"any"}),day:On({matchPatterns:lz,defaultMatchWidth:"wide",parsePatterns:cz,defaultParseWidth:"any"}),dayPeriod:On({matchPatterns:uz,defaultMatchWidth:"any",parsePatterns:dz,defaultParseWidth:"any"})},hz={code:"en-US",formatDistance:M8,formatLong:U8,formatRelative:V8,localize:Z8,match:fz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pz(e,t,n){const r=k8(),s=(n==null?void 0:n.locale)??r.locale??hz,o=2520,i=oc(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let l,u;i>0?(l=ft(t),u=ft(e)):(l=ft(e),u=ft(t));const d=D8(u,l),f=(Lx(u)-Lx(l))/1e3,h=Math.round((d-f)/60);let p;if(h<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,a):d<10?s.formatDistance("lessThanXSeconds",10,a):d<20?s.formatDistance("lessThanXSeconds",20,a):d<40?s.formatDistance("halfAMinute",0,a):d<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):h===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",h,a);if(h<45)return s.formatDistance("xMinutes",h,a);if(h<90)return s.formatDistance("aboutXHours",1,a);if(h<Mx){const y=Math.round(h/60);return s.formatDistance("aboutXHours",y,a)}else{if(h<o)return s.formatDistance("xDays",1,a);if(h<Ol){const y=Math.round(h/Mx);return s.formatDistance("xDays",y,a)}else if(h<Ol*2)return p=Math.round(h/Ol),s.formatDistance("aboutXMonths",p,a)}if(p=I8(u,l),p<12){const y=Math.round(h/Ol);return s.formatDistance("xMonths",y,a)}else{const y=p%12,g=Math.trunc(p/12);return y<3?s.formatDistance("aboutXYears",g,a):y<9?s.formatDistance("overXYears",g,a):s.formatDistance("almostXYears",g+1,a)}}function Ga(e,t){return pz(e,j8(e),t)}const mz={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},gz=(e,t,n)=>{let r;const s=mz[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},vz={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},yz={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},xz={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wz={date:No({formats:vz,defaultWidth:"full"}),time:No({formats:yz,defaultWidth:"full"}),dateTime:No({formats:xz,defaultWidth:"full"})},bz={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},_z=(e,t,n,r)=>bz[e],Cz={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Sz={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Ez={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},kz={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},jz={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Pz=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let o;return n===1?o=r&&s.includes(r)?"ère":"er":o="ème",n+o},Nz=["MMM","MMMM"],Tz={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&Nz.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Pz,era:Dn({values:Cz,defaultWidth:"wide"}),quarter:Dn({values:Sz,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Dn({values:Ez,defaultWidth:"wide"}),day:Dn({values:kz,defaultWidth:"wide"}),dayPeriod:Dn({values:jz,defaultWidth:"wide"})},Az=/^(\d+)(ième|ère|ème|er|e)?/i,Rz=/\d+/i,$z={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Iz={any:[/^av/i,/^ap/i]},Dz={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Oz={any:[/1/i,/2/i,/3/i,/4/i]},Mz={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Lz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fz={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},zz={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Uz={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Bz={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Vz={ordinalNumber:PE({matchPattern:Az,parsePattern:Rz,valueCallback:e=>parseInt(e)}),era:On({matchPatterns:$z,defaultMatchWidth:"wide",parsePatterns:Iz,defaultParseWidth:"any"}),quarter:On({matchPatterns:Dz,defaultMatchWidth:"wide",parsePatterns:Oz,defaultParseWidth:"any",valueCallback:e=>e+1}),month:On({matchPatterns:Mz,defaultMatchWidth:"wide",parsePatterns:Lz,defaultParseWidth:"any"}),day:On({matchPatterns:Fz,defaultMatchWidth:"wide",parsePatterns:zz,defaultParseWidth:"any"}),dayPeriod:On({matchPatterns:Uz,defaultMatchWidth:"any",parsePatterns:Bz,defaultParseWidth:"any"})},qa={code:"fr",formatDistance:gz,formatLong:wz,formatRelative:_z,localize:Tz,match:Vz,options:{weekStartsOn:1,firstWeekContainsDate:4}},Wz="webtoon-images",Fx=()=>{const{user:e}=Wt(),{toast:t}=at(),n=as(),[r,s]=m.useState([]),[o,i]=m.useState(0),[a,l]=m.useState(!1),u=m.useCallback(async()=>{if(e!=null&&e.id)try{const[h,p]=await Promise.all([w8(e.id),C8(e.id)]);s(h.map(y=>{var g;return{...y,webtoonCoverUrl:(g=y.webtoons)!=null&&g.cover_image_url?_t(Wz,y.webtoons.cover_image_url):null}})),i(p.count)}catch(h){console.error("Failed to fetch notifications:",h)}},[e==null?void 0:e.id]);m.useEffect(()=>{u();const h=setInterval(u,6e4);return()=>clearInterval(h)},[u]);const d=async h=>{try{await b8(h.id),u(),n(`/webtoon/${h.webtoon_slug}/chapter/${h.chapter_number}`),l(!1)}catch{t({title:"Erreur",description:"Impossible de marquer la notification comme lue.",variant:"destructive"})}},f=async()=>{if(!(!(e!=null&&e.id)||r.length===0))try{await _8(e.id),u(),t({title:"Succès",description:"Toutes les notifications ont été marquées comme lues."})}catch{t({title:"Erreur",description:"Impossible de marquer toutes les notifications comme lues.",variant:"destructive"})}};return e?c.jsxs(kE,{open:a,onOpenChange:l,children:[c.jsx(jE,{asChild:!0,children:c.jsxs(te,{variant:"ghost",size:"icon",className:"relative",children:[c.jsx(h_,{className:"h-5 w-5"}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full",children:o>9?"9+":o})]})}),c.jsxs(ev,{align:"end",className:"w-80 md:w-96 max-h-[70vh] overflow-y-auto",children:[c.jsxs(tv,{className:"flex justify-between items-center",children:[c.jsx("span",{children:"Notifications"}),r.length>0&&c.jsxs(te,{variant:"ghost",size:"sm",onClick:f,className:"text-xs text-primary hover:text-primary/80",children:[c.jsx(Fh,{className:"mr-1 h-3 w-3"})," Tout marquer comme lu"]})]}),c.jsx(Sa,{}),r.length===0?c.jsx(sc,{disabled:!0,className:"text-center text-muted-foreground py-4",children:"Aucune nouvelle notification"}):r.map(h=>{var p,y,g;return c.jsx(sc,{onClick:()=>d(h),className:"cursor-pointer p-3 hover:bg-muted/50 focus:bg-muted/80",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[h.webtoonCoverUrl&&c.jsx("img",{alt:((p=h.webtoons)==null?void 0:p.title)||"Couverture Webtoon",class:"h-12 w-12 rounded object-cover flex-shrink-0",src:"https://images.unsplash.com/photo-1572452532638-6a919c846ea5"}),!h.webtoonCoverUrl&&c.jsx("div",{className:"h-12 w-12 rounded bg-muted flex-shrink-0 flex items-center justify-center text-muted-foreground text-xs",children:((g=(y=h.webtoons)==null?void 0:y.title)==null?void 0:g.substring(0,3))||"N/A"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"text-sm font-medium leading-tight",children:h.message}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Ga(new Date(h.created_at),{addSuffix:!0,locale:qa})})]})]})},h.id)}),c.jsx(Sa,{}),c.jsx(sc,{asChild:!0,children:c.jsx(_e,{to:"/profile/notifications",className:"w-full text-center text-sm text-primary hover:underline py-2",children:"Voir toutes les notifications"})})]})]}):null},zx=[{name:"Accueil",path:"/",icon:Nu},{name:"Webtoons",path:"/webtoons",icon:Pu}],Ux=[{name:"Discord",url:"https://discord.gg/tyBjB9SrVJ",icon:y_,isExternal:!0},{name:"Ko-fi",url:"https://ko-fi.com/starboundcomics",icon:m_,isExternal:!0}],Bx="https://storage.googleapis.com/hostinger-horizons-assets-prod/7c53267e-a375-4cf5-96cf-45c7d7384c1a/8b4541beebec8757ad7aca949281835f.png",Ml="Starbound Scans",Hz=()=>{const{user:e,profile:t,logout:n,isAdmin:r}=Wt(),s=as(),o=wr(),{toast:i}=at(),[a,l]=m.useState(!1),[u,d]=m.useState(!1),[f,h]=m.useState(""),p=m.useRef(null),y=o.pathname.includes("/chapter/");m.useEffect(()=>(a||u?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[a,u]),m.useEffect(()=>{u&&p.current&&p.current.focus()},[u]);const g=async()=>{try{await n(),i({title:"Déconnexion réussie",description:"À bientôt !"}),s("/")}catch(b){i({title:"Erreur de déconnexion",description:b.message,variant:"destructive"})}l(!1)},w=b=>{b.preventDefault(),f.trim()&&(s(`/webtoons?search=${encodeURIComponent(f.trim())}`),h(""),d(!1),l(!1))},v=async()=>{try{const b=await VM();b?s(`/webtoon/${b}`):i({title:"Oups !",description:"Aucun webtoon n'a été trouvé pour une lecture aléatoire.",variant:"destructive"})}catch{i({title:"Erreur",description:"Impossible de charger un webtoon aléatoire.",variant:"destructive"})}l(!1)},x=(b,_=!1)=>b.map(S=>S.isExternal?c.jsxs("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${_?"hover:bg-muted/50 w-full text-left":"hover:bg-primary/10 hover:text-primary"}`,onClick:()=>_&&l(!1),children:[c.jsx(S.icon,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:S.name})]},S.name):c.jsxs(_e,{to:S.path,className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${_?"hover:bg-muted/50 w-full text-left":"hover:bg-primary/10 hover:text-primary"} ${o.pathname===S.path?_?"bg-primary text-primary-foreground":"text-primary font-semibold":""}`,onClick:()=>_&&l(!1),children:[c.jsx(S.icon,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:S.name})]},S.name));return y?c.jsx($c,{}):c.jsxs("div",{className:"min-h-screen flex flex-col bg-background text-foreground",children:[c.jsx(XL,{}),c.jsx("header",{className:"sticky top-0 z-50 w-full bg-background/80 backdrop-blur-md shadow-sm",children:c.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex items-center justify-between h-20",children:[c.jsxs(_e,{to:"/",className:"flex items-center space-x-2 flex-shrink-0 mr-4",children:[c.jsx("img",{src:Bx,alt:`${Ml} Logo`,className:"h-10 w-10 object-contain"}),c.jsx("span",{className:"font-bold text-lg sm:text-xl text-primary whitespace-nowrap",children:Ml})]}),c.jsxs("div",{className:"hidden md:flex items-center space-x-1 lg:space-x-2 flex-grow justify-end",children:[x(zx),c.jsxs(te,{variant:"ghost",onClick:v,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-primary/10 hover:text-primary whitespace-nowrap",children:[c.jsx(Z0,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Aléatoire"})]}),x(Ux),c.jsxs("form",{onSubmit:w,className:"relative ml-2",children:[c.jsx(Ve,{type:"search",placeholder:"Rechercher...",value:f,onChange:b=>h(b.target.value),className:"pl-10 pr-3 py-2 text-sm w-36 lg:w-48 bg-muted border-border focus:bg-background focus:border-primary transition-all h-9"}),c.jsx(Uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),e&&c.jsx(Fx,{}),e?c.jsx("div",{className:"relative group ml-1",children:c.jsxs(_e,{to:"/profile",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-primary/10 hover:text-primary whitespace-nowrap",children:[c.jsx(Dc,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:(t==null?void 0:t.username)||"Profil"})]})}):c.jsxs(_e,{to:"/auth",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-primary/10 hover:text-primary whitespace-nowrap ml-1",children:[c.jsx(X0,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Connexion"})]}),e&&r&&c.jsxs(_e,{to:"/admin",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-red-500 hover:bg-red-500/10 hover:text-red-400 whitespace-nowrap ml-1",children:[c.jsx(Is,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Admin"})]}),e&&c.jsx(te,{variant:"ghost",size:"icon",onClick:g,className:"flex items-center space-x-2 px-2 py-2 rounded-md text-sm font-medium hover:bg-destructive/10 hover:text-destructive ml-1",children:c.jsx(zh,{className:"h-5 w-5 flex-shrink-0"})})]}),c.jsxs("div",{className:"md:hidden flex items-center space-x-1",children:[e&&c.jsx(Fx,{}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>d(!0),children:c.jsx(Uh,{className:"h-5 w-5"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>l(!0),children:c.jsx(v$,{className:"h-6 w-6"})})]})]})})}),c.jsx(ts,{children:u&&c.jsx(ge.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed inset-0 z-[60] bg-background/80 backdrop-blur-md p-4 flex flex-col items-center",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsx("div",{className:"flex justify-end mb-4",children:c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>d(!1),children:c.jsx(Sn,{className:"h-6 w-6"})})}),c.jsxs("form",{onSubmit:w,className:"flex items-center space-x-2",children:[c.jsx(Ve,{ref:p,type:"search",placeholder:"Rechercher un webtoon...",value:f,onChange:b=>h(b.target.value),className:"flex-grow text-lg p-3 bg-muted border-border focus:bg-background"}),c.jsx(te,{type:"submit",size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Rechercher"})]})]})})}),c.jsx(ts,{children:a&&c.jsxs(ge.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{type:"tween",duration:.3},className:"fixed inset-0 z-[70] bg-background p-4 flex flex-col md:hidden",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs(_e,{to:"/",onClick:()=>l(!1),className:"flex items-center space-x-3",children:[c.jsx("img",{src:Bx,alt:`${Ml} Logo`,className:"h-8 w-8 object-contain"}),c.jsx("span",{className:"font-bold text-lg text-primary",children:Ml})]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>l(!1),children:c.jsx(Sn,{className:"h-6 w-6"})})]}),c.jsxs("nav",{className:"flex flex-col space-y-2 flex-grow",children:[x(zx,!0),c.jsxs(te,{variant:"ghost",onClick:v,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-muted/50 w-full text-left whitespace-nowrap",children:[c.jsx(Z0,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Aléatoire"})]}),x(Ux,!0),c.jsx("hr",{className:"my-2 border-border/50"}),e?c.jsxs(c.Fragment,{children:[c.jsxs(_e,{to:"/profile",onClick:()=>l(!1),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-muted/50 w-full text-left whitespace-nowrap",children:[c.jsx(Dc,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:(t==null?void 0:t.username)||"Profil"})]}),r&&c.jsxs(_e,{to:"/admin",onClick:()=>l(!1),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-red-400 hover:bg-red-500/20 w-full text-left whitespace-nowrap",children:[c.jsx(Is,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Admin"})]}),c.jsxs(te,{variant:"ghost",onClick:g,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-destructive/20 hover:text-destructive w-full text-left text-red-400 whitespace-nowrap",children:[c.jsx(zh,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Déconnexion"})]})]}):c.jsxs(_e,{to:"/auth",onClick:()=>l(!1),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium hover:bg-muted/50 w-full text-left whitespace-nowrap",children:[c.jsx(X0,{className:"h-5 w-5 flex-shrink-0"}),c.jsx("span",{children:"Connexion / Inscription"})]})]})]})}),c.jsx("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx($c,{})})]})},Ke=ce.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:he("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ke.displayName="Card";const Nt=ce.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:he("flex flex-col space-y-1.5 p-6",e),...t}));Nt.displayName="CardHeader";const Tt=ce.forwardRef(({className:e,...t},n)=>c.jsx("h3",{ref:n,className:he("text-2xl font-semibold leading-none tracking-tight",e),...t}));Tt.displayName="CardTitle";const dr=ce.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:he("text-sm text-muted-foreground",e),...t}));dr.displayName="CardDescription";const et=ce.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:he("p-6 pt-0",e),...t}));et.displayName="CardContent";const fr=ce.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:he("flex items-center p-6 pt-0",e),...t}));fr.displayName="CardFooter";const nv=async(e,t,n=[])=>t==="admin"||!n||n.length===0?!0:e?n.includes(t):!1,hr="webtoon-images",NE=3,Kz=e=>{var s,o;if(!e)return null;const t=e.required_roles||[],n=(e.pages||[]).sort((i,a)=>i.page_number-a.page_number).map(i=>({id:i.id,page_number:i.page_number,image_url:i.image_url,publicUrl:i.image_url?_t(hr,i.image_url):null,file:null})),r=e.thumbnail_url?_t(hr,e.thumbnail_url):null;return{id:e.id,number:e.number,webtoonId:e.webtoon_id,webtoonTitle:((s=e.webtoons)==null?void 0:s.title)||"",webtoonShowPublicViews:((o=e.webtoons)==null?void 0:o.show_public_views)||!1,thumbnailUrl:r,existingThumbnailPath:e.thumbnail_url,pages:n,views:e.views||0,createdAt:e.created_at,required_roles:t}},TE=async(e,t,n)=>{var i,a;const{data:r,error:s}=await ie.from("chapters").select(`
      id, number, webtoon_id, thumbnail_url, views, created_at, required_roles,
      webtoons (title, id, show_public_views),
      pages (id, page_number, image_url)
    `).eq("id",e).single();if(s){if(console.error("Error fetching chapter:",s.message),s.code==="PGRST116")return null;throw s}return r?await nv(t,n,r.required_roles||[])?Kz(r):(console.warn(`User ${t} (role: ${n}) denied access to chapter ${e} requiring roles: ${(i=r.required_roles)==null?void 0:i.join(", ")}`),{id:r.id,webtoonId:r.webtoon_id,number:r.number,accessDenied:!0,required_roles:r.required_roles||[],webtoonTitle:((a=r.webtoons)==null?void 0:a.title)||"",pages:[]}):null},AE=async(e,t,n,r,s=!1)=>{let o=r,i=null;if(e){r&&(i=r);const a=e.name.split(".").pop();o=`public/${t}/${n}/thumbnail.${a}`,await Ba(hr,e,o)}else s&&r&&(i=r,o=null);return{newThumbnailPath:o,oldThumbnailPathToDelete:i}},Gz=async(e,t,n)=>{if(!n)return;const s=((await ie.from("pages").select("id, image_url").eq("chapter_id",e)).data||[]).map(h=>h.image_url),o=n.filter(h=>h.file),i=n.filter(h=>!h.file&&h.image_url),a=s.filter(h=>!i.some(p=>p.image_url===h));for(const h of a)await En(hr,h).catch(p=>console.warn(`Failed to delete old page image: ${p.message}`));await ie.from("pages").delete().eq("chapter_id",e);const l=[];let u=1;for(const h of i)l.push({chapter_id:e,page_number:u++,image_url:h.image_url});const d=o.map((h,p)=>()=>xS(t,e,u+p,h.file));if((await RE(d,NE)).forEach((h,p)=>{h&&l.push({chapter_id:e,page_number:u+p,image_url:h})}),l.length>0){const{error:h}=await ie.from("pages").insert(l);if(h)throw console.error("Error inserting updated pages:",h.message),h}else if(n.length===0){const{error:h}=await ie.from("pages").delete().eq("chapter_id",e);h&&console.error("Error deleting all pages from chapter:",h.message)}},qz=async(e,t,n)=>{const{newThumbnailPath:r,oldThumbnailPathToDelete:s}=await AE(n.thumbnailFile,t,e,n.existingThumbnailPath,n.removeThumbnail),o={number:parseFloat(n.number),thumbnail_url:r,required_roles:n.required_roles||[]},{error:i}=await ie.from("chapters").update(o).eq("id",e);if(i)throw console.error("Error updating chapter details in DB:",i.message),i;return s&&await En(hr,s).catch(a=>console.warn(`Old thumbnail cleanup failed: ${a.message}`)),await Gz(e,t,n.pages),{id:e,...n}};async function RE(e,t){const n=[];for(let r=0;r<e.length;r+=t){const s=e.slice(r,r+t).map(i=>i()),o=await Promise.all(s.map(i=>i.catch(a=>(console.error("Error in batch task:",a),null))));n.push(...o)}return n}const Xz=async(e,t,n)=>{const{data:r,error:s}=await ie.from("chapters").select("id, thumbnail_url, views").eq("webtoon_id",e).eq("number",t).single();if(s&&s.code!=="PGRST116")throw s;const o={webtoon_id:e,number:t,views:(r==null?void 0:r.views)||0,required_roles:n||[]};let i,a=null;if(r){i=r.id,a=r.thumbnail_url;const{error:l}=await ie.from("chapters").update(o).eq("id",i);if(l)throw l;const u=`public/${e}/${i}/pages`,d=await wM(hr,u);if(d&&d.length>0){const h=d.map(p=>`${u}/${p.name}`);await En(hr,h)}const{error:f}=await ie.from("pages").delete().eq("chapter_id",i);if(f)throw f}else{const{data:l,error:u}=await ie.from("chapters").insert(o).select("id").single();if(u)throw u;i=l.id}return{chapterId:i,oldThumbnailPath:a,existingThumbnailUrl:r==null?void 0:r.thumbnail_url}},Yz=async(e,t,n,r)=>{if(!n||n.length===0)return[];const s=n.length;let o=0;const i=[],a=n.map((u,d)=>{const f=d+1;return async()=>{try{const h=await xS(e,t,f,u.file);return o++,r(Math.round(o/s*70)),{chapter_id:t,page_number:f,image_url:h}}catch(h){throw console.error(`Error uploading page ${f} for chapter ${t}:`,h),r(Math.round(o/s*70),`Page ${f} échouée`),new Error(`Failed to upload page ${f}: ${h.message}`)}}});if((await RE(a,NE)).forEach(u=>{u&&i.push(u)}),i.length!==s){const u=s-i.length;throw new Error(`${u} page(s) n'ont pas pu être uploadées pour le chapitre.`)}if(i.length>0){const{error:u}=await ie.from("pages").insert(i);if(u)throw new Error(`Failed to insert page records: ${u.message}`)}return i},Zz=async(e,t,n,r)=>{if(!e){console.warn(`Skipping notification for chapter ${n} due to missing chapterId.`);return}console.log(`Attempting to invoke notification function for chapter ${n} (ID: ${e}) of webtoon ${t} (${r})`);try{const{data:s,error:o}=await ie.functions.invoke("create-favorite-notifications",{body:JSON.stringify({chapterId:e,webtoonId:t,chapterNumber:n,webtoonTitle:r})});o?console.error(`Error invoking notification function for chapter ${n}:`,o.message,o.context||""):console.log(`Notification function invoked successfully for chapter ${n}. Response:`,s)}catch(s){console.error(`Critical error invoking notification function for chapter ${n}:`,s)}},Jz=async(e,t,n,r)=>{const s=t.length;let o=0;const i=[],{data:a,error:l}=await ie.from("webtoons").select("title").eq("id",e).single();if(l||!a)throw console.error("Failed to fetch webtoon details for notifications:",l==null?void 0:l.message),new Error("Could not fetch webtoon details.");const u=a.title;for(let d=0;d<s;d++){const f=t[d],{number:h,thumbnailFile:p,pages:y,required_roles:g}=f;let w={number:h,success:!1,error:null,chapterId:null};const v=(b,_,S=null)=>{r(d,h,b,_,S)},x=(b,_=null)=>{v(20+b,"processing",_)};try{v(0,"processing");const{chapterId:b,oldThumbnailPath:_,existingThumbnailUrl:S}=await Xz(e,h,g);w.chapterId=b,v(10,"processing");const{newThumbnailPath:N}=await AE(p,e,b,_||S);if(N!==(S||_)){const{error:k}=await ie.from("chapters").update({thumbnail_url:N}).eq("id",b);k&&console.error("Error updating chapter thumbnail URL:",k.message)}v(20,"processing"),await Yz(e,b,y,x),v(90,"processing"),w.success=!0,await Zz(b,e,h,u),v(100,"success")}catch(b){console.error(`Error processing chapter ${h} (index ${d}):`,b.message,b.stack),w.error=b.message,v(f.uploadProgress||0,"error",b.message)}i.push(w),o++,n&&n(o/s*100)}return i},Qz=async e=>{const{data:t}=await ie.from("chapters").select("webtoon_id, thumbnail_url").eq("id",e).single();t&&(await _M(t.webtoon_id,e),t.thumbnail_url&&await En(hr,t.thumbnail_url).catch(r=>console.warn(`Could not delete chapter thumbnail ${t.thumbnail_url}: ${r.message}`)));const{error:n}=await ie.from("chapters").delete().eq("id",e);if(n)throw console.error("Error deleting chapter:",n.message),n},e7=async(e=4,t,n)=>{const{data:r,error:s}=await ie.from("chapters").select("id, number, created_at, thumbnail_url, views, required_roles, webtoon:webtoons (id, title, show_public_views)").order("created_at",{ascending:!1}).limit(e);if(s)throw console.error("Error fetching latest chapters:",s.message),s;return(await Promise.all((r||[]).map(async i=>{const a=await nv(t,n,i.required_roles||[]);return a?i:{...i,accessDenied:!a}}))).map(i=>{var a,l,u;return{id:i.id,number:i.number,createdAt:i.created_at,thumbnailUrl:i.thumbnail_url?_t(hr,i.thumbnail_url):null,webtoonId:(a=i.webtoon)==null?void 0:a.id,webtoonTitle:(l=i.webtoon)==null?void 0:l.title,webtoonShowPublicViews:((u=i.webtoon)==null?void 0:u.show_public_views)||!1,views:i.views||0,required_roles:i.required_roles||[],accessDenied:i.accessDenied||!1}})},t7=async(e,t,n,r)=>{const s=async(d,f)=>{const{data:h,error:p}=await ie.from("chapters").select("id, number, required_roles").eq("slug",e).eq("number",t)[d]("number",t).order("number",{ascending:f}).limit(10);return p&&p.code!=="PGRST116"?(console.error(`Error fetching ${f?"next":"previous"} chapter candidates:`,p.message),null):h||[]},o=async d=>{if(!d||d.length===0)return null;for(const f of d)if(await nv(n,r,f.required_roles||[]))return{id:f.id,number:f.number};return null},[i,a]=await Promise.all([s("lt",!1),s("gt",!0)]),l=await o(i),u=await o(a);return{previousChapter:l,nextChapter:u}},n7=async e=>{const{error:t}=await ie.rpc("increment_chapter_view",{chapter_id_param:e});t&&console.error("Error incrementing chapter view:",t.message)},Xa=({title:e="Rien à afficher ici",message:t="Il semble qu'il n'y ait pas encore de contenu.",actionText:n,onActionClick:r})=>c.jsxs(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"flex flex-col items-center justify-center p-8 text-center h-[50vh] bg-muted/30 rounded-lg border border-dashed border-border/50",children:[c.jsx("div",{className:"bg-primary/10 p-5 rounded-full mb-6",children:c.jsx(p$,{className:"h-12 w-12 text-primary"})}),c.jsx("h2",{className:"text-2xl font-bold mb-2",children:e}),c.jsx("p",{className:"text-muted-foreground max-w-md mb-6",children:t}),r&&n&&c.jsxs(te,{onClick:r,size:"lg",children:[c.jsx(Tu,{className:"mr-2 h-5 w-5"}),n]})]}),r7={enter:e=>({x:e>0?1e3:-1e3,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:e=>({zIndex:0,x:e<0?1e3:-1e3,opacity:0})},Vx=5e3,s7=(e,t)=>Math.abs(e)*t,o7=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[[s,o],i]=m.useState([0,0]),[a,l]=m.useState(!1);m.useEffect(()=>{(async()=>{r(!0);try{const p=await Gu("",[],!0);t(p)}catch(p){console.error("Failed to fetch banner webtoons:",p)}finally{r(!1)}})()},[]);const u=m.useCallback(h=>{e.length!==0&&i(p=>[(p[0]+h+e.length)%e.length,h])},[e.length]);if(m.useEffect(()=>{let h;return!a&&e.length>1&&(h=setInterval(()=>u(1),5e3)),()=>clearInterval(h)},[a,u,e.length]),n)return c.jsx("div",{className:"relative w-full aspect-[16/6] bg-gradient-to-br from-primary/20 to-secondary/20 rounded-lg overflow-hidden flex items-center justify-center",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})});if(!e||e.length===0)return c.jsx("div",{className:"relative w-full aspect-[16/6] bg-gradient-to-br from-primary/30 to-secondary/30 rounded-lg overflow-hidden flex items-center justify-center text-primary/80",children:c.jsx("span",{children:"Aucune bannière configurée."})});const d=s%e.length,f=e[d];return c.jsxs("div",{className:"relative w-full aspect-[16/6] rounded-lg overflow-hidden shadow-xl cursor-grab active:cursor-grabbing",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[c.jsx(ts,{initial:!1,custom:o,children:c.jsx(ge.div,{custom:o,variants:r7,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(h,{offset:p,velocity:y})=>{const g=s7(p.x,y.x);g<-Vx?u(1):g>Vx&&u(-1)},className:"absolute inset-0 w-full h-full",children:c.jsxs(_e,{to:`/webtoon/${f.slug}`,className:"block w-full h-full",children:[c.jsx("img",{className:"absolute inset-0 w-full h-full object-cover brightness-75",alt:`Bannière pour ${f.title}`,src:f.bannerImageUrl||f.coverImageUrl||"https://images.unsplash.com/photo-1647589307181-3681cd0cb2fb",onError:h=>{h.target.onerror=null,h.target.src="https://images.unsplash.com/photo-1647589307181-3681cd0cb2fb"}}),c.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent p-6 md:p-10 flex flex-col justify-end",children:[c.jsx(ge.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.4},className:"text-2xl md:text-4xl font-bold text-white mb-2 line-clamp-2",children:f.title}),c.jsx(ge.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.4},className:"text-sm md:text-base text-gray-200 line-clamp-2 md:line-clamp-3",children:f.description||"Découvrez cette série passionnante !"})]})]})},s)}),e.length>1&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute z-10 top-1/2 left-4 transform -translate-y-1/2",children:c.jsx(te,{variant:"outline",size:"icon",onClick:()=>u(-1),className:"bg-black/30 hover:bg-black/60 text-white border-none rounded-full transition-opacity",style:{opacity:a?1:0},"aria-label":"Précédente",children:c.jsx(p_,{className:"h-6 w-6"})})}),c.jsx("div",{className:"absolute z-10 top-1/2 right-4 transform -translate-y-1/2",children:c.jsx(te,{variant:"outline",size:"icon",onClick:()=>u(1),className:"bg-black/30 hover:bg-black/60 text-white border-none rounded-full transition-opacity",style:{opacity:a?1:0},"aria-label":"Suivante",children:c.jsx(Om,{className:"h-6 w-6"})})})]})]})};function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(null,arguments)}function Yn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function i7(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function $E(...e){return t=>e.forEach(n=>i7(n,t))}function si(...e){return m.useCallback($E(...e),e)}function IE(e,t=[]){let n=[];function r(o,i){const a=m.createContext(i),l=n.length;n=[...n,i];function u(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[e][l])||a,w=m.useMemo(()=>y,Object.values(y));return m.createElement(g.Provider,{value:w},p)}function d(f,h){const p=(h==null?void 0:h[e][l])||a,y=m.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const s=()=>{const o=n.map(i=>m.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,a7(s,...t)]}function a7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}const DE=m.forwardRef((e,t)=>{const{children:n,...r}=e,s=m.Children.toArray(n),o=s.find(l7);if(o){const i=o.props.children,a=s.map(l=>l===o?m.Children.count(i)>1?m.Children.only(null):m.isValidElement(i)?i.props.children:null:l);return m.createElement(xp,Se({},r,{ref:t}),m.isValidElement(i)?m.cloneElement(i,void 0,a):null)}return m.createElement(xp,Se({},r,{ref:t}),n)});DE.displayName="Slot";const xp=m.forwardRef((e,t)=>{const{children:n,...r}=e;return m.isValidElement(n)?m.cloneElement(n,{...c7(r,n.props),ref:t?$E(t,n.ref):n.ref}):m.Children.count(n)>1?m.Children.only(null):null});xp.displayName="SlotClone";const OE=({children:e})=>m.createElement(m.Fragment,null,e);function l7(e){return m.isValidElement(e)&&e.type===OE}function c7(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}const u7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ya=u7.reduce((e,t)=>{const n=m.forwardRef((r,s)=>{const{asChild:o,...i}=r,a=o?DE:t;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(a,Se({},i,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function d7(e,t){e&&Bn.flushSync(()=>e.dispatchEvent(t))}function oi(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function f7(e,t=globalThis==null?void 0:globalThis.document){const n=oi(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const wp="dismissableLayer.update",h7="dismissableLayer.pointerDownOutside",p7="dismissableLayer.focusOutside";let Wx;const m7=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),g7=m.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...u}=e,d=m.useContext(m7),[f,h]=m.useState(null),p=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,y]=m.useState({}),g=si(t,j=>h(j)),w=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(v),b=f?w.indexOf(f):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=x,N=v7(j=>{const T=j.target,M=[...d.branches].some(F=>F.contains(T));!S||M||(o==null||o(j),a==null||a(j),j.defaultPrevented||l==null||l())},p),k=y7(j=>{const T=j.target;[...d.branches].some(F=>F.contains(T))||(i==null||i(j),a==null||a(j),j.defaultPrevented||l==null||l())},p);return f7(j=>{b===d.layers.size-1&&(s==null||s(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},p),m.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Wx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Hx(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Wx)}},[f,p,r,d]),m.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Hx())},[f,d]),m.useEffect(()=>{const j=()=>y({});return document.addEventListener(wp,j),()=>document.removeEventListener(wp,j)},[]),m.createElement(Ya.div,Se({},u,{ref:g,style:{pointerEvents:_?S?"auto":"none":void 0,...e.style},onFocusCapture:Yn(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Yn(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Yn(e.onPointerDownCapture,N.onPointerDownCapture)}))});function v7(e,t=globalThis==null?void 0:globalThis.document){const n=oi(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let u=function(){ME(h7,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function y7(e,t=globalThis==null?void 0:globalThis.document){const n=oi(e),r=m.useRef(!1);return m.useEffect(()=>{const s=o=>{o.target&&!r.current&&ME(p7,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Hx(){const e=new CustomEvent(wp);document.dispatchEvent(e)}function ME(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?d7(s,o):s.dispatchEvent(o)}const Ko=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},x7=Pa["useId".toString()]||(()=>{});let w7=0;function b7(e){const[t,n]=m.useState(x7());return Ko(()=>{e||n(r=>r??String(w7++))},[e]),e||(t?`radix-${t}`:"")}function _7(e){const[t,n]=m.useState(void 0);return Ko(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,a=u.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const LE="Popper",[FE,zE]=IE(LE),[C7,UE]=FE(LE),S7=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return m.createElement(C7,{scope:t,anchor:r,onAnchorChange:s},n)},E7="PopperAnchor",k7=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=UE(E7,n),i=m.useRef(null),a=si(t,i);return m.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:m.createElement(Ya.div,Se({},s,{ref:a}))}),BE="PopperContent",[j7,dW]=FE(BE),P7=m.forwardRef((e,t)=>{var n,r,s,o,i,a,l,u;const{__scopePopper:d,side:f="bottom",sideOffset:h=0,align:p="center",alignOffset:y=0,arrowPadding:g=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:b="partial",hideWhenDetached:_=!1,updatePositionStrategy:S="optimized",onPlaced:N,...k}=e,j=UE(BE,d),[T,M]=m.useState(null),F=si(t,q=>M(q)),[P,L]=m.useState(null),C=_7(P),O=(n=C==null?void 0:C.width)!==null&&n!==void 0?n:0,V=(r=C==null?void 0:C.height)!==null&&r!==void 0?r:0,B=f+(p!=="center"?"-"+p:""),z=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},$=Array.isArray(v)?v:[v],W=$.length>0,A={padding:z,boundary:$.filter(N7),altBoundary:W},{refs:D,floatingStyles:X,placement:Y,isPositioned:H,middlewareData:Z}=Og({strategy:"fixed",placement:B,whileElementsMounted:(...q)=>Dg(...q,{animationFrame:S==="always"}),elements:{reference:j.anchor},middleware:[Mg({mainAxis:h+V,alignmentAxis:y}),w&&Lg({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?Fg():void 0,...A}),w&&zg({...A}),Ug({...A,apply:({elements:q,rects:G,availableWidth:I,availableHeight:R})=>{const{width:U,height:ee}=G.reference,Q=q.floating.style;Q.setProperty("--radix-popper-available-width",`${I}px`),Q.setProperty("--radix-popper-available-height",`${R}px`),Q.setProperty("--radix-popper-anchor-width",`${U}px`),Q.setProperty("--radix-popper-anchor-height",`${ee}px`)}}),P&&Vg({element:P,padding:g}),T7({arrowWidth:O,arrowHeight:V}),_&&Bg({strategy:"referenceHidden",...A})]}),[J,re]=VE(Y),ae=oi(N);Ko(()=>{H&&(ae==null||ae())},[H,ae]);const le=(s=Z.arrow)===null||s===void 0?void 0:s.x,ue=(o=Z.arrow)===null||o===void 0?void 0:o.y,ye=((i=Z.arrow)===null||i===void 0?void 0:i.centerOffset)!==0,[ke,E]=m.useState();return Ko(()=>{T&&E(window.getComputedStyle(T).zIndex)},[T]),m.createElement("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:H?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(a=Z.transformOrigin)===null||a===void 0?void 0:a.x,(l=Z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:e.dir},m.createElement(j7,{scope:d,placedSide:J,onArrowChange:L,arrowX:le,arrowY:ue,shouldHideArrow:ye},m.createElement(Ya.div,Se({"data-side":J,"data-align":re},k,{ref:F,style:{...k.style,animation:H?void 0:"none",opacity:(u=Z.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function N7(e){return e!==null}const T7=e=>({name:"transformOrigin",options:e,fn(t){var n,r,s,o,i;const{placement:a,rects:l,middlewareData:u}=t,f=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=f?0:e.arrowWidth,p=f?0:e.arrowHeight,[y,g]=VE(a),w={start:"0%",center:"50%",end:"100%"}[g],v=((r=(s=u.arrow)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0)+h/2,x=((o=(i=u.arrow)===null||i===void 0?void 0:i.y)!==null&&o!==void 0?o:0)+p/2;let b="",_="";return y==="bottom"?(b=f?w:`${v}px`,_=`${-p}px`):y==="top"?(b=f?w:`${v}px`,_=`${l.floating.height+p}px`):y==="right"?(b=`${-p}px`,_=f?w:`${x}px`):y==="left"&&(b=`${l.floating.width+p}px`,_=f?w:`${x}px`),{data:{x:b,y:_}}}});function VE(e){const[t,n="center"]=e.split("-");return[t,n]}const A7=S7,R7=k7,$7=P7;function I7(e,t){return m.useReducer((n,r)=>{const s=t[n][r];return s??n},e)}const WE=e=>{const{present:t,children:n}=e,r=D7(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),o=si(r.ref,s.ref);return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:o}):null};WE.displayName="Presence";function D7(e){const[t,n]=m.useState(),r=m.useRef({}),s=m.useRef(e),o=m.useRef("none"),i=e?"mounted":"unmounted",[a,l]=I7(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Ll(r.current);o.current=a==="mounted"?u:"none"},[a]),Ko(()=>{const u=r.current,d=s.current;if(d!==e){const h=o.current,p=Ll(u);e?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),Ko(()=>{if(t){const u=f=>{const p=Ll(r.current).includes(f.animationName);f.target===t&&p&&Bn.flushSync(()=>l("ANIMATION_END"))},d=f=>{f.target===t&&(o.current=Ll(r.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Ll(e){return(e==null?void 0:e.animationName)||"none"}function O7({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=M7({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:r,a=oi(n),l=m.useCallback(u=>{if(o){const f=typeof u=="function"?u(e):u;f!==e&&a(f)}else s(u)},[o,e,s,a]);return[i,l]}function M7({defaultProp:e,onChange:t}){const n=m.useState(e),[r]=n,s=m.useRef(r),o=oi(t);return m.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}const L7=m.forwardRef((e,t)=>m.createElement(Ya.span,Se({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),F7=L7,[dd,fW]=IE("Tooltip",[zE]),rv=zE(),z7="TooltipProvider",U7=700,bp="tooltip.open",[B7,sv]=dd(z7),V7=e=>{const{__scopeTooltip:t,delayDuration:n=U7,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,[i,a]=m.useState(!0),l=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),m.createElement(B7,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(d=>{l.current=d},[]),disableHoverableContent:s},o)},ov="Tooltip",[W7,fd]=dd(ov),H7=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:i,delayDuration:a}=e,l=sv(ov,e.__scopeTooltip),u=rv(t),[d,f]=m.useState(null),h=b7(),p=m.useRef(0),y=i??l.disableHoverableContent,g=a??l.delayDuration,w=m.useRef(!1),[v=!1,x]=O7({prop:r,defaultProp:s,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(bp))):l.onClose(),o==null||o(k)}}),b=m.useMemo(()=>v?w.current?"delayed-open":"instant-open":"closed",[v]),_=m.useCallback(()=>{window.clearTimeout(p.current),w.current=!1,x(!0)},[x]),S=m.useCallback(()=>{window.clearTimeout(p.current),x(!1)},[x]),N=m.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{w.current=!0,x(!0)},g)},[g,x]);return m.useEffect(()=>()=>window.clearTimeout(p.current),[]),m.createElement(A7,u,m.createElement(W7,{scope:t,contentId:h,open:v,stateAttribute:b,trigger:d,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{l.isOpenDelayed?N():_()},[l.isOpenDelayed,N,_]),onTriggerLeave:m.useCallback(()=>{y?S():window.clearTimeout(p.current)},[S,y]),onOpen:_,onClose:S,disableHoverableContent:y},n))},Kx="TooltipTrigger",K7=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=fd(Kx,n),o=sv(Kx,n),i=rv(n),a=m.useRef(null),l=si(t,a,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),m.createElement(R7,Se({asChild:!0},i),m.createElement(Ya.button,Se({"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute},r,{ref:l,onPointerMove:Yn(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Yn(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Yn(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Yn(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Yn(e.onBlur,s.onClose),onClick:Yn(e.onClick,s.onClose)})))}),G7="TooltipPortal",[hW,q7]=dd(G7,{forceMount:void 0}),Ea="TooltipContent",X7=m.forwardRef((e,t)=>{const n=q7(Ea,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,i=fd(Ea,e.__scopeTooltip);return m.createElement(WE,{present:r||i.open},i.disableHoverableContent?m.createElement(HE,Se({side:s},o,{ref:t})):m.createElement(Y7,Se({side:s},o,{ref:t})))}),Y7=m.forwardRef((e,t)=>{const n=fd(Ea,e.__scopeTooltip),r=sv(Ea,e.__scopeTooltip),s=m.useRef(null),o=si(t,s),[i,a]=m.useState(null),{trigger:l,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,h=m.useCallback(()=>{a(null),f(!1)},[f]),p=m.useCallback((y,g)=>{const w=y.currentTarget,v={x:y.clientX,y:y.clientY},x=J7(v,w.getBoundingClientRect()),b=Q7(v,x),_=eU(g.getBoundingClientRect()),S=nU([...b,..._]);a(S),f(!0)},[f]);return m.useEffect(()=>()=>h(),[h]),m.useEffect(()=>{if(l&&d){const y=w=>p(w,d),g=w=>p(w,l);return l.addEventListener("pointerleave",y),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",g)}}},[l,d,p,h]),m.useEffect(()=>{if(i){const y=g=>{const w=g.target,v={x:g.clientX,y:g.clientY},x=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),b=!tU(v,i);x?h():b&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,d,i,u,h]),m.createElement(HE,Se({},e,{ref:o}))}),[Z7,pW]=dd(ov,{isInside:!1}),HE=m.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=e,l=fd(Ea,n),u=rv(n),{onClose:d}=l;return m.useEffect(()=>(document.addEventListener(bp,d),()=>document.removeEventListener(bp,d)),[d]),m.useEffect(()=>{if(l.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),m.createElement(g7,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d},m.createElement($7,Se({"data-state":l.stateAttribute},u,a,{ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),m.createElement(OE,null,r),m.createElement(Z7,{scope:n,isInside:!0},m.createElement(F7,{id:l.contentId,role:"tooltip"},s||r))))});function J7(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Q7(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function eU(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function tU(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o].x,l=t[o].y,u=t[i].x,d=t[i].y;l>r!=d>r&&n<(u-a)*(r-l)/(d-l)+a&&(s=!s)}return s}function nU(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),rU(t)}function rU(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}const sU=V7,oU=H7,iU=K7,KE=X7,GE=sU,qE=oU,XE=iU,iv=ce.forwardRef(({className:e,sideOffset:t=4,...n},r)=>c.jsx(KE,{ref:r,sideOffset:t,className:he("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));iv.displayName=KE.displayName;const aU=()=>{const[e,t]=m.useState([]),[n,r]=m.useState([]),[s,o]=m.useState([]),[i,a]=m.useState([]),[l,u]=m.useState(!0),[d,f]=m.useState(!0),[h,p]=m.useState(null),y=m.useRef(null),[g,w]=m.useState(!1),[v,x]=m.useState(0),[b,_]=m.useState(0),{user:S,userRole:N}=Wt();m.useEffect(()=>{(async()=>{u(!0),f(!0),p(null);try{const[O,V]=await Promise.all([Gu(),e7(16,S==null?void 0:S.id,N)]);O?(t(O),r(O.slice(0,8)),o(O.slice(0,12))):(t([]),r([]),o([])),u(!1),a(V||[]),f(!1)}catch(O){console.error("Failed to fetch data:",O),p("Impossible de charger le contenu. Veuillez réessayer plus tard."),u(!1),f(!1)}})()},[S,N]);const k=C=>{y.current&&(w(!0),x(C.pageX-y.current.offsetLeft),_(y.current.scrollLeft),y.current.style.cursor="grabbing",y.current.style.userSelect="none")},j=()=>{y.current&&(w(!1),y.current.style.cursor="grab",y.current.style.removeProperty("user-select"))},T=C=>{if(!g||!y.current)return;C.preventDefault();const V=(C.pageX-y.current.offsetLeft-v)*2;y.current.scrollLeft=b-V},M={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.2}}},F={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},P="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='150' viewBox='0 0 100 150'%3E%3Crect width='100' height='150' fill='%23333'/%3E%3Ctext x='50' y='75' font-family='Arial' font-size='12' fill='%23888' text-anchor='middle' dominant-baseline='middle'%3ECover%3C/text%3E%3C/svg%3E",L="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='90' viewBox='0 0 160 90'%3E%3Crect width='160' height='90' fill='%23333'/%3E%3Ctext x='80' y='45' font-family='Arial' font-size='10' fill='%23888' text-anchor='middle' dominant-baseline='middle'%3EThumbnail%3C/text%3E%3C/svg%3E";return l&&d?c.jsxs("div",{className:"flex flex-col justify-center items-center py-20 space-y-4 min-h-screen",children:[c.jsx(Ae,{className:"h-10 w-10 md:h-12 md:w-12 animate-spin text-primary"}),c.jsx("span",{className:"text-muted-foreground text-sm md:text-base",children:"Chargement du contenu..."})]}):h?c.jsxs("div",{className:"text-center py-20 bg-destructive/10 text-destructive rounded-lg min-h-screen flex flex-col justify-center items-center px-4",children:[c.jsx("p",{className:"text-lg md:text-xl font-semibold mb-2",children:"Erreur"}),c.jsx("p",{className:"text-sm md:text-base",children:h}),c.jsx(te,{onClick:()=>window.location.reload(),className:"mt-4",children:"Réessayer"})]}):c.jsxs("div",{className:"space-y-10 md:space-y-16 pb-16",children:[!l&&c.jsx(o7,{}),!l&&n.length>0&&c.jsxs("section",{children:[c.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6 flex items-center",children:[c.jsx(j$,{className:"mr-2 md:mr-3 h-6 w-6 md:h-7 md:w-7 text-yellow-400"})," Top Webtoons"]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-6 md:w-8 bg-gradient-to-r from-background via-background/80 to-transparent z-10 pointer-events-none -ml-4"}),c.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-6 md:w-8 bg-gradient-to-l from-background via-background/80 to-transparent z-10 pointer-events-none -mr-4"}),c.jsx(ge.div,{ref:y,variants:M,initial:"hidden",animate:"visible",className:"flex space-x-4 md:space-x-6 overflow-x-auto pb-4 custom-scrollbar -mx-4 px-4 cursor-grab",onMouseDown:k,onMouseLeave:j,onMouseUp:j,onMouseMove:T,children:n.map(C=>c.jsx(ge.div,{variants:F,className:"flex-shrink-0 w-48 sm:w-56 md:w-64 lg:w-72",children:c.jsxs(Ke,{className:"bg-card/70 backdrop-blur-sm hover:shadow-xl transition-all duration-300 h-full flex flex-col rounded-lg overflow-hidden group border-border/30",children:[c.jsxs(_e,{to:`/webtoon/${C.id}`,className:"block",draggable:"false",children:[c.jsx(Nt,{className:"p-0",children:c.jsx("div",{className:"aspect-[3/4] bg-muted overflow-hidden",children:c.jsx("img",{draggable:"false",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:`Couverture de ${C.title}`,src:C.coverImageUrl||C.bannerImageUrl||P,onError:O=>{O.target.onerror=null,O.target.src=P}})})}),c.jsxs(et,{className:"p-3 md:p-4 flex-grow",children:[c.jsx(Tt,{className:"text-base md:text-lg mb-1 md:mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:C.title}),c.jsx("p",{className:"text-xs md:text-sm text-muted-foreground line-clamp-2 md:line-clamp-3",children:C.description||"Aucune description disponible."})]})]}),c.jsx(fr,{className:"p-3 md:p-4 border-t border-border/30 mt-auto",children:c.jsx(te,{variant:"outline",size:"sm",className:"w-full hover:bg-primary/10 hover:text-primary transition-colors text-xs md:text-sm",asChild:!0,children:c.jsx(_e,{to:`/webtoon/${C.id}`,draggable:"false",children:"Voir Plus"})})})]})},C.id))})]})]}),!d&&i.length>0&&c.jsxs("section",{id:"latest-chapters",children:[c.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6 flex items-center",children:[c.jsx(q0,{className:"mr-2 md:mr-3 h-6 w-6 md:h-7 md:w-7 text-primary/80"})," Derniers Chapitres"]}),c.jsx(ge.div,{variants:M,initial:"hidden",animate:"visible",className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-6",children:i.map(C=>c.jsx(ge.div,{variants:F,children:c.jsx(_e,{to:`/webtoon/${C.webtoonId}/chapter/${C.id}`,children:c.jsxs(Ke,{className:"overflow-hidden group bg-card/70 backdrop-blur-sm border-border/30 hover:shadow-lg transition-all duration-300 rounded-lg h-full flex flex-col",children:[c.jsxs("div",{className:"aspect-video overflow-hidden bg-muted relative",children:[c.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:`Miniature Chapitre ${C.number} de ${C.webtoonTitle}`,src:C.thumbnailUrl||L,onError:O=>{O.target.onerror=null,O.target.src=L}}),C.required_roles&&C.required_roles.length>0&&c.jsx(GE,{children:c.jsxs(qE,{children:[c.jsx(XE,{asChild:!0,children:c.jsx("div",{className:"absolute top-2 right-2 bg-black/50 p-1.5 rounded-full backdrop-blur-sm",children:c.jsx(Mm,{className:"h-4 w-4 text-amber-400"})})}),c.jsx(iv,{children:c.jsxs("p",{children:["Accès restreint aux rôles : ",C.required_roles.join(", ")]})})]})})]}),c.jsxs(et,{className:"p-2 md:p-3 flex-grow",children:[c.jsx("h3",{className:"font-semibold text-sm md:text-base truncate group-hover:text-primary transition-colors",children:C.webtoonTitle}),c.jsxs("h4",{className:"text-xs md:text-sm text-muted-foreground group-hover:text-primary/80 transition-colors",children:["Chapitre ",C.number]})]}),c.jsx(fr,{className:"p-2 md:p-3 border-t border-border/30",children:c.jsxs("p",{className:"text-xs text-muted-foreground flex items-center",children:[c.jsx(q0,{className:"h-3 w-3 mr-1 md:mr-1.5 flex-shrink-0"}),C.createdAt?Ga(new Date(C.createdAt),{addSuffix:!0,locale:qa}):"Date inconnue"]})})]})})},C.id))})]}),!l&&s.length>0&&c.jsxs("section",{id:"latest-grid",children:[c.jsxs("h2",{className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6 flex items-center",children:[c.jsx(T$,{className:"mr-2 md:mr-3 h-6 w-6 md:h-7 md:w-7 text-green-500"})," Mises à Jour"]}),c.jsx(ge.div,{variants:M,initial:"hidden",animate:"visible",className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 md:gap-6",children:s.map(C=>c.jsx(ge.div,{variants:F,children:c.jsx(_e,{to:`/webtoon/${C.id}`,children:c.jsxs(Ke,{className:"overflow-hidden h-full group manga-card bg-card/70 backdrop-blur-sm border-border/30 hover:shadow-lg transition-all duration-300 rounded-lg",children:[c.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-muted",children:c.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:`Couverture de ${C.title}`,src:C.coverImageUrl||P,onError:O=>{O.target.onerror=null,O.target.src=P}})}),c.jsxs(et,{className:"p-2 md:p-3",children:[c.jsx("h3",{className:"font-semibold text-sm md:text-base truncate group-hover:text-primary transition-colors",children:C.title}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[C.chapterCount||0," Chapitres"]})]})]})})},C.id))})]}),!l&&s.length===0&&n.length===0&&!d&&i.length===0&&!h&&c.jsx(Xa,{containerClassName:"min-h-[calc(100vh-20rem)]",title:"Bienvenue sur ScanTrad Hub !",message:"Aucun contenu n'est disponible pour le moment. Les administrateurs travaillent à ajouter de nouvelles séries et chapitres. Revenez bientôt !"})]})},eu=({message:e="La page que vous cherchez n'existe pas."})=>c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-secondary/10 to-background text-center px-4",children:c.jsxs(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring"},className:"bg-card p-8 rounded-lg shadow-xl max-w-md w-full border border-border/50",children:[c.jsx(ge.div,{initial:{rotate:-10,scale:0},animate:{rotate:0,scale:1},transition:{delay:.2,duration:.5,type:"spring",stiffness:100},className:"mb-6",children:c.jsx(f_,{className:"h-16 w-16 text-destructive mx-auto"})}),c.jsx("h1",{className:"text-3xl font-bold text-destructive mb-3",children:"Oops! Erreur 404"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:e}),c.jsx(te,{asChild:!0,children:c.jsxs(_e,{to:"/",children:[c.jsx(Nu,{className:"mr-2 h-4 w-4"}),"Retour à l'accueil"]})})]})}),YE="avatars",lU=e=>{if(typeof e!="string")return e;const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},n=/[&<>"'/]/ig;return e.replace(n,r=>t[r])},cU=async(e,t=null)=>{if(!e)throw new Error("Webtoon ID is required to fetch comments.");let n=ie.from("comments").select(`
      id,
      content,
      created_at,
      parent_comment_id,
      webtoon_id, 
      chapter_id,
      profiles ( id, username, avatar_url )
    `).eq("webtoon_id",e);t?n=n.eq("chapter_id",t):n=n.is("chapter_id",null),n=n.order("created_at",{ascending:!1});const{data:r,error:s}=await n;if(s)throw console.error("Error fetching comments:",s),s;return(r||[]).map(o=>{var i,a,l;return{...o,content:o.content,user:{id:(i=o.profiles)==null?void 0:i.id,username:((a=o.profiles)==null?void 0:a.username)||"Utilisateur supprimé",avatarUrl:_t(YE,(l=o.profiles)==null?void 0:l.avatar_url)},profiles:void 0}})},uU=async(e=1,t=20)=>{const{data:n,error:r,count:s}=await ie.from("comments").select(`
       id,
       content,
       created_at,
       webtoon_id,
       chapter_id,
       profiles ( id, username ),
       webtoons ( id, title ),
       chapters ( id, number ) 
     `,{count:"exact"}).order("created_at",{ascending:!1}).range((e-1)*t,e*t-1);if(r)throw console.error("Error fetching all comments:",r),r;return{comments:(n||[]).map(o=>({...o,content:o.content})),totalCount:s||0}},dU=async({webtoonId:e,chapterId:t=null,userId:n,content:r,parentCommentId:s=null})=>{if(!n)throw new Error("User must be logged in to comment.");const o=lU(r);if(!o||!o.trim())throw new Error("Le commentaire ne peut pas être vide.");if(o.length>2e3)throw new Error("Le commentaire ne doit pas dépasser 2000 caractères.");const{data:i,error:a}=await ie.from("comments").insert({webtoon_id:e,chapter_id:t,user_id:n,content:o.trim(),parent_comment_id:s}).select(`
       id, 
       content, 
       created_at, 
       parent_comment_id, 
       webtoon_id,
       chapter_id,
       profiles ( id, username, avatar_url )
     `).single();if(a)throw console.error("Error adding comment:",a),a;return i!=null&&i.profiles&&(i.user={id:i.profiles.id,username:i.profiles.username,avatarUrl:_t(YE,i.profiles.avatar_url)},delete i.profiles),i},fU=async e=>{const{error:t}=await ie.from("comments").delete().eq("id",e);if(t)throw console.error("Error deleting comment:",t),t},hU=async e=>{const{error:t}=await ie.from("comments").delete().eq("id",e);if(t)throw console.error("Error deleting comment as admin:",t),t},Za=ce.forwardRef(({className:e,...t},n)=>c.jsx("textarea",{className:he("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Za.displayName="Textarea";var ZE={exports:{}},JE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Go=m;function pU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mU=typeof Object.is=="function"?Object.is:pU,gU=Go.useState,vU=Go.useEffect,yU=Go.useLayoutEffect,xU=Go.useDebugValue;function wU(e,t){var n=t(),r=gU({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return yU(function(){s.value=n,s.getSnapshot=t,Nf(s)&&o({inst:s})},[e,n,t]),vU(function(){return Nf(s)&&o({inst:s}),e(function(){Nf(s)&&o({inst:s})})},[e]),xU(n),n}function Nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mU(e,n)}catch{return!0}}function bU(e,t){return t()}var _U=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bU:wU;JE.useSyncExternalStore=Go.useSyncExternalStore!==void 0?Go.useSyncExternalStore:_U;ZE.exports=JE;var CU=ZE.exports;function SU(){return CU.useSyncExternalStore(EU,()=>!0,()=>!1)}function EU(){return()=>{}}var av="Avatar",[kU,mW]=tn(av),[jU,QE]=kU(av),ek=m.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=m.useState("idle");return c.jsx(jU,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:c.jsx(we.span,{...r,ref:t})})});ek.displayName=av;var tk="AvatarImage",nk=m.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,i=QE(tk,n),a=PU(r,o),l=Ut(u=>{s(u),i.onImageLoadingStatusChange(u)});return hn(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?c.jsx(we.img,{...o,ref:t,src:r}):null});nk.displayName=tk;var rk="AvatarFallback",sk=m.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=QE(rk,n),[i,a]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&o.imageLoadingStatus!=="loaded"?c.jsx(we.span,{...s,ref:t}):null});sk.displayName=rk;function Gx(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function PU(e,{referrerPolicy:t,crossOrigin:n}){const r=SU(),s=m.useRef(null),o=(()=>r?(s.current||(s.current=new window.Image),s.current):null)(),[i,a]=m.useState(()=>Gx(o,e));return hn(()=>{a(Gx(o,e))},[o,e]),hn(()=>{const l=f=>()=>{a(f)};if(!o)return;const u=l("loaded"),d=l("error");return o.addEventListener("load",u),o.addEventListener("error",d),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,n,t]),i}var ok=ek,ik=nk,ak=sk;const Ja=ce.forwardRef(({className:e,...t},n)=>c.jsx(ok,{ref:n,className:he("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ja.displayName=ok.displayName;const Qa=ce.forwardRef(({className:e,...t},n)=>c.jsx(ik,{ref:n,className:he("aspect-square h-full w-full",e),...t}));Qa.displayName=ik.displayName;const el=ce.forwardRef(({className:e,...t},n)=>c.jsx(ak,{ref:n,className:he("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));el.displayName=ak.displayName;const lk=({webtoonId:e,chapterId:t=null,parentCommentId:n=null,onCommentAdded:r,onCancelReply:s})=>{const[o,i]=m.useState(""),[a,l]=m.useState(!1),{user:u,profile:d}=Wt(),{toast:f}=at(),h=y=>{if(!y)return"?";const g=y.split(" ");return g.length===1?y.substring(0,2).toUpperCase():(g[0][0]+g[g.length-1][0]).toUpperCase()},p=async y=>{if(y.preventDefault(),!o.trim()){f({title:"Erreur",description:"Le commentaire ne peut pas être vide.",variant:"destructive"});return}if(o.length>2e3){f({title:"Erreur",description:"Le commentaire ne doit pas dépasser 2000 caractères.",variant:"destructive"});return}l(!0);try{const g=await dU({webtoonId:e,chapterId:t,userId:u.id,content:o,parentCommentId:n});i(""),f({title:"Succès",description:"Commentaire ajouté."}),r&&r(g),s&&s()}catch(g){console.error("Failed to add comment:",g),f({title:"Erreur",description:`Impossible d'ajouter le commentaire: ${g.message}`,variant:"destructive"})}finally{l(!1)}};return c.jsxs(ge.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onSubmit:p,className:"flex items-start space-x-4",children:[c.jsxs(Ja,{className:"h-10 w-10 border",children:[c.jsx(Qa,{src:d==null?void 0:d.avatarUrl,alt:d==null?void 0:d.username}),c.jsx(el,{children:h((d==null?void 0:d.username)||(u==null?void 0:u.email))})]}),c.jsxs("div",{className:"flex-grow space-y-2",children:[c.jsx(Za,{placeholder:n?"Écrire une réponse...":"Ajouter un commentaire public...",value:o,onChange:y=>i(y.target.value),rows:n?2:3,disabled:a,required:!0,maxLength:2e3,className:"bg-muted/30 focus:bg-background"}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.length,"/2000"]}),c.jsxs("div",{className:"flex space-x-2",children:[s&&c.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:s,disabled:a,children:"Annuler"}),c.jsxs(te,{type:"submit",size:"sm",disabled:a||!o.trim()||o.length>2e3,children:[a?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(S$,{className:"mr-2 h-4 w-4"}),a?"Envoi...":n?"Répondre":"Commenter"]})]})]})]})]})},NU=({comment:e,currentUserId:t,isAdmin:n,onDelete:r})=>{var u,d,f,h,p;const[s,o]=m.useState(!1),i=y=>{if(!y)return"?";const g=y.split(" ");return g.length===1?y.substring(0,2).toUpperCase():(g[0][0]+g[g.length-1][0]).toUpperCase()},a=n||((u=e.user)==null?void 0:u.id)===t,l=y=>{console.log("Reply added:",y),o(!1)};return c.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"flex space-x-4",children:[c.jsxs(Ja,{className:"h-10 w-10 border",children:[c.jsx(Qa,{src:(d=e.user)==null?void 0:d.avatarUrl,alt:(f=e.user)==null?void 0:f.username}),c.jsx(el,{children:i((h=e.user)==null?void 0:h.username)})]}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("span",{className:"font-semibold text-sm",children:((p=e.user)==null?void 0:p.username)||"Utilisateur Anonyme"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:e.created_at?Ga(new Date(e.created_at),{addSuffix:!0,locale:qa}):""})]}),c.jsx("p",{className:"text-sm text-foreground/90 whitespace-pre-wrap",children:e.content}),c.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t&&c.jsxs(te,{variant:"ghost",size:"xs",className:"text-xs text-muted-foreground hover:text-primary",onClick:()=>o(!s),children:[c.jsx(C$,{className:"h-3 w-3 mr-1"})," Répondre"]}),a&&c.jsxs(te,{variant:"ghost",size:"xs",className:"text-xs text-muted-foreground hover:text-destructive",onClick:()=>r(e.id),children:[c.jsx(ls,{className:"h-3 w-3 mr-1"})," Supprimer"]})]}),s&&t&&c.jsx("div",{className:"mt-4 pl-4 border-l-2 border-muted/50",children:c.jsx(lk,{webtoonId:e.webtoon_id,chapterId:e.chapter_id,parentCommentId:e.id,onCommentAdded:l,onCancelReply:()=>o(!1)})})]})]})},ck=({webtoonId:e,chapterId:t=null})=>{const[n,r]=m.useState([]),[s,o]=m.useState(!0),[i,a]=m.useState(null),{user:l,isAdmin:u}=Wt(),{toast:d}=at(),f=async()=>{o(!0),a(null);try{const y=await cU(e,t);r(y)}catch(y){console.error("Failed to fetch comments:",y),a("Impossible de charger les commentaires."),d({title:"Erreur",description:y.message,variant:"destructive"})}finally{o(!1)}};m.useEffect(()=>{f()},[e,t]);const h=y=>{r(g=>[y,...g])},p=async y=>{const g=[...n];r(w=>w.filter(v=>v.id!==y));try{await fU(y,l==null?void 0:l.id),d({title:"Succès",description:"Commentaire supprimé."})}catch(w){console.error("Failed to delete comment:",w),d({title:"Erreur",description:w.message,variant:"destructive"}),r(g)}};return c.jsxs(ge.section,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-12",children:[c.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[c.jsx(x_,{className:"mr-3 h-6 w-6 text-primary"})," Commentaires (",n.length,")"]}),l&&c.jsx(lk,{webtoonId:e,chapterId:t,onCommentAdded:h}),c.jsx("div",{className:"mt-8 space-y-6",children:s?c.jsx("div",{className:"flex justify-center items-center py-10",children:c.jsx(Ae,{className:"h-6 w-6 animate-spin text-primary"})}):i?c.jsx("div",{className:"text-center text-destructive bg-destructive/10 p-4 rounded-md",children:i}):n.length>0?n.map(y=>c.jsx(NU,{comment:y,currentUserId:l==null?void 0:l.id,isAdmin:u,onDelete:p},y.id)):c.jsx("p",{className:"text-muted-foreground text-center py-6",children:"Aucun commentaire pour le moment. Soyez le premier !"})})]})},uk=({webtoon:e,isFavorite:t=!1})=>{const n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0},hover:{scale:1.03,y:-5,transition:{type:"spring",stiffness:300}}},r="https://images.unsplash.com/photo-1593345216166-6a6cbf185ba0";return c.jsx(ge.div,{variants:n,initial:"hidden",animate:"visible",whileHover:"hover",className:"relative group",children:c.jsx(_e,{to:`/webtoon/${e.slug}`,children:c.jsxs(Ke,{className:"overflow-hidden h-full border-0 shadow-lg bg-gradient-to-br from-secondary/50 to-background",children:[c.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[c.jsx("img",{src:e.coverImageUrl||r,alt:`Couverture de ${e.title}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:s=>{s.target.onerror=null,s.target.src=r}}),c.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 p-3 flex flex-col justify-end",children:[e.tags&&e.tags.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mb-1",children:e.tags.slice(0,2).map(s=>c.jsx("span",{className:"px-1.5 py-0.5 bg-primary/80 text-primary-foreground text-[10px] font-medium rounded-full backdrop-blur-sm",children:s},s))}),c.jsx("h3",{className:"font-semibold text-sm md:text-base text-primary-foreground line-clamp-2",children:e.title})]}),t&&c.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground p-1.5 rounded-full shadow-lg",children:c.jsx(u$,{className:"h-4 w-4"})})]}),c.jsxs(et,{className:"p-3",children:[c.jsx("h3",{className:"font-medium text-sm md:text-base truncate group-hover:text-primary transition-colors",children:e.title}),c.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground mt-1",children:[c.jsxs("span",{children:[e.chapterCount||0," Chapitres"]}),e.showPublicViews&&e.views>0&&c.jsxs("span",{className:"flex items-center",children:[c.jsx($s,{className:"h-3 w-3 mr-1"}),e.views.toLocaleString()]})]})]})]})})})},TU=ce.memo(({chapter:e,webtoonId:t,isRead:n,isNew:r,showPublicViews:s})=>{const o=e.required_roles&&e.required_roles.length>0;return c.jsx("li",{children:c.jsx(te,{variant:"ghost",asChild:!0,className:`w-full justify-start text-left h-auto py-2 px-3 hover:bg-muted/50 ${n?"opacity-60":""}`,children:c.jsxs(_e,{to:`/webtoon/${t}/chapter/${e.id}`,className:"flex items-center w-full",children:[n&&c.jsx($s,{className:"mr-2 h-4 w-4 text-muted-foreground flex-shrink-0"}),c.jsxs("span",{className:"truncate",children:["Chapitre ",e.number]}),r&&!n&&c.jsx(k$,{className:"ml-2 h-4 w-4 text-yellow-400 flex-shrink-0"}),o&&c.jsx(GE,{children:c.jsxs(qE,{children:[c.jsx(XE,{asChild:!0,children:c.jsx("div",{className:"ml-2 flex items-center",children:c.jsx(Mm,{className:"h-4 w-4 text-amber-500"})})}),c.jsx(iv,{children:c.jsxs("p",{children:["Accès restreint aux rôles : ",e.required_roles.join(", ")]})})]})}),s&&c.jsxs("span",{className:"ml-auto text-xs text-muted-foreground flex-shrink-0 pl-2 items-center flex",children:[c.jsx($s,{className:"mr-1 h-3 w-3"})," ",(e.views||0).toLocaleString()]}),c.jsx("span",{className:"ml-2 text-xs text-muted-foreground flex-shrink-0 pl-2 border-l border-muted-foreground/20",children:e.created_at?new Date(e.created_at).toLocaleDateString("fr-FR"):""})]})})})}),AU=()=>{const{webtoonId:e}=$a(),[t,n]=m.useState(null),[r,s]=m.useState(!0),[o,i]=m.useState(null),[a,l]=m.useState(!1),[u,d]=m.useState(!1),[f,h]=m.useState([]),[p,y]=m.useState([]),[g,w]=m.useState("asc"),{user:v,loading:x}=Wt(),{toast:b}=at(),_=m.useMemo(()=>"https://images.unsplash.com/photo-1703596066601-6dca5e7639ba",[]),S=m.useCallback(async()=>{s(!0),i(null);try{await WM(e);const F=await qu(e);if(F){if(n(F),v&&F.id){const L=await BM(v.id,F.id);h(L)}const P=await HM(e);y(P)}else i("Webtoon non trouvé.")}catch(F){console.error("Failed to fetch webtoon details:",F),i("Impossible de charger les détails du webtoon.")}finally{s(!1)}},[e,v]);m.useEffect(()=>{S()},[S]),m.useEffect(()=>{!x&&v&&t?(async()=>{if(v&&t){d(!0);try{const P=await OM(v.id,t.id);l(P)}catch(P){console.error("Failed to check favorite status:",P)}finally{d(!1)}}else l(!1)})():v||l(!1)},[v,t,x]);const N=m.useCallback(async()=>{if(!v){b({title:"Connexion requise",description:"Vous devez être connecté pour ajouter aux favoris.",variant:"destructive"});return}d(!0);try{a?(await LM(v.id,t.id),l(!1),b({title:"Retiré des favoris"})):(await MM(v.id,t.id),l(!0),b({title:"Ajouté aux favoris"}))}catch(F){console.error("Failed to toggle favorite:",F),b({title:"Erreur",description:`Impossible de modifier les favoris: ${F.message}`,variant:"destructive"})}finally{d(!1)}},[v,t==null?void 0:t.id,a,b]),k=m.useCallback(()=>{w(F=>F==="asc"?"desc":"asc")},[]),j=m.useMemo(()=>t!=null&&t.chapters?[...t.chapters].sort((F,P)=>g==="asc"?F.number-P.number:P.number-F.number):[],[t==null?void 0:t.chapters,g]),T=m.useCallback(F=>{const P=new Date;return P.setDate(P.getDate()-3),new Date(F)>P},[]);if(r||x)return c.jsx("div",{className:"flex justify-center items-center py-20",children:c.jsx(Ae,{className:"h-10 w-10 md:h-12 md:w-12 animate-spin text-primary"})});if(o)return c.jsx(eu,{message:o});if(!t)return c.jsx(eu,{message:"Webtoon non trouvé."});const M=g==="asc"?j[0]:j[j.length-1];return c.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-6 md:space-y-8",children:[c.jsx(te,{variant:"outline",size:"sm",asChild:!0,className:"mb-4 md:mb-6",children:c.jsxs(_e,{to:"/",children:[c.jsx(ju,{className:"mr-2 h-4 w-4"})," Retour"]})}),c.jsx(Ke,{className:"overflow-hidden bg-card/70 backdrop-blur-sm shadow-lg",children:c.jsxs("div",{className:"md:flex",children:[c.jsx("div",{className:"md:flex-shrink-0 w-full md:w-1/3 lg:w-1/4 xl:w-1/5",children:c.jsx("img",{loading:"lazy",className:"h-auto w-full object-cover md:h-full aspect-[3/4] md:aspect-auto",alt:`Couverture de ${t.title}`,src:t.coverImageUrl||_,onError:F=>{F.currentTarget.src=_,F.currentTarget.onerror=null}})}),c.jsxs("div",{className:"p-4 md:p-6 lg:p-8 flex-grow",children:[c.jsxs(Nt,{className:"p-0 mb-3 md:mb-4",children:[c.jsx(Tt,{className:"text-2xl md:text-3xl font-bold mb-2 text-primary",children:t.title}),t.tags&&t.tags.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1.5 md:gap-2 mb-3 md:mb-4",children:t.tags.map(F=>c.jsx("span",{className:"px-2 py-0.5 bg-secondary text-secondary-foreground text-xs font-medium rounded-full",children:F},F))}),c.jsx(dr,{className:"text-sm md:text-base text-muted-foreground",children:t.description||"Aucune description disponible."}),t.showPublicViews&&c.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-2",children:[c.jsx($s,{className:"mr-1.5 h-4 w-4"})," ",(t.views||0).toLocaleString()," vues"]})]}),c.jsx(et,{className:"p-0",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-3",children:[j.length>0&&M?c.jsx(te,{asChild:!0,className:"w-full sm:w-auto",children:c.jsxs(_e,{to:`/webtoon/${t.slug}/chapter/${M.number}`,children:["Lire Chapitre ",M.number]})}):c.jsxs(te,{disabled:!0,className:"w-full sm:w-auto",children:[c.jsx(Pu,{className:"mr-2 h-4 w-4"})," Aucun chapitre"]}),c.jsxs(te,{variant:a?"secondary":"outline",onClick:N,disabled:u||x,className:"flex items-center w-full sm:w-auto",children:[u?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(v_,{className:`mr-2 h-4 w-4 ${a?"fill-red-500 text-red-500":""}`}),a?"Favori":"Ajouter favori"]})]})})]})]})}),c.jsxs(Ke,{className:"bg-card/70 backdrop-blur-sm shadow-lg",children:[c.jsxs(Nt,{className:"flex flex-row items-center justify-between",children:[c.jsxs(Tt,{className:"text-xl md:text-2xl",children:["Liste des Chapitres (",j.length,")"]}),(t==null?void 0:t.chapters)&&t.chapters.length>1&&c.jsx(te,{variant:"ghost",size:"icon",onClick:k,"aria-label":"Trier les chapitres",children:g==="asc"?c.jsx(a$,{className:"h-5 w-5"}):c.jsx(i$,{className:"h-5 w-5"})})]}),c.jsx(et,{children:j.length>0?c.jsx("ul",{className:"space-y-1.5 md:space-y-2",children:j.map(F=>c.jsx(TU,{chapter:F,webtoonId:t.id,isRead:f.includes(F.id),isNew:T(F.created_at),showPublicViews:t.showPublicViews},F.id))}):c.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucun chapitre n'a encore été publié pour ce webtoon."})})]}),p&&p.length>0&&c.jsxs(Ke,{className:"bg-card/70 backdrop-blur-sm shadow-lg",children:[c.jsx(Nt,{children:c.jsxs(Tt,{className:"text-xl md:text-2xl flex items-center",children:[c.jsx(N$,{className:"mr-2 h-6 w-6 text-primary"}),"Vous pourriez aussi aimer"]})}),c.jsx(et,{children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-4",children:p.map(F=>c.jsx(uk,{webtoon:F},F.id))})})]}),c.jsx(ck,{webtoonId:e})]})};function qx(e,[t,n]){return Math.min(n,Math.max(t,e))}function jt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function lv(e,t=[]){let n=[];function r(o,i){const a=m.createContext(i),l=n.length;n=[...n,i];function u(f){const{scope:h,children:p,...y}=f,g=(h==null?void 0:h[e][l])||a,w=m.useMemo(()=>y,Object.values(y));return m.createElement(g.Provider,{value:w},p)}function d(f,h){const p=(h==null?void 0:h[e][l])||a,y=m.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return u.displayName=o+"Provider",[u,d]}const s=()=>{const o=n.map(i=>m.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,RU(s,...t)]}function RU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function $U(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function dk(...e){return t=>e.forEach(n=>$U(n,t))}function Vt(...e){return m.useCallback(dk(...e),e)}const ka=m.forwardRef((e,t)=>{const{children:n,...r}=e,s=m.Children.toArray(n),o=s.find(DU);if(o){const i=o.props.children,a=s.map(l=>l===o?m.Children.count(i)>1?m.Children.only(null):m.isValidElement(i)?i.props.children:null:l);return m.createElement(_p,Se({},r,{ref:t}),m.isValidElement(i)?m.cloneElement(i,void 0,a):null)}return m.createElement(_p,Se({},r,{ref:t}),n)});ka.displayName="Slot";const _p=m.forwardRef((e,t)=>{const{children:n,...r}=e;return m.isValidElement(n)?m.cloneElement(n,{...OU(r,n.props),ref:t?dk(t,n.ref):n.ref}):m.Children.count(n)>1?m.Children.only(null):null});_p.displayName="SlotClone";const IU=({children:e})=>m.createElement(m.Fragment,null,e);function DU(e){return m.isValidElement(e)&&e.type===IU}function OU(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function MU(e){const t=e+"CollectionProvider",[n,r]=lv(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:y,children:g}=p,w=ce.useRef(null),v=ce.useRef(new Map).current;return ce.createElement(s,{scope:y,itemMap:v,collectionRef:w},g)},a=e+"CollectionSlot",l=ce.forwardRef((p,y)=>{const{scope:g,children:w}=p,v=o(a,g),x=Vt(y,v.collectionRef);return ce.createElement(ka,{ref:x},w)}),u=e+"CollectionItemSlot",d="data-radix-collection-item",f=ce.forwardRef((p,y)=>{const{scope:g,children:w,...v}=p,x=ce.useRef(null),b=Vt(y,x),_=o(u,g);return ce.useEffect(()=>(_.itemMap.set(x,{ref:x,...v}),()=>void _.itemMap.delete(x))),ce.createElement(ka,{[d]:"",ref:b},w)});function h(p){const y=o(e+"CollectionConsumer",p);return ce.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((_,S)=>v.indexOf(_.ref.current)-v.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:l,ItemSlot:f},h,r]}const LU=m.createContext(void 0);function FU(e){const t=m.useContext(LU);return e||t||"ltr"}const zU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ct=zU.reduce((e,t)=>{const n=m.forwardRef((r,s)=>{const{asChild:o,...i}=r,a=o?ka:t;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(a,Se({},i,{ref:s}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function UU(e,t){e&&Bn.flushSync(()=>e.dispatchEvent(t))}function pr(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function BU(e,t=globalThis==null?void 0:globalThis.document){const n=pr(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Cp="dismissableLayer.update",VU="dismissableLayer.pointerDownOutside",WU="dismissableLayer.focusOutside";let Xx;const HU=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),KU=m.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...u}=e,d=m.useContext(HU),[f,h]=m.useState(null),p=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,y]=m.useState({}),g=Vt(t,j=>h(j)),w=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(v),b=f?w.indexOf(f):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=x,N=GU(j=>{const T=j.target,M=[...d.branches].some(F=>F.contains(T));!S||M||(o==null||o(j),a==null||a(j),j.defaultPrevented||l==null||l())},p),k=qU(j=>{const T=j.target;[...d.branches].some(F=>F.contains(T))||(i==null||i(j),a==null||a(j),j.defaultPrevented||l==null||l())},p);return BU(j=>{b===d.layers.size-1&&(s==null||s(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},p),m.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Xx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Yx(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Xx)}},[f,p,r,d]),m.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Yx())},[f,d]),m.useEffect(()=>{const j=()=>y({});return document.addEventListener(Cp,j),()=>document.removeEventListener(Cp,j)},[]),m.createElement(Ct.div,Se({},u,{ref:g,style:{pointerEvents:_?S?"auto":"none":void 0,...e.style},onFocusCapture:jt(e.onFocusCapture,k.onFocusCapture),onBlurCapture:jt(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:jt(e.onPointerDownCapture,N.onPointerDownCapture)}))});function GU(e,t=globalThis==null?void 0:globalThis.document){const n=pr(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let u=function(){fk(VU,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function qU(e,t=globalThis==null?void 0:globalThis.document){const n=pr(e),r=m.useRef(!1);return m.useEffect(()=>{const s=o=>{o.target&&!r.current&&fk(WU,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yx(){const e=new CustomEvent(Cp);document.dispatchEvent(e)}function fk(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?UU(s,o):s.dispatchEvent(o)}let Tf=0;function XU(){m.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:Zx()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:Zx()),Tf++,()=>{Tf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Tf--}},[])}function Zx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const Af="focusScope.autoFocusOnMount",Rf="focusScope.autoFocusOnUnmount",Jx={bubbles:!1,cancelable:!0},YU=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[a,l]=m.useState(null),u=pr(s),d=pr(o),f=m.useRef(null),h=Vt(t,g=>l(g)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const _=b.target;a.contains(_)?f.current=_:Pr(f.current,{select:!0})},w=function(b){if(p.paused||!a)return;const _=b.relatedTarget;_!==null&&(a.contains(_)||Pr(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Pr(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),m.useEffect(()=>{if(a){ew.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(Af,Jx);a.addEventListener(Af,u),a.dispatchEvent(v),v.defaultPrevented||(ZU(nB(hk(a)),{select:!0}),document.activeElement===g&&Pr(a))}return()=>{a.removeEventListener(Af,u),setTimeout(()=>{const v=new CustomEvent(Rf,Jx);a.addEventListener(Rf,d),a.dispatchEvent(v),v.defaultPrevented||Pr(g??document.body,{select:!0}),a.removeEventListener(Rf,d),ew.remove(p)},0)}}},[a,u,d,p]);const y=m.useCallback(g=>{if(!n&&!r||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const x=g.currentTarget,[b,_]=JU(x);b&&_?!g.shiftKey&&v===_?(g.preventDefault(),n&&Pr(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&Pr(_,{select:!0})):v===x&&g.preventDefault()}},[n,r,p.paused]);return m.createElement(Ct.div,Se({tabIndex:-1},i,{ref:h,onKeyDown:y}))});function ZU(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Pr(r,{select:t}),document.activeElement!==n)return}function JU(e){const t=hk(e),n=Qx(t,e),r=Qx(t.reverse(),e);return[n,r]}function hk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Qx(e,t){for(const n of e)if(!QU(n,{upTo:t}))return n}function QU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function eB(e){return e instanceof HTMLInputElement&&"select"in e}function Pr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&eB(e)&&t&&e.select()}}const ew=tB();function tB(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=tw(e,t),e.unshift(t)},remove(t){var n;e=tw(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function tw(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function nB(e){return e.filter(t=>t.tagName!=="A")}const mr=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},rB=Pa["useId".toString()]||(()=>{});let sB=0;function pk(e){const[t,n]=m.useState(rB());return mr(()=>{e||n(r=>r??String(sB++))},[e]),e||(t?`radix-${t}`:"")}function oB(e){const[t,n]=m.useState(void 0);return mr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,a=u.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const mk="Popper",[gk,vk]=lv(mk),[iB,yk]=gk(mk),aB=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return m.createElement(iB,{scope:t,anchor:r,onAnchorChange:s},n)},lB="PopperAnchor",cB=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=yk(lB,n),i=m.useRef(null),a=Vt(t,i);return m.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:m.createElement(Ct.div,Se({},s,{ref:a}))}),xk="PopperContent",[uB,gW]=gk(xk),dB=m.forwardRef((e,t)=>{var n,r,s,o,i,a,l,u;const{__scopePopper:d,side:f="bottom",sideOffset:h=0,align:p="center",alignOffset:y=0,arrowPadding:g=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:b="partial",hideWhenDetached:_=!1,updatePositionStrategy:S="optimized",onPlaced:N,...k}=e,j=yk(xk,d),[T,M]=m.useState(null),F=Vt(t,q=>M(q)),[P,L]=m.useState(null),C=oB(P),O=(n=C==null?void 0:C.width)!==null&&n!==void 0?n:0,V=(r=C==null?void 0:C.height)!==null&&r!==void 0?r:0,B=f+(p!=="center"?"-"+p:""),z=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},$=Array.isArray(v)?v:[v],W=$.length>0,A={padding:z,boundary:$.filter(fB),altBoundary:W},{refs:D,floatingStyles:X,placement:Y,isPositioned:H,middlewareData:Z}=Og({strategy:"fixed",placement:B,whileElementsMounted:(...q)=>Dg(...q,{animationFrame:S==="always"}),elements:{reference:j.anchor},middleware:[Mg({mainAxis:h+V,alignmentAxis:y}),w&&Lg({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?Fg():void 0,...A}),w&&zg({...A}),Ug({...A,apply:({elements:q,rects:G,availableWidth:I,availableHeight:R})=>{const{width:U,height:ee}=G.reference,Q=q.floating.style;Q.setProperty("--radix-popper-available-width",`${I}px`),Q.setProperty("--radix-popper-available-height",`${R}px`),Q.setProperty("--radix-popper-anchor-width",`${U}px`),Q.setProperty("--radix-popper-anchor-height",`${ee}px`)}}),P&&Vg({element:P,padding:g}),hB({arrowWidth:O,arrowHeight:V}),_&&Bg({strategy:"referenceHidden",...A})]}),[J,re]=wk(Y),ae=pr(N);mr(()=>{H&&(ae==null||ae())},[H,ae]);const le=(s=Z.arrow)===null||s===void 0?void 0:s.x,ue=(o=Z.arrow)===null||o===void 0?void 0:o.y,ye=((i=Z.arrow)===null||i===void 0?void 0:i.centerOffset)!==0,[ke,E]=m.useState();return mr(()=>{T&&E(window.getComputedStyle(T).zIndex)},[T]),m.createElement("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:H?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(a=Z.transformOrigin)===null||a===void 0?void 0:a.x,(l=Z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:e.dir},m.createElement(uB,{scope:d,placedSide:J,onArrowChange:L,arrowX:le,arrowY:ue,shouldHideArrow:ye},m.createElement(Ct.div,Se({"data-side":J,"data-align":re},k,{ref:F,style:{...k.style,animation:H?void 0:"none",opacity:(u=Z.hide)!==null&&u!==void 0&&u.referenceHidden?0:void 0}}))))});function fB(e){return e!==null}const hB=e=>({name:"transformOrigin",options:e,fn(t){var n,r,s,o,i;const{placement:a,rects:l,middlewareData:u}=t,f=((n=u.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=f?0:e.arrowWidth,p=f?0:e.arrowHeight,[y,g]=wk(a),w={start:"0%",center:"50%",end:"100%"}[g],v=((r=(s=u.arrow)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0)+h/2,x=((o=(i=u.arrow)===null||i===void 0?void 0:i.y)!==null&&o!==void 0?o:0)+p/2;let b="",_="";return y==="bottom"?(b=f?w:`${v}px`,_=`${-p}px`):y==="top"?(b=f?w:`${v}px`,_=`${l.floating.height+p}px`):y==="right"?(b=`${-p}px`,_=f?w:`${x}px`):y==="left"&&(b=`${l.floating.width+p}px`,_=f?w:`${x}px`),{data:{x:b,y:_}}}});function wk(e){const[t,n="center"]=e.split("-");return[t,n]}const pB=aB,mB=cB,gB=dB,vB=m.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=e;return r?E1.createPortal(m.createElement(Ct.div,Se({},s,{ref:t})),r):null});function nw({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=yB({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:r,a=pr(n),l=m.useCallback(u=>{if(o){const f=typeof u=="function"?u(e):u;f!==e&&a(f)}else s(u)},[o,e,s,a]);return[i,l]}function yB({defaultProp:e,onChange:t}){const n=m.useState(e),[r]=n,s=m.useRef(r),o=pr(t);return m.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}function xB(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const wB=m.forwardRef((e,t)=>m.createElement(Ct.span,Se({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var bk=kS(),$f=function(){},hd=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:$f,onWheelCapture:$f,onTouchMoveCapture:$f}),s=r[0],o=r[1],i=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,y=e.inert,g=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,x=vg(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=h,_=ES([n,t]),S=xt(xt({},x),s);return m.createElement(m.Fragment,null,d&&m.createElement(b,{sideCar:bk,removeScrollBar:u,shards:f,noIsolation:p,inert:y,setCallbacks:o,allowPinchZoom:!!g,lockRef:n}),i?m.cloneElement(m.Children.only(a),xt(xt({},S),{ref:_})):m.createElement(v,xt({},S,{className:l,ref:_}),a))});hd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hd.classNames={fullWidth:Yi,zeroRight:Xi};var Sp=!1;if(typeof window<"u")try{var Fl=Object.defineProperty({},"passive",{get:function(){return Sp=!0,!0}});window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{Sp=!1}var eo=Sp?{passive:!1}:!1,bB=function(e){return e.tagName==="TEXTAREA"},_k=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!bB(e)&&n[t]==="visible")},_B=function(e){return _k(e,"overflowY")},CB=function(e){return _k(e,"overflowX")},rw=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Ck(e,n);if(r){var s=Sk(e,n),o=s[1],i=s[2];if(o>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},SB=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},EB=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Ck=function(e,t){return e==="v"?_B(t):CB(t)},Sk=function(e,t){return e==="v"?SB(t):EB(t)},kB=function(e,t){return e==="h"&&t==="rtl"?-1:1},jB=function(e,t,n,r,s){var o=kB(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,l=t.contains(a),u=!1,d=i>0,f=0,h=0;do{var p=Sk(e,a),y=p[0],g=p[1],w=p[2],v=g-w-o*y;(y||v)&&Ck(e,a)&&(f+=v,h+=y),a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(d&&(s&&f===0||!s&&i>f)||!d&&(s&&h===0||!s&&-i>h))&&(u=!0),u},zl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},sw=function(e){return[e.deltaX,e.deltaY]},ow=function(e){return e&&"current"in e?e.current:e},PB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},NB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TB=0,to=[];function AB(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(TB++)[0],o=m.useState(function(){return yg()})[0],i=m.useRef(e);m.useEffect(function(){i.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=SS([e.lockRef.current],(e.shards||[]).map(ow),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=m.useCallback(function(g,w){if("touches"in g&&g.touches.length===2)return!i.current.allowPinchZoom;var v=zl(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-v[0],_="deltaY"in g?g.deltaY:x[1]-v[1],S,N=g.target,k=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&N.type==="range")return!1;var j=rw(k,N);if(!j)return!0;if(j?S=k:(S=k==="v"?"h":"v",j=rw(k,N)),!j)return!1;if(!r.current&&"changedTouches"in g&&(b||_)&&(r.current=S),!S)return!0;var T=r.current||S;return jB(T,w,g,T==="h"?b:_,!0)},[]),l=m.useCallback(function(g){var w=g;if(!(!to.length||to[to.length-1]!==o)){var v="deltaY"in w?sw(w):zl(w),x=t.current.filter(function(S){return S.name===w.type&&S.target===w.target&&PB(S.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(i.current.shards||[]).map(ow).filter(Boolean).filter(function(S){return S.contains(w.target)}),_=b.length>0?a(w,b[0]):!i.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(g,w,v,x){var b={name:g,delta:w,target:v,should:x};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=m.useCallback(function(g){n.current=zl(g),r.current=void 0},[]),f=m.useCallback(function(g){u(g.type,sw(g),g.target,a(g,e.lockRef.current))},[]),h=m.useCallback(function(g){u(g.type,zl(g),g.target,a(g,e.lockRef.current))},[]);m.useEffect(function(){return to.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,eo),document.addEventListener("touchmove",l,eo),document.addEventListener("touchstart",d,eo),function(){to=to.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,eo),document.removeEventListener("touchmove",l,eo),document.removeEventListener("touchstart",d,eo)}},[]);var p=e.removeScrollBar,y=e.inert;return m.createElement(m.Fragment,null,y?m.createElement(o,{styles:NB(s)}):null,p?m.createElement(TS,{gapMode:"margin"}):null)}const RB=PS(bk,AB);var Ek=m.forwardRef(function(e,t){return m.createElement(hd,xt({},e,{ref:t,sideCar:RB}))});Ek.classNames=hd.classNames;const $B=Ek,IB=[" ","Enter","ArrowUp","ArrowDown"],DB=[" ","Enter"],pd="Select",[md,cv,OB]=MU(pd),[ii,vW]=lv(pd,[OB,vk]),uv=vk(),[MB,Ks]=ii(pd),[LB,FB]=ii(pd),zB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:h,required:p}=e,y=uv(t),[g,w]=m.useState(null),[v,x]=m.useState(null),[b,_]=m.useState(!1),S=FU(u),[N=!1,k]=nw({prop:r,defaultProp:s,onChange:o}),[j,T]=nw({prop:i,defaultProp:a,onChange:l}),M=m.useRef(null),F=g?!!g.closest("form"):!0,[P,L]=m.useState(new Set),C=Array.from(P).map(O=>O.props.value).join(";");return m.createElement(pB,y,m.createElement(MB,{required:p,scope:t,trigger:g,onTriggerChange:w,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:_,contentId:pk(),value:j,onValueChange:T,open:N,onOpenChange:k,dir:S,triggerPointerDownPosRef:M,disabled:h},m.createElement(md.Provider,{scope:t},m.createElement(LB,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(O=>{L(V=>new Set(V).add(O))},[]),onNativeOptionRemove:m.useCallback(O=>{L(V=>{const B=new Set(V);return B.delete(O),B})},[])},n)),F?m.createElement(Nk,{key:C,"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:j,onChange:O=>T(O.target.value),disabled:h},j===void 0?m.createElement("option",{value:""}):null,Array.from(P)):null))},UB="SelectTrigger",BB=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=uv(n),i=Ks(UB,n),a=i.disabled||r,l=Vt(t,i.onTriggerChange),u=cv(n),[d,f,h]=Tk(y=>{const g=u().filter(x=>!x.disabled),w=g.find(x=>x.value===i.value),v=Ak(g,y,w);v!==void 0&&i.onValueChange(v.value)}),p=()=>{a||(i.onOpenChange(!0),h())};return m.createElement(mB,Se({asChild:!0},o),m.createElement(Ct.button,Se({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Pk(i.value)?"":void 0},s,{ref:l,onClick:jt(s.onClick,y=>{y.currentTarget.focus()}),onPointerDown:jt(s.onPointerDown,y=>{const g=y.target;g.hasPointerCapture(y.pointerId)&&g.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&(p(),i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)},y.preventDefault())}),onKeyDown:jt(s.onKeyDown,y=>{const g=d.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(g&&y.key===" ")&&IB.includes(y.key)&&(p(),y.preventDefault())})})))}),VB="SelectValue",WB=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...a}=e,l=Ks(VB,n),{onValueNodeHasChildrenChange:u}=l,d=o!==void 0,f=Vt(t,l.onValueNodeChange);return mr(()=>{u(d)},[u,d]),m.createElement(Ct.span,Se({},a,{ref:f,style:{pointerEvents:"none"}}),Pk(l.value)?m.createElement(m.Fragment,null,i):o)}),HB=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return m.createElement(Ct.span,Se({"aria-hidden":!0},s,{ref:t}),r||"▼")}),KB=e=>m.createElement(vB,Se({asChild:!0},e)),qo="SelectContent",GB=m.forwardRef((e,t)=>{const n=Ks(qo,e.__scopeSelect),[r,s]=m.useState();if(mr(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Bn.createPortal(m.createElement(kk,{scope:e.__scopeSelect},m.createElement(md.Slot,{scope:e.__scopeSelect},m.createElement("div",null,e.children))),o):null}return m.createElement(qB,Se({},e,{ref:t}))}),qn=10,[kk,gd]=ii(qo),qB=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:w,...v}=e,x=Ks(qo,n),[b,_]=m.useState(null),[S,N]=m.useState(null),k=Vt(t,J=>_(J)),[j,T]=m.useState(null),[M,F]=m.useState(null),P=cv(n),[L,C]=m.useState(!1),O=m.useRef(!1);m.useEffect(()=>{if(b)return xg(b)},[b]),XU();const V=m.useCallback(J=>{const[re,...ae]=P().map(ye=>ye.ref.current),[le]=ae.slice(-1),ue=document.activeElement;for(const ye of J)if(ye===ue||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===re&&S&&(S.scrollTop=0),ye===le&&S&&(S.scrollTop=S.scrollHeight),ye==null||ye.focus(),document.activeElement!==ue))return},[P,S]),B=m.useCallback(()=>V([j,b]),[V,j,b]);m.useEffect(()=>{L&&B()},[L,B]);const{onOpenChange:z,triggerPointerDownPosRef:$}=x;m.useEffect(()=>{if(b){let J={x:0,y:0};const re=le=>{var ue,ye,ke,E;J={x:Math.abs(Math.round(le.pageX)-((ue=(ye=$.current)===null||ye===void 0?void 0:ye.x)!==null&&ue!==void 0?ue:0)),y:Math.abs(Math.round(le.pageY)-((ke=(E=$.current)===null||E===void 0?void 0:E.y)!==null&&ke!==void 0?ke:0))}},ae=le=>{J.x<=10&&J.y<=10?le.preventDefault():b.contains(le.target)||z(!1),document.removeEventListener("pointermove",re),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",ae,{capture:!0})}}},[b,z,$]),m.useEffect(()=>{const J=()=>z(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[z]);const[W,A]=Tk(J=>{const re=P().filter(ue=>!ue.disabled),ae=re.find(ue=>ue.ref.current===document.activeElement),le=Ak(re,J,ae);le&&setTimeout(()=>le.ref.current.focus())}),D=m.useCallback((J,re,ae)=>{const le=!O.current&&!ae;(x.value!==void 0&&x.value===re||le)&&(T(J),le&&(O.current=!0))},[x.value]),X=m.useCallback(()=>b==null?void 0:b.focus(),[b]),Y=m.useCallback((J,re,ae)=>{const le=!O.current&&!ae;(x.value!==void 0&&x.value===re||le)&&F(J)},[x.value]),H=r==="popper"?iw:XB,Z=H===iw?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:w}:{};return m.createElement(kk,{scope:n,content:b,viewport:S,onViewportChange:N,itemRefCallback:D,selectedItem:j,onItemLeave:X,itemTextRefCallback:Y,focusSelectedItem:B,selectedItemText:M,position:r,isPositioned:L,searchRef:W},m.createElement($B,{as:ka,allowPinchZoom:!0},m.createElement(YU,{asChild:!0,trapped:x.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:jt(s,J=>{var re;(re=x.trigger)===null||re===void 0||re.focus({preventScroll:!0}),J.preventDefault()})},m.createElement(KU,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>x.onOpenChange(!1)},m.createElement(H,Se({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:J=>J.preventDefault()},v,Z,{onPlaced:()=>C(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:jt(v.onKeyDown,J=>{const re=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!re&&J.key.length===1&&A(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let le=P().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(J.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const ue=J.target,ye=le.indexOf(ue);le=le.slice(ye+1)}setTimeout(()=>V(le)),J.preventDefault()}})}))))))}),XB=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=Ks(qo,n),i=gd(qo,n),[a,l]=m.useState(null),[u,d]=m.useState(null),f=Vt(t,k=>d(k)),h=cv(n),p=m.useRef(!1),y=m.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=i,b=m.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&g&&w&&v){const k=o.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),M=v.getBoundingClientRect();if(o.dir!=="rtl"){const ue=M.left-j.left,ye=T.left-ue,ke=k.left-ye,E=k.width+ke,q=Math.max(E,j.width),G=window.innerWidth-qn,I=qx(ye,[qn,G-q]);a.style.minWidth=E+"px",a.style.left=I+"px"}else{const ue=j.right-M.right,ye=window.innerWidth-T.right-ue,ke=window.innerWidth-k.right-ye,E=k.width+ke,q=Math.max(E,j.width),G=window.innerWidth-qn,I=qx(ye,[qn,G-q]);a.style.minWidth=E+"px",a.style.right=I+"px"}const F=h(),P=window.innerHeight-qn*2,L=g.scrollHeight,C=window.getComputedStyle(u),O=parseInt(C.borderTopWidth,10),V=parseInt(C.paddingTop,10),B=parseInt(C.borderBottomWidth,10),z=parseInt(C.paddingBottom,10),$=O+V+L+z+B,W=Math.min(w.offsetHeight*5,$),A=window.getComputedStyle(g),D=parseInt(A.paddingTop,10),X=parseInt(A.paddingBottom,10),Y=k.top+k.height/2-qn,H=P-Y,Z=w.offsetHeight/2,J=w.offsetTop+Z,re=O+V+J,ae=$-re;if(re<=Y){const ue=w===F[F.length-1].ref.current;a.style.bottom="0px";const ye=u.clientHeight-g.offsetTop-g.offsetHeight,ke=Math.max(H,Z+(ue?X:0)+ye+B),E=re+ke;a.style.height=E+"px"}else{const ue=w===F[0].ref.current;a.style.top="0px";const ke=Math.max(Y,O+g.offsetTop+(ue?D:0)+Z)+ae;a.style.height=ke+"px",g.scrollTop=re-Y+g.offsetTop}a.style.margin=`${qn}px 0`,a.style.minHeight=W+"px",a.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,o.trigger,o.valueNode,a,u,g,w,v,o.dir,r]);mr(()=>b(),[b]);const[_,S]=m.useState();mr(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const N=m.useCallback(k=>{k&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return m.createElement(YB,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:N},m.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_}},m.createElement(Ct.div,Se({},s,{ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}}))))}),iw=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qn,...o}=e,i=uv(n);return m.createElement(gB,Se({},i,o,{ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[YB,ZB]=ii(qo,{}),aw="SelectViewport",JB=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=gd(aw,n),o=ZB(aw,n),i=Vt(t,s.onViewportChange),a=m.useRef(0);return m.createElement(m.Fragment,null,m.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),m.createElement(md.Slot,{scope:n},m.createElement(Ct.div,Se({"data-radix-select-viewport":"",role:"presentation"},r,{ref:i,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:jt(r.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const h=Math.abs(a.current-u.scrollTop);if(h>0){const p=window.innerHeight-qn*2,y=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),w=Math.max(y,g);if(w<p){const v=w+h,x=Math.min(p,v),b=v-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,d.style.justifyContent="flex-end")}}}a.current=u.scrollTop})}))))}),QB="SelectGroup",[yW,eV]=ii(QB),tV="SelectLabel",nV=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=eV(tV,n);return m.createElement(Ct.div,Se({id:s.id},r,{ref:t}))}),Ep="SelectItem",[rV,jk]=ii(Ep),sV=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=e,a=Ks(Ep,n),l=gd(Ep,n),u=a.value===r,[d,f]=m.useState(o??""),[h,p]=m.useState(!1),y=Vt(t,v=>{var x;return(x=l.itemRefCallback)===null||x===void 0?void 0:x.call(l,v,r,s)}),g=pk(),w=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.createElement(rV,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:m.useCallback(v=>{f(x=>{var b;return x||((b=v==null?void 0:v.textContent)!==null&&b!==void 0?b:"").trim()})},[])},m.createElement(md.ItemSlot,{scope:n,value:r,disabled:s,textValue:d},m.createElement(Ct.div,Se({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},i,{ref:y,onFocus:jt(i.onFocus,()=>p(!0)),onBlur:jt(i.onBlur,()=>p(!1)),onPointerUp:jt(i.onPointerUp,w),onPointerMove:jt(i.onPointerMove,v=>{if(s){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:jt(i.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}}),onKeyDown:jt(i.onKeyDown,v=>{var x;((x=l.searchRef)===null||x===void 0?void 0:x.current)!==""&&v.key===" "||(DB.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})}))))}),Ul="SelectItemText",oV=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,i=Ks(Ul,n),a=gd(Ul,n),l=jk(Ul,n),u=FB(Ul,n),[d,f]=m.useState(null),h=Vt(t,v=>f(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)===null||x===void 0?void 0:x.call(a,v,l.value,l.disabled)}),p=d==null?void 0:d.textContent,y=m.useMemo(()=>m.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},p),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return mr(()=>(g(y),()=>w(y)),[g,w,y]),m.createElement(m.Fragment,null,m.createElement(Ct.span,Se({id:l.textId},o,{ref:h})),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Bn.createPortal(o.children,i.valueNode):null)}),iV="SelectItemIndicator",aV=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return jk(iV,n).isSelected?m.createElement(Ct.span,Se({"aria-hidden":!0},r,{ref:t})):null}),lV=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return m.createElement(Ct.div,Se({"aria-hidden":!0},r,{ref:t}))});function Pk(e){return e===""||e===void 0}const Nk=m.forwardRef((e,t)=>{const{value:n,...r}=e,s=m.useRef(null),o=Vt(t,s),i=xB(n);return m.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&d){const f=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(f)}},[i,n]),m.createElement(wB,{asChild:!0},m.createElement("select",Se({},r,{ref:o,defaultValue:n})))});Nk.displayName="BubbleSelect";function Tk(e){const t=pr(e),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(i=>{const a=n.current+i;t(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[t]),o=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function Ak(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=cV(e,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==n));const l=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function cV(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const uV=zB,Rk=BB,dV=WB,fV=HB,hV=KB,$k=GB,pV=JB,Ik=nV,Dk=sV,mV=oV,gV=aV,Ok=lV,Mk=uV,Lk=dV,dv=ce.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(Rk,{ref:r,className:he("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:[t,c.jsx(fV,{asChild:!0,children:c.jsx(d$,{className:"h-4 w-4 opacity-50"})})]}));dv.displayName=Rk.displayName;const fv=ce.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>c.jsx(hV,{children:c.jsx($k,{ref:s,className:he("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:c.jsx(pV,{className:he("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));fv.displayName=$k.displayName;const vV=ce.forwardRef(({className:e,...t},n)=>c.jsx(Ik,{ref:n,className:he("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));vV.displayName=Ik.displayName;const tu=ce.forwardRef(({className:e,children:t,...n},r)=>c.jsxs(Dk,{ref:r,className:he("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(gV,{children:c.jsx(Dm,{className:"h-4 w-4"})})}),c.jsx(mV,{children:t})]}));tu.displayName=Dk.displayName;const yV=ce.forwardRef(({className:e,...t},n)=>c.jsx(Ok,{ref:n,className:he("-mx-1 my-1 h-px bg-muted",e),...t}));yV.displayName=Ok.displayName;const xV=({webtoonTitle:e,chapterNumber:t,webtoonId:n,currentChapterId:r,allChapters:s,onChapterChange:o,onToggleComments:i,showComments:a,isVisible:l,mainNavHeight:u,onPrevChapter:d,onNextChapter:f,hasPrevChapter:h,hasNextChapter:p})=>l?c.jsx(ge.header,{initial:{y:-80},animate:{y:0},exit:{y:-80},transition:{type:"tween",duration:.3},id:"reader-header",className:"fixed top-0 left-0 right-0 z-20 bg-gradient-to-b from-black/70 via-black/50 to-transparent p-2 md:p-3",style:{height:`${u}px`},children:c.jsxs("div",{className:"container mx-auto flex justify-between items-center h-full",children:[c.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 min-w-0",children:[c.jsx(te,{variant:"ghost",size:"icon",asChild:!0,className:"w-8 h-8 md:w-10 md:h-10 text-white hover:bg-white/10 hover:text-white",children:c.jsx(_e,{to:`/webtoon/${slug}`,title:"Retour au webtoon",children:c.jsx(Pu,{className:"h-4 w-4 md:h-5 md:w-5"})})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:d,disabled:!h,title:"Chapitre Précédent",className:"w-8 h-8 md:w-10 md:h-10 text-white hover:bg-white/10 hover:text-white",children:c.jsx(Bh,{className:"h-4 w-4 md:h-5 md:w-5"})}),c.jsxs("div",{className:"font-semibold truncate shrink text-sm md:text-base text-white",title:e,children:[c.jsx("span",{className:"hidden sm:inline",children:e}),c.jsx("span",{className:"sm:hidden",children:"WT"})]}),c.jsxs("span",{className:"text-xs md:text-sm text-gray-300 flex-shrink-0",children:["- Ch. ",t]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:f,disabled:!p,title:"Chapitre Suivant",className:"w-8 h-8 md:w-10 md:h-10 text-white hover:bg-white/10 hover:text-white",children:c.jsx(Vh,{className:"h-4 w-4 md:h-5 md:w-5"})})]}),c.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 flex-shrink-0",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:i,title:"Commentaires",className:`w-8 h-8 md:w-10 md:h-10 text-white hover:bg-white/10 hover:text-white ${a?"bg-white/20":""}`,children:c.jsx(x_,{className:`h-4 w-4 md:h-5 md:w-5 ${a?"text-primary-foreground":""}`})}),c.jsxs(Mk,{onValueChange:o,value:r,children:[c.jsx(dv,{className:"w-[100px] sm:w-[130px] md:w-[150px] h-8 md:h-9 text-xs bg-black/40 border-gray-500 hover:bg-black/60 focus:ring-primary text-white",children:c.jsx(Lk,{placeholder:"Chapitre"})}),c.jsx(fv,{className:"bg-neutral-800 border-neutral-700 text-white max-h-60",children:s.length>0?s.map(y=>c.jsxs(tu,{value:y.number,children:["Chapitre ",y.number]},y.number)):c.jsxs(tu,{value:r,disabled:!0,className:"text-xs md:text-sm",children:["Chapitre ",t]})})]}),c.jsx(te,{variant:"ghost",size:"icon",asChild:!0,className:"w-8 h-8 md:w-10 md:h-10 text-white hover:bg-white/10 hover:text-white",children:c.jsxs(_e,{to:"/",title:"Accueil",children:[" ",c.jsx(Nu,{className:"h-4 w-4 md:h-5 md:w-5"})," "]})}),c.jsx(te,{variant:"ghost",size:"icon",asChild:!0,className:"w-8 h-8 md:w-10 md:h-10 text-red-400 hover:bg-red-500/20 hover:text-red-300",children:c.jsxs(_e,{to:`/webtoon/${n}`,title:"Quitter le lecteur",children:[" ",c.jsx(Sn,{className:"h-4 w-4 md:h-5 md:w-5"})," "]})})]})]})}):null,Fk=ce.forwardRef(({page:e,pageIndex:t,webtoonTitle:n,chapterNumber:r,onPageClick:s,zoomLevel:o,readingMode:i,isCurrentPage:a,mainNavHeight:l,shouldPreload:u},d)=>{const f=o/100,h={width:i==="webtoon"||i==="vertical"?`${Math.min(100,o)}%`:"auto",maxWidth:i==="webtoon"||i==="vertical"?`calc(900px * ${f>1?1:f})`:"none",margin:"0 auto",padding:0},p={width:"100%",height:i==="horizontal"?`calc(100vh - ${l}px - 40px)`:"auto",maxWidth:"100%",maxHeight:i==="horizontal"?`calc(100vh - ${l}px - 40px)`:"none",objectFit:"contain",display:"block",verticalAlign:"top",margin:0,padding:0},y=["flex-shrink-0",i==="webtoon"||i==="vertical"?"w-full m-0 p-0":"h-full snap-center flex justify-center items-center px-0.5",i==="horizontal"&&!a?"opacity-70 scale-95":"",i==="horizontal"&&a?"opacity-100 scale-100":"","transition-all duration-300 ease-in-out"].join(" "),g=i==="horizontal"?{width:"100vw",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}:{width:"100%",padding:0,margin:0};return c.jsx("div",{ref:d,className:y,"data-page-index":t,style:g,onClick:i!=="horizontal"?s:void 0,children:c.jsx(ts,{mode:"wait",children:c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex justify-center items-start",style:{...h},children:e!=null&&e.publicUrl?c.jsx("img",{src:e.publicUrl,alt:`Page ${t+1} de ${n} Chapitre ${r}`,style:p,loading:u?"eager":"lazy",decoding:"async",onError:w=>{w.target.onerror=null,w.target.alt=`Erreur de chargement - Page ${t+1}`,w.target.src="data:image/svg+xml;charset=utf8,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20640%20960'%3E%3Crect%20width='640'%20height='960'%20fill='%232d2d2d'%20/%3E%3Ctext%20x='50%25'%20y='50%25'%20font-family='Arial'%20font-size='24'%20fill='%23ccc'%20text-anchor='middle'%20dominant-baseline='middle'%3EImage%20indisponible%3C/text%3E%3C/svg%3E"}}):c.jsx("div",{className:"flex items-center justify-center text-muted-foreground bg-neutral-800",style:{width:i==="webtoon"||i==="vertical"?"80%":"300px",height:i==="horizontal"?"80%":"400px",minHeight:"300px",margin:"auto"},children:c.jsxs("p",{children:["Chargement page ",t+1,"..."]})})},(e==null?void 0:e.id)||`page-motion-${t}`)})})});Fk.displayName="ReaderPageContent";function zk(e,[t,n]){return Math.min(n,Math.max(t,e))}function Uk(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Bk=["PageUp","PageDown"],Vk=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wk={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ai="Slider",[kp,wV,bV]=Cu(ai),[Hk,xW]=tn(ai,[bV]),[_V,vd]=Hk(ai),Kk=m.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:o=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:y,...g}=e,w=m.useRef(new Set),v=m.useRef(0),b=i==="horizontal"?CV:SV,[_=[],S]=zs({prop:d,defaultProp:u,onChange:F=>{var L;(L=[...w.current][v.current])==null||L.focus(),f(F)}}),N=m.useRef(_);function k(F){const P=NV(_,F);M(F,P)}function j(F){M(F,v.current)}function T(){const F=N.current[v.current];_[v.current]!==F&&h(_)}function M(F,P,{commit:L}={commit:!1}){const C=$V(o),O=IV(Math.round((F-r)/o)*o+r,C),V=zk(O,[r,s]);S((B=[])=>{const z=jV(B,V,P);if(RV(z,l*o)){v.current=z.indexOf(V);const $=String(z)!==String(B);return $&&L&&h(z),$?z:B}else return B})}return c.jsx(_V,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:v,thumbs:w.current,values:_,orientation:i,form:y,children:c.jsx(kp.Provider,{scope:e.__scopeSlider,children:c.jsx(kp.Slot,{scope:e.__scopeSlider,children:c.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:t,onPointerDown:me(g.onPointerDown,()=>{a||(N.current=_)}),min:r,max:s,inverted:p,onSlideStart:a?void 0:k,onSlideMove:a?void 0:j,onSlideEnd:a?void 0:T,onHomeKeyDown:()=>!a&&M(r,0,{commit:!0}),onEndKeyDown:()=>!a&&M(s,_.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:P})=>{if(!a){const O=Bk.includes(F.key)||F.shiftKey&&Vk.includes(F.key)?10:1,V=v.current,B=_[V],z=o*O*P;M(B+z,V,{commit:!0})}}})})})})});Kk.displayName=ai;var[Gk,qk]=Hk(ai,{startEdge:"left",endEdge:"right",size:"width",direction:1}),CV=m.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:o,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...d}=e,[f,h]=m.useState(null),p=$e(t,b=>h(b)),y=m.useRef(void 0),g=rd(s),w=g==="ltr",v=w&&!o||!w&&o;function x(b){const _=y.current||f.getBoundingClientRect(),S=[0,_.width],k=hv(S,v?[n,r]:[r,n]);return y.current=_,k(b-_.left)}return c.jsx(Gk,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:c.jsx(Xk,{dir:g,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const _=x(b.clientX);i==null||i(_)},onSlideMove:b=>{const _=x(b.clientX);a==null||a(_)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:b=>{const S=Wk[v?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:S?-1:1})}})})}),SV=m.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:o,onSlideMove:i,onSlideEnd:a,onStepKeyDown:l,...u}=e,d=m.useRef(null),f=$e(t,d),h=m.useRef(void 0),p=!s;function y(g){const w=h.current||d.current.getBoundingClientRect(),v=[0,w.height],b=hv(v,p?[r,n]:[n,r]);return h.current=w,b(g-w.top)}return c.jsx(Gk,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:c.jsx(Xk,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=y(g.clientY);o==null||o(w)},onSlideMove:g=>{const w=y(g.clientY);i==null||i(w)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=Wk[p?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})})}),Xk=m.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:l,...u}=e,d=vd(ai,n);return c.jsx(we.span,{...u,ref:t,onKeyDown:me(e.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):Bk.concat(Vk).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:me(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():r(f)}),onPointerMove:me(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:me(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),o(f))})})}),Yk="SliderTrack",Zk=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=vd(Yk,n);return c.jsx(we.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});Zk.displayName=Yk;var jp="SliderRange",Jk=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=vd(jp,n),o=qk(jp,n),i=m.useRef(null),a=$e(t,i),l=s.values.length,u=s.values.map(h=>tj(h,s.min,s.max)),d=l>1?Math.min(...u):0,f=100-Math.max(...u);return c.jsx(we.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...e.style,[o.startEdge]:d+"%",[o.endEdge]:f+"%"}})});Jk.displayName=jp;var Pp="SliderThumb",Qk=m.forwardRef((e,t)=>{const n=wV(e.__scopeSlider),[r,s]=m.useState(null),o=$e(t,a=>s(a)),i=m.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return c.jsx(EV,{...e,ref:o,index:i})}),EV=m.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...o}=e,i=vd(Pp,n),a=qk(Pp,n),[l,u]=m.useState(null),d=$e(t,x=>u(x)),f=l?i.form||!!l.closest("form"):!0,h=Wg(l),p=i.values[r],y=p===void 0?0:tj(p,i.min,i.max),g=PV(r,i.values.length),w=h==null?void 0:h[a.size],v=w?TV(w,y,a.direction):0;return m.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${v}px)`},children:[c.jsx(kp.ItemSlot,{scope:e.__scopeSlider,children:c.jsx(we.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:d,style:p===void 0?{display:"none"}:e.style,onFocus:me(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),f&&c.jsx(ej,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:p},r)]})});Qk.displayName=Pp;var kV="RadioBubbleInput",ej=m.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=m.useRef(null),o=$e(s,r),i=Uk(t);return m.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&d){const f=new Event("input",{bubbles:!0});d.call(a,t),a.dispatchEvent(f)}},[i,t]),c.jsx(we.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});ej.displayName=kV;function jV(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,o)=>s-o)}function tj(e,t,n){const o=100/(n-t)*(e-t);return zk(o,[0,100])}function PV(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function NV(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function TV(e,t,n){const r=e/2,o=hv([0,50],[0,r]);return(r-o(t)*n)*n}function AV(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function RV(e,t){if(t>0){const n=AV(e);return Math.min(...n)>=t}return!0}function hv(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function $V(e){return(String(e).split(".")[1]||"").length}function IV(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var nj=Kk,DV=Zk,OV=Jk,MV=Qk;const rj=ce.forwardRef(({className:e,...t},n)=>c.jsxs(nj,{ref:n,className:he("relative flex w-full touch-none select-none items-center",e),...t,children:[c.jsx(DV,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx(OV,{className:"absolute h-full bg-primary"})}),c.jsx(MV,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));rj.displayName=nj.displayName;const LV=({zoomLevel:e,onZoomChange:t,readingMode:n,onReadingModeChange:r,isVisible:s})=>{if(!s)return null;const o=l=>{t(l[0])},i=()=>{t(Math.min(e+10,200))},a=()=>{t(Math.max(e-10,25))};return c.jsx("div",{id:"reader-controls-menu",className:"fixed bottom-4 right-4 z-20 md:bottom-4 md:right-4",children:c.jsxs(kE,{children:[c.jsx(jE,{asChild:!0,children:c.jsx(te,{variant:"secondary",size:"icon",className:"rounded-full shadow-lg w-10 h-10 md:w-12 md:h-12 bg-neutral-800 hover:bg-neutral-700 border border-neutral-600 text-white",children:c.jsx(E$,{className:"h-5 w-5 md:h-6 md:w-6"})})}),c.jsxs(ev,{className:"w-56 sm:w-64 p-3 space-y-3 bg-neutral-800/90 backdrop-blur-md border-neutral-700/50 rounded-xl shadow-2xl mb-2 text-white",align:"end",sideOffset:8,children:[c.jsx(tv,{className:"text-sm md:text-base font-semibold text-center",children:"Options de Lecture"}),c.jsx(Sa,{className:"bg-neutral-700"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs sm:text-sm font-medium mb-1.5 text-center",children:["Zoom (",e,"%)"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(te,{variant:"outline",size:"icon",onClick:a,className:"h-7 w-7 sm:h-8 sm:w-8 bg-neutral-700 border-neutral-600 hover:bg-neutral-600 text-white",children:c.jsx(x$,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),c.jsx(rj,{value:[e],onValueChange:o,min:25,max:200,step:5,className:"flex-grow [&>span:first-child]:bg-primary [&>span:first-child_span]:bg-white"}),c.jsx(te,{variant:"outline",size:"icon",onClick:i,className:"h-7 w-7 sm:h-8 sm:w-8 bg-neutral-700 border-neutral-600 hover:bg-neutral-600 text-white",children:c.jsx(b$,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]}),c.jsx(Sa,{className:"bg-neutral-700"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs sm:text-sm font-medium mb-1.5 text-center",children:"Mode de Lecture"}),c.jsxs(g8,{value:n,onValueChange:r,children:[c.jsxs(yp,{value:"webtoon",className:"flex items-center justify-between cursor-pointer p-1.5 sm:p-2 rounded-md hover:bg-neutral-700 focus:bg-neutral-600 text-xs sm:text-sm",children:[c.jsx("span",{children:"Webtoon (Continu)"}),c.jsx(c$,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"})]}),c.jsxs(yp,{value:"horizontal",className:"flex items-center justify-between cursor-pointer p-1.5 sm:p-2 rounded-md hover:bg-neutral-700 focus:bg-neutral-600 text-xs sm:text-sm",children:[c.jsx("span",{children:"Horizontal (Page par page)"}),c.jsx(h$,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"})]})]})]})]})]})})},FV=({currentPageIndex:e,totalPages:t,onPrevPage:n,onNextPage:r,prevChapterNumber:s,nextChapterNumber:o,isVisible:i,showComments:a,navChapters:l,slug:u,navigateToChapterBySlugAndNumber:d})=>!i||a?null:c.jsxs(ge.footer,{initial:{y:80},animate:{y:0},exit:{y:80},transition:{type:"tween",duration:.3},id:"reader-footer",className:"fixed bottom-0 left-0 right-0 z-20 bg-gradient-to-t from-black/70 via-black/50 to-transparent p-2 md:p-3",children:[c.jsxs("div",{className:"container mx-auto flex justify-between items-center h-10 md:h-12",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:n,disabled:e===0&&!s,title:e===0&&s?`Chapitre Précédent (${s})`:"Page Précédente",className:"text-white hover:bg-white/10 hover:text-white w-10 h-10 md:w-12 md:h-12",children:e===0&&s?c.jsx(Bh,{className:"h-5 w-5 md:h-6 md:w-6"}):c.jsx(p_,{className:"h-5 w-5 md:h-6 md:w-6"})}),c.jsxs("span",{className:"text-sm text-gray-300",children:["Page ",e+1," / ",t]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:r,disabled:e===t-1&&!o,title:e===t-1&&o?`Chapitre Suivant (${o})`:"Page Suivante",className:"text-white hover:bg-white/10 hover:text-white w-10 h-10 md:w-12 md:h-12",children:e===t-1&&o?c.jsx(Vh,{className:"h-5 w-5 md:h-6 md:w-6"}):c.jsx(Om,{className:"h-5 w-5 md:h-6 md:w-6"})})]}),c.jsxs("div",{className:"container mx-auto flex justify-between items-center h-10 md:h-12",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>l.previous&&d(u,l.previous.number),disabled:!l.previous,title:l.previous?`Chapitre Précédent (${l.previous.number})`:"Chapitre Précédent",className:"text-white hover:bg-white/10 hover:text-white w-10 h-10 md:w-12 md:h-12",children:c.jsx(Bh,{className:"h-5 w-5 md:h-6 md:w-6"})}),c.jsx(te,{variant:"ghost",size:"icon",onNextChapter:()=>l.next&&d(u,l.next.number),disabled:!l.next,title:l.next?`Chapitre Suivant (${l.next.number})`:"Chapitre Suivant",className:"text-white hover:bg-white/10 hover:text-white w-10 h-10 md:w-12 md:h-12",children:c.jsx(Vh,{className:"h-5 w-5 md:h-6 md:w-6"})})]})]}),zV=({isVisible:e,onClose:t,webtoonId:n,chapterId:r,chapterNumber:s,slug:o})=>e?c.jsx(ts,{children:c.jsxs(ge.aside,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},id:"reader-comments-panel",className:"fixed top-0 right-0 h-full w-full md:w-[380px] bg-neutral-900 border-l border-neutral-700 shadow-lg z-30 flex flex-col text-white",children:[c.jsxs("div",{className:"p-3 md:p-4 border-b border-neutral-700 flex justify-between items-center",children:[c.jsxs("h3",{className:"text-base md:text-lg font-semibold",children:["Commentaires (Ch. ",s,")"]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:t,title:"Fermer les commentaires",className:"text-neutral-300 hover:bg-neutral-700 hover:text-white",children:c.jsx(Sn,{className:"h-5 w-5"})})]}),c.jsx("div",{className:"flex-grow overflow-y-auto p-3 md:p-4",children:c.jsx(ck,{slug:o,chapterNumber:s})})]})}):null,If=64,UV="https://ko-fi.com/starboundcomics",Df=()=>{var X,Y;const e=useNavigate(),t=useLocation(),{user:n,userRole:r}=Wt(),{toast:s}=at(),{slug:o,chapterNumber:i}=$a(),[a,l]=m.useState({webtoonInfo:null,currentChapter:null,allChaptersInWebtoon:[],navChapters:{previous:null,next:null}}),[u,d]=m.useState(!0),[f,h]=m.useState(null),[p,y]=m.useState(0),[g,w]=m.useState(!0),[v,x]=m.useState(localStorage.getItem("readingMode")||"webtoon"),[b,_]=m.useState(parseFloat(localStorage.getItem("zoomLevel"))||100),[S,N]=m.useState(!1),k=m.useRef(null),j=m.useRef(new Set),T=m.useRef(null),M=m.useRef([]),F=m.useCallback(async(H,Z,J,re)=>{var ae;d(!0),h(null),j.current.clear(),M.current=[],y(0),T.current&&(T.current.scrollTop=0);try{const le=await TE(H,J,re);if(!le){h("Chapitre non trouvé ou impossible à charger."),l(E=>({...E,currentChapter:null,webtoonInfo:null}));return}if(le.accessDenied){l(E=>({...E,currentChapter:le,webtoonInfo:{id:le.webtoonId,title:le.webtoonTitle}})),s({title:"Accès Restreint",description:`Ce chapitre est réservé aux membres avec les rôles: ${le.required_roles.join(", ")}.`,variant:"destructive",duration:7e3});return}await n7(H);const{data:ue,error:ye}=await ie.from("chapters").select("id, number").eq("webtoon_id",Z).order("number",{ascending:!0});if(ye)throw ye;const ke=await t7(Z,le.number,J,re);l({webtoonInfo:{id:le.webtoonId,title:le.webtoonTitle,showPublicViews:le.webtoonShowPublicViews},currentChapter:le,allChaptersInWebtoon:ue||[],navChapters:{previous:ke.previousChapter,next:ke.nextChapter}}),J&&await UM(J,H),(ae=le.pages)==null||ae.slice(0,3).forEach(E=>{if(E.publicUrl&&!j.current.has(E.publicUrl)){const q=new Image;q.src=E.publicUrl,j.current.add(E.publicUrl)}})}catch(le){console.error("Failed to fetch chapter:",le),h(`Impossible de charger le chapitre: ${le.message}`),s({title:"Erreur de chargement",description:`Impossible de charger le chapitre: ${le.message}`,variant:"destructive"}),l(ue=>({...ue,currentChapter:null,webtoonInfo:null}))}finally{d(!1)}},[s]);m.useEffect(()=>{F(o,i,n==null?void 0:n.id,r)},[o,i,n==null?void 0:n.id,r,F,t.key]),m.useEffect(()=>{localStorage.setItem("readingMode",v)},[v]),m.useEffect(()=>{localStorage.setItem("zoomLevel",b.toString())},[b]),m.useEffect(()=>{if(!u&&a.currentChapter&&!a.currentChapter.accessDenied&&a.currentChapter.pages.length>0){const H=[],Z=v==="horizontal"?2:3;for(let J=1;J<=Z;J++)p+J<a.currentChapter.pages.length&&H.push(a.currentChapter.pages[p+J].publicUrl),v==="horizontal"&&p-J>=0&&H.push(a.currentChapter.pages[p-J].publicUrl);H.forEach(J=>{if(J&&!j.current.has(J)){const re=new Image;re.src=J,j.current.add(J)}})}},[p,a.currentChapter,u,v]);const P=m.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{S||w(!1)},5e3)},[S]);m.useEffect(()=>(g?P():k.current&&clearTimeout(k.current),()=>clearTimeout(k.current)),[g,P]);const L=()=>{g||w(!0),P()},C=()=>{N(!S),g||w(!0)},O=(H,Z)=>{H&&Z&&e(`/webtoon/${H}/chapter/${Z}`)},V=H=>{var J,re;const Z=((re=(J=a.currentChapter)==null?void 0:J.pages)==null?void 0:re.length)||0;H==="next"?p<Z-1?y(ae=>ae+1):a.navChapters.next&&O(a.navChapters.next.number):H==="prev"&&(p>0?y(ae=>ae-1):a.navChapters.previous&&O(a.navChapters.previous.number))},B=H=>{var J,re,ae;if(["reader-controls-menu","reader-header","reader-comments-panel","reader-footer"].some(le=>{var ue;return(ue=document.getElementById(le))==null?void 0:ue.contains(H.target)})||H.target.closest('button, a, input, select, [role="slider"], [role="menuitemradio"]')){P();return}if((J=T.current)!=null&&J.contains(H.target))if(v==="horizontal"&&((ae=(re=a.currentChapter)==null?void 0:re.pages)==null?void 0:ae.length)>0){const le=H.clientX,ue=window.innerWidth;le<ue/3?V("prev"):le>ue*2/3?V("next"):w(ye=>!ye)}else w(le=>!le);else w(!g);P()},z=H=>{_(H)};if(m.useEffect(()=>{v==="horizontal"&&M.current[p]&&M.current[p].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},[p,v]),f)return c.jsx(eu,{message:f});if(u||!a.webtoonInfo)return c.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background z-[999]",children:c.jsx(Ae,{className:"h-12 w-12 animate-spin text-primary"})});const{webtoonInfo:$,currentChapter:W,allChaptersInWebtoon:A,navChapters:D}=a;return W!=null&&W.accessDenied?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-neutral-900 to-neutral-800 text-white flex flex-col items-center justify-center p-6 text-center",children:c.jsxs(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring"},className:"bg-neutral-800/50 p-8 md:p-12 rounded-xl shadow-2xl max-w-lg backdrop-blur-sm border border-neutral-700",children:[c.jsx(Mm,{className:"h-20 w-20 md:h-24 md:w-24 text-amber-400 mx-auto mb-6"}),c.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4 text-amber-300",children:"Chapitre Verrouillé"}),c.jsxs("p",{className:"text-neutral-300 mb-3",children:["L'accès au chapitre ",c.jsx("strong",{className:"text-white",children:W.number})," de ",c.jsx("strong",{className:"text-white",children:$.title})," est restreint."]}),c.jsxs("p",{className:"text-sm text-neutral-400 mb-6",children:["Ce contenu est réservé aux utilisateurs ayant les rôles suivants : ",c.jsx("strong",{className:"text-amber-400",children:W.required_roles.join(", ")}),"."]}),c.jsx("p",{className:"text-neutral-300 mb-6",children:"Pour débloquer ce chapitre et soutenir notre travail, envisagez de nous soutenir sur Ko-fi !"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs(te,{onClick:()=>window.open(UV,"_blank"),variant:"default",size:"lg",className:"w-full bg-amber-500 hover:bg-amber-600 text-black font-semibold text-base",children:[c.jsx(m_,{className:"mr-2 h-5 w-5"})," Soutenir sur Ko-fi"]}),c.jsx(te,{onClick:()=>e(`/webtoon/${webtoon.slug}`),variant:"outline",size:"lg",className:"w-full border-neutral-600 hover:bg-neutral-700/50 text-neutral-300 hover:text-white",children:"Retour au Webtoon"})]})]})}):W?c.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black flex flex-col isolate",onClick:B,onTouchStart:L,onMouseMove:L,children:[c.jsx(xV,{webtoonTitle:$.title,chapterNumber:W.number,webtoonId,currentChapterId:chapterId,allChapters:A,onChapterChange:O,onToggleComments:C,showComments:S,isVisible:g,mainNavHeight:If,onPrevChapter:()=>D.previous&&O(D.previous.number),onNextChapter:()=>D.next&&O(D.next.number),hasPrevChapter:!!D.previous,hasNextChapter:!!D.next}),c.jsxs("div",{ref:T,className:`flex-grow overflow-hidden ${v==="horizontal"?"flex flex-row items-center":"overflow-y-auto"}`,style:v==="horizontal"?{scrollSnapType:"x mandatory"}:{paddingTop:`${If}px`},children:[W.pages.map((H,Z)=>c.jsx(Fk,{ref:J=>M.current[Z]=J,page:H,pageIndex:Z,webtoonTitle:$.title,chapterNumber:W.number,onPageClick:()=>{},zoomLevel:b,readingMode:v,isCurrentPage:Z===p,mainNavHeight:If,shouldPreload:Math.abs(Z-p)<=(v==="horizontal"?1:2)||Z<2},H.id||`page-${Z}`)),(v==="webtoon"||v==="vertical")&&W.pages.length>0&&c.jsx("div",{className:"h-20 md:h-32"})]}),c.jsx(FV,{currentPageIndex:p,totalPages:W.pages.length,onPrevPage:()=>V("prev"),onNextPage:()=>V("next"),prevChapterNumber:(X=D.previous)==null?void 0:X.number,nextChapterNumber:(Y=D.next)==null?void 0:Y.number,isVisible:g&&v==="horizontal",showComments:S}),c.jsx(LV,{zoomLevel:b,onZoomChange:z,readingMode:v,onReadingModeChange:x,isVisible:g&&!S}),c.jsx(zV,{slug:o,chapterNumber:i,isVisible:S,onClose:C,webtoonId,chapterId})]}):c.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-background z-[999]",children:[c.jsx(Ae,{className:"h-12 w-12 animate-spin text-primary"}),c.jsx("p",{className:"ml-4 text-lg",children:"Chargement du chapitre..."})]})};var yd="Tabs",[BV,wW]=tn(yd,[ad]),sj=ad(),[VV,pv]=BV(yd),oj=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:l="automatic",...u}=e,d=rd(a),[f,h]=zs({prop:r,onChange:s,defaultProp:o??"",caller:yd});return c.jsx(VV,{scope:n,baseId:js(),value:f,onValueChange:h,orientation:i,dir:d,activationMode:l,children:c.jsx(we.div,{dir:d,"data-orientation":i,...u,ref:t})})});oj.displayName=yd;var ij="TabsList",aj=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=pv(ij,n),i=sj(n);return c.jsx(T2,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:c.jsx(we.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});aj.displayName=ij;var lj="TabsTrigger",cj=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,i=pv(lj,n),a=sj(n),l=fj(i.baseId,r),u=hj(i.baseId,r),d=r===i.value;return c.jsx(A2,{asChild:!0,...a,focusable:!s,active:d,children:c.jsx(we.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:t,onMouseDown:me(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:me(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:me(e.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!s&&f&&i.onValueChange(r)})})})});cj.displayName=lj;var uj="TabsContent",dj=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=e,a=pv(uj,n),l=fj(a.baseId,r),u=hj(a.baseId,r),d=r===a.value,f=m.useRef(d);return m.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),c.jsx(Pn,{present:s||d,children:({present:h})=>c.jsx(we.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});dj.displayName=uj;function fj(e,t){return`${e}-trigger-${t}`}function hj(e,t){return`${e}-content-${t}`}var WV=oj,pj=aj,mj=cj,gj=dj;const HV=WV,vj=ce.forwardRef(({className:e,...t},n)=>c.jsx(pj,{ref:n,className:he("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));vj.displayName=pj.displayName;const Np=ce.forwardRef(({className:e,...t},n)=>c.jsx(mj,{ref:n,className:he("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Np.displayName=mj.displayName;const Tp=ce.forwardRef(({className:e,...t},n)=>c.jsx(gj,{ref:n,className:he("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Tp.displayName=gj.displayName;var KV="Label",yj=m.forwardRef((e,t)=>c.jsx(we.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yj.displayName=KV;var xj=yj;const GV=Im("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=ce.forwardRef(({className:e,...t},n)=>c.jsx(xj,{ref:n,className:he(GV(),e),...t}));Ce.displayName=xj.displayName;const qV=()=>{var b,_;const[e,t]=m.useState(""),[n,r]=m.useState(""),[s,o]=m.useState(""),[i,a]=m.useState(!1),[l,u]=m.useState(null),[d,f]=m.useState(!1),{signIn:h,signUp:p}=Wt(),y=as(),g=wr(),{toast:w}=at(),v=((_=(b=g.state)==null?void 0:b.from)==null?void 0:_.pathname)||"/",x=async S=>{S.preventDefault(),a(!0),u(null);try{if(d){if(!s||s.trim().length<3)throw new Error("Le pseudo doit contenir au moins 3 caractères.");if(s.trim().length>50)throw new Error("Le pseudo ne doit pas dépasser 50 caractères.");if(!/^[a-zA-Z0-9_]+$/.test(s.trim()))throw new Error("Le pseudo ne peut contenir que des lettres, des chiffres et des underscores (_).");if(!e||!n)throw new Error("Email et mot de passe sont requis.");if(n.length<6)throw new Error("Le mot de passe doit contenir au moins 6 caractères.");const{data:N,error:k}=await p({email:e.trim(),password:n,username:s.trim()});if(k)throw k;N.user&&!N.user.email_confirmed_at?(w({title:"Inscription réussie !",description:"Veuillez vérifier votre email pour confirmer votre compte."}),f(!1)):N.user?(w({title:"Inscription et connexion réussies !"}),y(v,{replace:!0})):(w({title:"Inscription réussie !",description:"Vous pouvez maintenant vous connecter."}),f(!1))}else{if(!e||!n)throw new Error("Email et mot de passe sont requis.");const{error:N}=await h({email:e.trim(),password:n});if(N)throw N;w({title:"Connexion réussie !"}),y(v,{replace:!0})}}catch(N){console.error("Auth error:",N),u(N.message||"Une erreur s'est produite."),w({title:"Erreur d'authentification",description:N.message,variant:"destructive"})}finally{a(!1)}};return c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center py-12 px-4",children:c.jsxs(HV,{defaultValue:"login",className:"w-[400px]",onValueChange:S=>{f(S==="signup"),u(null)},children:[c.jsxs(vj,{className:"grid w-full grid-cols-2",children:[c.jsx(Np,{value:"login",children:"Connexion"}),c.jsx(Np,{value:"signup",children:"Inscription"})]}),c.jsx(Tp,{value:"login",children:c.jsxs(Ke,{children:[c.jsxs(Nt,{children:[c.jsx(Tt,{children:"Connexion"}),c.jsx(dr,{children:"Connectez-vous à votre compte pour accéder à vos favoris et plus."})]}),c.jsxs("form",{onSubmit:x,children:[c.jsxs(et,{className:"space-y-4",children:[l&&!d&&c.jsx("p",{className:"text-sm text-destructive bg-destructive/10 p-2 rounded-md",children:l}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"login-email",children:"Email"}),c.jsx(Ve,{id:"login-email",type:"email",placeholder:"nom@exemple.com",value:e,onChange:S=>t(S.target.value),required:!0,disabled:i})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"login-password",children:"Mot de passe"}),c.jsx(Ve,{id:"login-password",type:"password",value:n,onChange:S=>r(S.target.value),required:!0,disabled:i})]})]}),c.jsx(fr,{children:c.jsxs(te,{type:"submit",className:"w-full",disabled:i,children:[i?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):null,i?"Connexion...":"Se connecter"]})})]})]})}),c.jsx(Tp,{value:"signup",children:c.jsxs(Ke,{children:[c.jsxs(Nt,{children:[c.jsx(Tt,{children:"Inscription"}),c.jsx(dr,{children:"Créez un compte pour sauvegarder vos préférences."})]}),c.jsxs("form",{onSubmit:x,children:[c.jsxs(et,{className:"space-y-4",children:[l&&d&&c.jsx("p",{className:"text-sm text-destructive bg-destructive/10 p-2 rounded-md",children:l}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"signup-username",children:"Pseudo"}),c.jsx(Ve,{id:"signup-username",type:"text",placeholder:"Votre pseudo unique",value:s,onChange:S=>o(S.target.value),required:!0,minLength:3,maxLength:50,disabled:i}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"3-50 caractères. Lettres, chiffres, underscores (_)."})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"signup-email",children:"Email"}),c.jsx(Ve,{id:"signup-email",type:"email",placeholder:"nom@exemple.com",value:e,onChange:S=>t(S.target.value),required:!0,disabled:i})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"signup-password",children:"Mot de passe"}),c.jsx(Ve,{id:"signup-password",type:"password",value:n,onChange:S=>r(S.target.value),required:!0,minLength:6,disabled:i}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum 6 caractères."})]})]}),c.jsx(fr,{children:c.jsxs(te,{type:"submit",className:"w-full",disabled:i,children:[i?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):null,i?"Inscription...":"S'inscrire"]})})]})]})})]})})},XV=()=>{const{user:e,profile:t,loading:n,refreshProfile:r}=Wt(),[s,o]=m.useState(""),[i,a]=m.useState(""),[l,u]=m.useState([]),[d,f]=m.useState(!1),[h,p]=m.useState(!0),[y,g]=m.useState(!0),[w,v]=m.useState(!1),[x,b]=m.useState(null),{toast:_}=at(),S=m.useCallback(()=>{t&&(o(t.username||""),a(t.bio||""))},[t]);m.useEffect(()=>{t?(S(),p(!1)):!n&&e&&r().finally(()=>p(!1))},[t,e,n,S,r]),m.useEffect(()=>{(async()=>{if(e!=null&&e.id){g(!0);try{const F=await FM(e.id);u(F)}catch(F){console.error("Failed to load favorites:",F),_({title:"Erreur",description:"Impossible de charger les favoris.",variant:"destructive"})}finally{g(!1)}}else u([]),g(!1)})()},[e,_]);const N=async M=>{if(M.preventDefault(),!s.trim()||s.trim().length<3){_({title:"Erreur",description:"Pseudo invalide (min 3 caractères).",variant:"destructive"});return}v(!0),b(null);try{const F={username:s.trim(),bio:i.trim()};await SM(e.id,F),await r(),_({title:"Succès",description:"Profil mis à jour."}),f(!1)}catch(F){console.error("Profile update error:",F),b(`Erreur: ${F.message}`),_({title:"Erreur",description:`Impossible de mettre à jour: ${F.message}`,variant:"destructive"})}finally{v(!1)}},k=M=>{if(!M)return"?";const F=M.split(" ");return F.length===1?M.substring(0,2).toUpperCase():(F[0][0]+(F.length>1?F[F.length-1][0]:"")).toUpperCase()};if(n||h)return c.jsx("div",{className:"flex justify-center items-center py-20",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})});if(!e||!t)return c.jsx("div",{className:"text-center py-10",children:"Veuillez vous connecter pour voir votre profil. Rechargement des données..."});const j=(t==null?void 0:t.avatarUrl)||"",T=d?s:(t==null?void 0:t.username)||"Non défini";return d||t!=null&&t.bio,c.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{staggerChildren:.1},className:"container mx-auto py-8 px-4 max-w-4xl",children:[c.jsx(ge.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},children:c.jsxs(Ke,{className:"overflow-hidden shadow-lg bg-card/80 backdrop-blur-sm",children:[c.jsx(Nt,{className:"p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[c.jsx("div",{className:"relative group flex-shrink-0",children:c.jsxs(Ja,{className:"h-24 w-24 md:h-32 md:w-32 border-2 border-primary/50 shadow-md",children:[c.jsx(Qa,{src:j,alt:T}),c.jsx(el,{className:"text-3xl",children:k(T)})]})}),c.jsxs("div",{className:"flex-grow space-y-2 text-center sm:text-left",children:[d?c.jsx(Ve,{id:"username",value:s,onChange:M=>o(M.target.value),className:"text-2xl font-bold",disabled:w,maxLength:30,placeholder:"Nom d'utilisateur"}):c.jsx(Tt,{className:"text-3xl font-bold",children:T}),c.jsx(dr,{children:e.email}),c.jsxs(dr,{children:["Rôle: ",c.jsx("span",{className:`font-medium ${(t==null?void 0:t.roleName)==="admin"?"text-destructive":"text-primary"}`,children:(t==null?void 0:t.roleName)||"user"})]})]}),!d&&c.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{f(!0),S()},className:"ml-auto flex-shrink-0",children:[c.jsx(w_,{className:"mr-2 h-4 w-4"})," Modifier le Profil"]})]})}),d&&c.jsx(et,{className:"p-6 border-t",children:c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"bio",children:"Bio (optionnel)"}),c.jsx("textarea",{id:"bio",value:i,onChange:M=>a(M.target.value),className:"mt-1 block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[80px]",disabled:w,maxLength:200,placeholder:"Parlez un peu de vous..."}),c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.length,"/200 caractères"]})]})})}),!d&&(t==null?void 0:t.bio)&&c.jsxs(et,{className:"p-6 border-t",children:[c.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Bio"}),c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.bio})]}),d&&c.jsxs(fr,{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 p-6 border-t",children:[x&&c.jsx("p",{className:"text-sm text-destructive mr-auto",children:x}),c.jsx(te,{variant:"ghost",onClick:()=>{f(!1),S(),b(null)},disabled:w,children:"Annuler"}),c.jsxs(te,{onClick:N,disabled:w||!s.trim()||s.trim().length<3,children:[w?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(Fm,{className:"mr-2 h-4 w-4"}),w?"Sauvegarde...":"Enregistrer"]})]})]})}),c.jsxs(ge.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},className:"mt-12",children:[c.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[c.jsx(v_,{className:"mr-3 h-6 w-6 text-red-500"})," Mes Favoris"]}),y?c.jsx("div",{className:"flex justify-center items-center py-10",children:c.jsx(Ae,{className:"h-6 w-6 animate-spin text-primary"})}):l.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:l.map(M=>(M==null?void 0:M.id)&&c.jsx(uk,{webtoon:M,isFavorite:!0},M.id))}):c.jsx(Xa,{title:"Aucun favori",message:"Vous n'avez pas encore ajouté de webtoon à vos favoris. Explorez notre catalogue !",actionElement:c.jsx(te,{asChild:!0,children:c.jsx(_e,{to:"/webtoons",children:"Explorer les Webtoons"})})})]})]})};var xd="Checkbox",[YV,bW]=tn(xd),[ZV,JV]=YV(xd),wj=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l="on",onCheckedChange:u,form:d,...f}=e,[h,p]=m.useState(null),y=$e(t,_=>p(_)),g=m.useRef(!1),w=h?d||!!h.closest("form"):!0,[v,x]=zs({prop:s,defaultProp:o??!1,onChange:u,caller:xd}),b=m.useRef(v);return m.useEffect(()=>{const _=h==null?void 0:h.form;if(_){const S=()=>x(b.current);return _.addEventListener("reset",S),()=>_.removeEventListener("reset",S)}},[h,x]),c.jsxs(ZV,{scope:n,state:v,disabled:a,children:[c.jsx(we.button,{type:"button",role:"checkbox","aria-checked":Yr(v)?"mixed":v,"aria-required":i,"data-state":Sj(v),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onKeyDown:me(e.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:me(e.onClick,_=>{x(S=>Yr(S)?!0:!S),w&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})}),w&&c.jsx(Cj,{control:h,bubbles:!g.current,name:r,value:l,checked:v,required:i,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Yr(o)?!1:o})]})});wj.displayName=xd;var bj="CheckboxIndicator",_j=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=JV(bj,n);return c.jsx(Pn,{present:r||Yr(o.state)||o.state===!0,children:c.jsx(we.span,{"data-state":Sj(o.state),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});_j.displayName=bj;var QV="CheckboxBubbleInput",Cj=m.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:s,...o},i)=>{const a=m.useRef(null),l=$e(a,i),u=Uk(n),d=Wg(t);m.useEffect(()=>{const h=a.current;if(!h)return;const p=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==n&&g){const w=new Event("click",{bubbles:r});h.indeterminate=Yr(n),g.call(h,Yr(n)?!1:n),h.dispatchEvent(w)}},[u,n,r]);const f=m.useRef(Yr(n)?!1:n);return c.jsx(we.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??f.current,...o,tabIndex:-1,ref:l,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Cj.displayName=QV;function Yr(e){return e==="indeterminate"}function Sj(e){return Yr(e)?"indeterminate":e?"checked":"unchecked"}var Ej=wj,e9=_j;const gr=ce.forwardRef(({className:e,...t},n)=>c.jsx(Ej,{ref:n,className:he("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:c.jsx(e9,{className:he("flex items-center justify-center text-current"),children:c.jsx(Dm,{className:"h-4 w-4"})})}));gr.displayName=Ej.displayName;const t9=()=>{const[e,t]=m.useState([]),[n,r]=m.useState([]),[s,o]=m.useState([]),[i,a]=m.useState(""),[l,u]=m.useState([]),[d,f]=m.useState(!0),[h,p]=m.useState(null);m.useEffect(()=>{(async()=>{f(!0),p(null);try{const[b,_]=await Promise.all([Gu(),zM()]);t(b),r(b),o(_.sort())}catch(b){console.error("Failed to fetch webtoons or tags:",b),p("Impossible de charger les données. Veuillez réessayer plus tard.")}finally{f(!1)}})()},[]),m.useEffect(()=>{let x=[...e];if(i){const b=i.toLowerCase();x=x.filter(_=>_.title.toLowerCase().includes(b)||_.description&&_.description.toLowerCase().includes(b))}l.length>0&&(x=x.filter(b=>l.every(_=>{var S;return(S=b.tags)==null?void 0:S.includes(_)}))),r(x)},[i,l,e]);const y=x=>{u(b=>b.includes(x)?b.filter(_=>_!==x):[...b,x])},g=()=>{a(""),u([])},w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},v={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return c.jsxs("div",{className:"space-y-8",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Toutes les Séries"}),c.jsxs(ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-4 md:p-6 bg-card/50 backdrop-blur-sm rounded-lg border border-border/50 space-y-4",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-grow",children:[c.jsx(Uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(Ve,{type:"text",placeholder:"Rechercher par titre ou description...",value:i,onChange:x=>a(x.target.value),className:"pl-10",disabled:d}),i&&c.jsx(te,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>a(""),children:c.jsx(Sn,{className:"h-4 w-4"})})]}),(i||l.length>0)&&c.jsxs(te,{variant:"outline",onClick:g,disabled:d,children:[c.jsx(Sn,{className:"mr-2 h-4 w-4"})," Effacer Filtres"]})]}),s.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Ce,{className:"flex items-center text-sm font-medium",children:[c.jsx(P$,{className:"mr-2 h-4 w-4"}),"Filtrer par Tags:"]}),c.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:s.map(x=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gr,{id:`tag-${x}`,checked:l.includes(x),onCheckedChange:()=>y(x),disabled:d}),c.jsx(Ce,{htmlFor:`tag-${x}`,className:"text-sm font-normal cursor-pointer hover:text-primary",children:x})]},x))})]})]}),d?c.jsx("div",{className:"flex justify-center items-center py-20",children:c.jsx(Ae,{className:"h-12 w-12 animate-spin text-primary"})}):h?c.jsxs("div",{className:"text-center py-20 bg-destructive/10 text-destructive rounded-lg",children:[c.jsx("p",{className:"text-xl font-semibold mb-2",children:"Erreur"}),c.jsx("p",{children:h}),c.jsx(te,{onClick:()=>window.location.reload(),className:"mt-4",children:"Réessayer"})]}):n.length>0?c.jsx(ge.div,{variants:w,initial:"hidden",animate:"visible",className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6",children:n.map(x=>c.jsx(ge.div,{variants:v,children:c.jsx(_e,{to:`/webtoon/${x.id}`,children:c.jsxs(Ke,{className:"overflow-hidden h-full group manga-card bg-card/70 backdrop-blur-sm border-border/50 hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-muted",children:c.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",alt:`Couverture de ${x.title}`,src:x.coverImageUrl||"https://images.unsplash.com/photo-1637840616499-1349c96347fa",onError:b=>{b.target.onerror=null,b.target.src="https://images.unsplash.com/photo-1637840616499-1349c96347fa"}})}),c.jsxs(et,{className:"p-3",children:[c.jsx("h3",{className:"font-semibold text-sm truncate group-hover:text-primary transition-colors",children:x.title}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.chapterCount||0," Chapitres"]}),x.tags&&x.tags.length>0&&c.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:x.tags.slice(0,3).map(b=>c.jsx("span",{className:"px-1.5 py-0.5 bg-secondary/50 text-secondary-foreground/80 text-[10px] font-medium rounded",children:b},b))})]})]})})},x.id))}):c.jsx(Xa,{title:"Aucun Résultat",message:"Aucun webtoon ne correspond à vos critères de recherche ou de filtrage."})]})},n9=()=>{const{signOut:e}=Wt(),t=[{name:"Dashboard",path:"/admin",icon:Nu},{name:"Webtoons",path:"/admin/webtoons",icon:Pu},{name:"Utilisateurs",path:"/admin/users",icon:Oc},{name:"Rôles (Simplifié)",path:"/admin/roles",icon:b_},{name:"Commentaires",path:"/admin/comments",icon:y_},{name:"Pop-ups",path:"/admin/popups",icon:h_}];return c.jsxs("div",{className:"min-h-screen flex bg-muted/40",children:[c.jsxs("aside",{className:"w-64 bg-background border-r p-6 space-y-6 hidden md:flex flex-col",children:[c.jsxs("div",{children:[c.jsxs(_e,{to:"/",className:"flex items-center space-x-2 mb-8 text-primary",children:[c.jsx(Y0,{className:"h-8 w-8"}),c.jsx("span",{className:"text-2xl font-bold",children:"Panel Admin"})]}),c.jsx("nav",{className:"space-y-1",children:t.map(n=>c.jsxs(M0,{to:n.path,end:n.path==="/admin",className:({isActive:r})=>`flex items-center px-3 py-2.5 rounded-md text-sm font-medium transition-colors ${r?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:[c.jsx(n.icon,{className:"h-5 w-5 mr-3"}),n.name]},n.name))})]}),c.jsx("div",{className:"mt-auto",children:c.jsxs(te,{variant:"ghost",onClick:e,className:"w-full justify-start text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:[c.jsx(zh,{className:"h-5 w-5 mr-3"}),"Déconnexion"]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col",children:[c.jsx("header",{className:"bg-background border-b p-4 md:hidden",children:c.jsxs(_e,{to:"/",className:"flex items-center space-x-2 text-primary",children:[c.jsx(Y0,{className:"h-6 w-6"}),c.jsx("span",{className:"text-xl font-bold",children:"Panel Admin"})]})}),c.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto",children:c.jsx($c,{})}),c.jsx("nav",{className:"md:hidden bg-background border-t grid grid-cols-5 gap-1 p-1 sticky bottom-0",children:t.map(n=>c.jsxs(M0,{to:n.path,end:n.path==="/admin",className:({isActive:r})=>`flex flex-col items-center justify-center p-2 rounded-md text-xs font-medium transition-colors ${r?"bg-primary/10 text-primary":"text-muted-foreground hover:text-primary hover:bg-primary/5"}`,children:[c.jsx(n.icon,{className:"h-5 w-5 mb-0.5"}),c.jsx("span",{className:"truncate",children:n.name})]},n.name+"-mobile"))})]})]})},r9=()=>{const[e,t]=m.useState(0),[n,r]=m.useState(0),[s,o]=m.useState(0),[i,a]=m.useState(0),[l,u]=m.useState(!0),[d,f]=m.useState(null);m.useEffect(()=>{(async()=>{u(!0),f(null);try{const{count:g,error:w}=await ie.from("webtoons").select("*",{count:"exact",head:!0});if(w)throw w;const{count:v,error:x}=await ie.from("chapters").select("*",{count:"exact",head:!0});if(x)throw x;const{data:b,error:_}=await ie.from("webtoons").select("views");if(_)throw _;const S=b.reduce((T,M)=>T+(M.views||0),0),{data:N,error:k}=await ie.from("chapters").select("views");if(k)throw k;const j=N.reduce((T,M)=>T+(M.views||0),0);t(g||0),r(v||0),o(S),a(j)}catch(g){console.error("Failed to fetch dashboard counts:",g),f("Impossible de charger les statistiques.")}finally{u(!1)}})()},[]);const h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},p=({title:y,value:g,icon:w,isLoading:v})=>c.jsx(ge.div,{variants:h,children:c.jsxs(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-md hover:shadow-lg transition-shadow",children:[c.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(Tt,{className:"text-sm font-medium",children:y}),w&&c.jsx(w,{className:"h-5 w-5 text-muted-foreground"})]}),c.jsx(et,{children:v?c.jsx(Ae,{className:"h-6 w-6 animate-spin text-primary"}):c.jsx("div",{className:"text-2xl font-bold",children:g})})]})});return c.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Tableau de Bord Admin"}),d&&c.jsx("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:d}),c.jsxs(ge.div,{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:[c.jsx(p,{title:"Webtoons Gérés",value:e,icon:Zd,isLoading:l}),c.jsx(p,{title:"Chapitres Uploadés",value:n,icon:Zd,isLoading:l}),c.jsx(p,{title:"Total Vues Webtoons",value:s.toLocaleString(),icon:$s,isLoading:l}),c.jsx(p,{title:"Total Vues Chapitres",value:i.toLocaleString(),icon:$s,isLoading:l}),c.jsx(ge.div,{variants:h,className:"lg:col-span-2",children:c.jsxs(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-md hover:shadow-lg transition-shadow opacity-50",children:[c.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[c.jsx(Tt,{className:"text-sm font-medium",children:"Utilisateurs"}),c.jsx(Oc,{className:"h-5 w-5 text-muted-foreground"})]}),c.jsxs(et,{children:[c.jsx("div",{className:"text-2xl font-bold",children:"N/A"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Fonctionnalité à venir"})]})]})})]}),c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},className:"pt-6 border-t border-border",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Actions Rapides"}),c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsx(te,{asChild:!0,children:c.jsxs(_e,{to:"/admin/webtoons/new",children:[c.jsx(Da,{className:"mr-2 h-4 w-4"})," Ajouter un Webtoon"]})}),c.jsx(te,{variant:"outline",asChild:!0,children:c.jsxs(_e,{to:"/admin/webtoons",children:[c.jsx(Zd,{className:"mr-2 h-4 w-4"})," Voir tous les Webtoons"]})})]})]})]})},li=ce.forwardRef(({className:e,...t},n)=>c.jsx("div",{className:"relative w-full overflow-auto",children:c.jsx("table",{ref:n,className:he("w-full caption-bottom text-sm",e),...t})}));li.displayName="Table";const ci=ce.forwardRef(({className:e,...t},n)=>c.jsx("thead",{ref:n,className:he("[&_tr]:border-b",e),...t}));ci.displayName="TableHeader";const wd=ce.forwardRef(({className:e,...t},n)=>c.jsx("tbody",{ref:n,className:he("[&_tr:last-child]:border-0",e),...t}));wd.displayName="TableBody";const s9=ce.forwardRef(({className:e,...t},n)=>c.jsx("tfoot",{ref:n,className:he("bg-primary font-medium text-primary-foreground",e),...t}));s9.displayName="TableFooter";const vr=ce.forwardRef(({className:e,...t},n)=>c.jsx("tr",{ref:n,className:he("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));vr.displayName="TableRow";const Oe=ce.forwardRef(({className:e,...t},n)=>c.jsx("th",{ref:n,className:he("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Oe.displayName="TableHead";const Me=ce.forwardRef(({className:e,...t},n)=>c.jsx("td",{ref:n,className:he("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Me.displayName="TableCell";const o9=ce.forwardRef(({className:e,...t},n)=>c.jsx("caption",{ref:n,className:he("mt-4 text-sm text-muted-foreground",e),...t}));o9.displayName="TableCaption";const i9=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,o]=m.useState(null),{toast:i}=at(),a=async()=>{r(!0),o(null);try{const h=await Gu();t(h.map(p=>({...p,showPublicViews:p.show_public_views||!1})))}catch(h){console.error("Failed to fetch webtoons:",h),o("Impossible de charger la liste des webtoons.")}finally{r(!1)}};m.useEffect(()=>{a()},[]);const l=async(h,p)=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer le webtoon "${p}" et toutes ses données (chapitres, images) ? Cette action est irréversible.`))try{await DM(h),i({title:"Webtoon Supprimé",description:`Le webtoon "${p}" a été supprimé avec succès.`}),a()}catch(y){console.error("Failed to delete webtoon:",y),i({title:"Erreur de suppression",description:`Impossible de supprimer le webtoon "${p}". ${y.message}`,variant:"destructive"})}},u=async(h,p)=>{try{await KM(h,p),t(y=>y.map(g=>g.id===h?{...g,showPublicViews:p}:g)),i({title:"Mise à jour réussie",description:"Visibilité des vues mise à jour."})}catch(y){console.error("Failed to update show_public_views:",y),i({title:"Erreur de mise à jour",description:`Impossible de mettre à jour la visibilité des vues. ${y.message}`,variant:"destructive"})}},d={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},f={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0}};return c.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gérer les Webtoons"}),c.jsx(te,{asChild:!0,children:c.jsxs(_e,{to:"/admin/webtoons/new",children:[c.jsx(Da,{className:"mr-2 h-4 w-4"})," Ajouter un Webtoon"]})})]}),s&&c.jsx("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:s}),c.jsx(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-md",children:c.jsx(et,{className:"p-0",children:n?c.jsxs("div",{className:"flex justify-center items-center p-12",children:[c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"}),c.jsx("span",{className:"ml-3 text-muted-foreground",children:"Chargement..."})]}):e.length>0?c.jsxs(li,{children:[c.jsx(ci,{children:c.jsxs(vr,{children:[c.jsx(Oe,{className:"w-[80px]",children:"Couverture"}),c.jsx(Oe,{children:"Titre"}),c.jsx(Oe,{children:"Chapitres"}),c.jsxs(Oe,{children:[c.jsx($s,{className:"inline-block h-4 w-4 mr-1"})," Vues"]}),c.jsx(Oe,{children:"Afficher Vues"}),c.jsx(Oe,{className:"text-right",children:"Actions"})]})}),c.jsx(ge.tbody,{variants:d,initial:"hidden",animate:"visible",children:e.map(h=>c.jsxs(ge.tr,{variants:f,className:"hover:bg-muted/20",children:[c.jsx(Me,{children:c.jsx("img",{className:"h-16 w-auto object-cover rounded aspect-[3/4] bg-muted",alt:`Couverture ${h.title}`,src:h.coverImageUrl||"https://images.unsplash.com/photo-1637840616499-1349c96347fa",onError:p=>{p.target.onerror=null,p.target.src="https://images.unsplash.com/photo-1637840616499-1349c96347fa"}})}),c.jsx(Me,{className:"font-medium",children:h.title}),c.jsx(Me,{children:h.chapterCount||0}),c.jsx(Me,{children:(h.views||0).toLocaleString()}),c.jsx(Me,{children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gr,{id:`show-views-${h.id}`,checked:h.showPublicViews,onCheckedChange:p=>u(h.id,p)}),c.jsx(Ce,{htmlFor:`show-views-${h.id}`,className:"sr-only",children:"Afficher vues publiquement"})]})}),c.jsxs(Me,{className:"text-right space-x-2",children:[c.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8",asChild:!0,children:c.jsx(_e,{to:`/admin/webtoons/${h.id}/upload`,title:"Uploader Chapitres",children:c.jsx(Tu,{className:"h-4 w-4"})})}),c.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8",asChild:!0,children:c.jsx(_e,{to:`/admin/webtoons/edit/${h.id}`,title:"Modifier Webtoon",children:c.jsx(Lm,{className:"h-4 w-4"})})}),c.jsx(te,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:()=>l(h.id,h.title),title:"Supprimer Webtoon",children:c.jsx(ls,{className:"h-4 w-4"})})]})]},h.id))})]}):s?null:c.jsx(Xa,{title:"Aucun Webtoon Trouvé",message:"Commencez par ajouter votre premier webtoon !",actionText:"Ajouter un Webtoon",onActionClick:()=>{var h;return(h=document.querySelector('a[href="/admin/webtoons/new"]'))==null?void 0:h.click()}})})})]})},lw=()=>{const{webtoonId:e}=$a(),t=as(),{toast:n}=at(),r=!!e,[s,o]=m.useState(null),[i,a]=m.useState(""),[l,u]=m.useState(""),[d,f]=m.useState([]),[h,p]=m.useState(""),[y,g]=m.useState(null),[w,v]=m.useState(""),[x,b]=m.useState(null),[_,S]=m.useState(null),[N,k]=m.useState(""),[j,T]=m.useState(null),[M,F]=m.useState(!1),[P,L]=m.useState(!1),[C,O]=m.useState(!1),[V,B]=m.useState(null),z="https://images.unsplash.com/photo-1637840616499-1349c96347fa",$="https://images.unsplash.com/photo-1647589307181-3681cd0cb2fb";m.useEffect(()=>{(async()=>{if(r){O(!0),B(null);try{const Z=await qu(e);Z?(o(Z),a(Z.title),u(Z.description||""),f(Z.tags||[]),v(Z.coverImageUrl||""),b(Z.cover_image_url||null),k(Z.bannerImageUrl||""),T(Z.banner_image_url||null),F(Z.is_banner||!1),L(Z.show_public_views||!1)):(n({title:"Erreur",description:"Webtoon non trouvé.",variant:"destructive"}),t("/admin/webtoons"))}catch(Z){console.error("Failed to fetch webtoon data:",Z),B("Impossible de charger les données du webtoon."),n({title:"Erreur",description:"Impossible de charger les données.",variant:"destructive"})}finally{O(!1)}}})()},[e,r,t,n]);const W=(H,Z)=>{const J=H.target.files[0];if(J&&J.type.startsWith("image/")){const re=new FileReader;re.onloadend=()=>{Z==="cover"?(g(J),v(re.result)):Z==="banner"&&(S(J),k(re.result))},re.readAsDataURL(J)}else Z==="cover"?(g(null),v((s==null?void 0:s.coverImageUrl)||"")):Z==="banner"&&(S(null),k((s==null?void 0:s.bannerImageUrl)||"")),J&&n({title:"Fichier invalide",description:"Veuillez sélectionner un fichier image.",variant:"destructive"})},A=H=>p(H.target.value),D=H=>{if(H.key==="Enter"||H.key===","){H.preventDefault();const Z=h.trim().toLowerCase();Z&&!d.includes(Z)&&f([...d,Z]),p("")}},X=H=>f(d.filter(Z=>Z!==H)),Y=async H=>{if(H.preventDefault(),!i){n({title:"Champ requis",description:"Le titre est obligatoire.",variant:"destructive"});return}O(!0),B(null);const Z={title:i,description:l,tags:d,coverImageFile:y,existingCoverPath:x,bannerImageFile:_,existingBannerPath:j,is_banner:M,show_public_views:P};try{r?(await IM(e,Z),n({title:"Succès",description:"Webtoon mis à jour."})):(await $M({...Z,id:crypto.randomUUID()}),n({title:"Succès",description:"Webtoon ajouté."})),t("/admin/webtoons")}catch(J){console.error("Failed to save webtoon:",J),B(`Échec: ${J.message}`),n({title:"Erreur",description:`Échec: ${J.message}`,variant:"destructive"})}finally{O(!1)}};return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[c.jsx(te,{variant:"outline",size:"sm",asChild:!0,className:"mb-6",children:c.jsxs(_e,{to:"/admin/webtoons",children:[c.jsx(ju,{className:"mr-2 h-4 w-4"})," Retour"]})}),c.jsxs(Ke,{className:"max-w-2xl mx-auto bg-card/80 backdrop-blur-sm shadow-lg",children:[c.jsxs(Nt,{children:[c.jsx(Tt,{children:r?"Modifier Webtoon":"Ajouter Webtoon"}),c.jsx(dr,{children:"Remplissez les informations. Chapitres ajoutés séparément."})]}),C&&r&&!s?c.jsx("div",{className:"flex justify-center items-center p-12",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})}):c.jsxs("form",{onSubmit:Y,children:[c.jsxs(et,{className:"space-y-6",children:[V&&c.jsx("div",{className:"p-3 bg-destructive/10 text-destructive rounded-md text-sm",children:V}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ce,{htmlFor:"title",children:"Titre"}),c.jsx(Ve,{id:"title",value:i,onChange:H=>a(H.target.value),placeholder:"Titre du Webtoon",required:!0,disabled:C})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ce,{htmlFor:"description",children:"Description"}),c.jsx(Za,{id:"description",value:l,onChange:H=>u(H.target.value),placeholder:"Synopsis...",rows:4,disabled:C})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ce,{htmlFor:"tags",children:"Tags"}),c.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-input rounded-md min-h-[40px] bg-background",children:[d.map(H=>c.jsxs("span",{className:"flex items-center px-2 py-0.5 bg-secondary text-secondary-foreground text-xs font-medium rounded-full",children:[H,c.jsx("button",{type:"button",onClick:()=>X(H),className:"ml-1.5 text-secondary-foreground/70 hover:text-secondary-foreground",disabled:C,"aria-label":`Supprimer tag ${H}`,children:c.jsx(Sn,{className:"h-3 w-3"})})]},H)),c.jsx(Ve,{id:"tags",value:h,onChange:A,onKeyDown:D,placeholder:d.length===0?"Ajouter tags (action, romance)...":"",className:"flex-grow border-none shadow-none focus-visible:ring-0 h-auto p-0 m-0 bg-transparent",disabled:C})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrée ou virgule pour ajouter."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ce,{htmlFor:"coverImage",children:"Image de Couverture"}),c.jsx("img",{src:w||z,alt:"Aperçu Couverture",className:"h-32 w-auto object-cover rounded border border-border aspect-[3/4] bg-muted",onError:H=>{H.target.onerror=null,H.target.src=z}}),c.jsx(Ve,{id:"coverImage",type:"file",accept:"image/*",onChange:H=>W(H,"cover"),className:"file-input",disabled:C}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Laisser vide pour garder l'actuelle (si édition)."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ce,{htmlFor:"bannerImage",children:"Image de Bannière (Optionnel)"}),c.jsx("img",{src:N||$,alt:"Aperçu Bannière",className:"h-32 w-auto object-cover rounded border border-border aspect-[16/9] bg-muted",onError:H=>{H.target.onerror=null,H.target.src=$}}),c.jsx(Ve,{id:"bannerImage",type:"file",accept:"image/*",onChange:H=>W(H,"banner"),className:"file-input",disabled:C}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Si vide, la couverture sera utilisée pour la bannière."})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[c.jsx(gr,{id:"isBanner",checked:M,onCheckedChange:F,disabled:C}),c.jsx(Ce,{htmlFor:"isBanner",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Afficher dans la bannière de la page d'accueil ?"})]}),c.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[c.jsx(gr,{id:"showPublicViews",checked:P,onCheckedChange:L,disabled:C}),c.jsx(Ce,{htmlFor:"showPublicViews",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Afficher le nombre de vues publiquement ?"})]})]}),c.jsx(fr,{children:c.jsxs(te,{type:"submit",className:"ml-auto",disabled:C,children:[C?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(Fm,{className:"mr-2 h-4 w-4"}),C?"Enregistrement...":r?"Enregistrer":"Ajouter"]})})]})]})]})};var mv="Progress",gv=100,[a9,_W]=tn(mv),[l9,c9]=a9(mv),kj=m.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=u9,...i}=e;(s||s===0)&&!cw(s)&&console.error(d9(`${s}`,"Progress"));const a=cw(s)?s:gv;r!==null&&!uw(r,a)&&console.error(f9(`${r}`,"Progress"));const l=uw(r,a)?r:null,u=nu(l)?o(l,a):void 0;return c.jsx(l9,{scope:n,value:l,max:a,children:c.jsx(we.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":nu(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":Nj(l,a),"data-value":l??void 0,"data-max":a,...i,ref:t})})});kj.displayName=mv;var jj="ProgressIndicator",Pj=m.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=c9(jj,n);return c.jsx(we.div,{"data-state":Nj(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});Pj.displayName=jj;function u9(e,t){return`${Math.round(e/t*100)}%`}function Nj(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function nu(e){return typeof e=="number"}function cw(e){return nu(e)&&!isNaN(e)&&e>0}function uw(e,t){return nu(e)&&!isNaN(e)&&e<=t&&e>=0}function d9(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gv}\`.`}function f9(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Tj=kj,h9=Pj;const vv=ce.forwardRef(({className:e,value:t,...n},r)=>c.jsx(Tj,{ref:r,className:he("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:c.jsx(h9,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));vv.displayName=Tj.displayName;const bd=async()=>{const{data:e,error:t}=await ie.from("roles").select("id, name, description, created_at, updated_at").order("name",{ascending:!0});if(t)throw console.error("Error fetching custom roles:",t.message),t;return e},p9=async(e,t)=>{if(!e||e.trim()==="")throw new Error("Le nom du rôle ne peut pas être vide.");if(e.toLowerCase()==="admin"||e.toLowerCase()==="user")throw new Error("Les rôles 'admin' et 'user' sont réservés et ne peuvent pas être créés.");const{data:n,error:r}=await ie.from("roles").insert([{name:e.trim(),description:(t==null?void 0:t.trim())||null}]).select().single();if(r)throw r.code==="23505"?new Error(`Le rôle "${e.trim()}" existe déjà.`):(console.error("Error creating custom role:",r.message),r);return n},m9=async(e,t,n)=>{if(!t||t.trim()==="")throw new Error("Le nom du rôle ne peut pas être vide.");if(t.toLowerCase()==="admin"||t.toLowerCase()==="user")throw new Error("Les rôles 'admin' et 'user' sont réservés et ne peuvent pas être modifiés via cette interface.");const{data:r,error:s}=await ie.from("roles").update({name:t.trim(),description:(n==null?void 0:n.trim())||null}).eq("id",e).select().single();if(s)throw s.code==="23505"?new Error(`Un autre rôle avec le nom "${t.trim()}" existe déjà.`):(console.error("Error updating custom role:",s.message),s);return r},g9=async e=>{const{data:t,error:n}=await ie.from("roles").select("name").eq("id",e).single();if(n||!t)throw console.error("Error fetching role for deletion or role not found:",n==null?void 0:n.message),new Error("Rôle non trouvé ou erreur lors de la récupération.");if(t.name.toLowerCase()==="admin"||t.name.toLowerCase()==="user")throw new Error("Les rôles 'admin' et 'user' sont réservés et ne peuvent pas être supprimés.");const{error:r}=await ie.from("roles").delete().eq("id",e);if(r)throw console.error("Error deleting custom role:",r.message),r;return!0};function Bl(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Aj={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,o){function i(u,d){if(!s[u]){if(!r[u]){var f=typeof Bl=="function"&&Bl;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=s[u]={exports:{}};r[u][0].call(p.exports,function(y){var g=r[u][1][y];return i(g||y)},p,p.exports,n,r,s,o)}return s[u].exports}for(var a=typeof Bl=="function"&&Bl,l=0;l<o.length;l++)i(o[l]);return i}({1:[function(n,r,s){var o=n("./utils"),i=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var u,d,f,h,p,y,g,w=[],v=0,x=l.length,b=x,_=o.getTypeOf(l)!=="string";v<l.length;)b=x-v,f=_?(u=l[v++],d=v<x?l[v++]:0,v<x?l[v++]:0):(u=l.charCodeAt(v++),d=v<x?l.charCodeAt(v++):0,v<x?l.charCodeAt(v++):0),h=u>>2,p=(3&u)<<4|d>>4,y=1<b?(15&d)<<2|f>>6:64,g=2<b?63&f:64,w.push(a.charAt(h)+a.charAt(p)+a.charAt(y)+a.charAt(g));return w.join("")},s.decode=function(l){var u,d,f,h,p,y,g=0,w=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var x,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&b--,l.charAt(l.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=i.uint8array?new Uint8Array(0|b):new Array(0|b);g<l.length;)u=a.indexOf(l.charAt(g++))<<2|(h=a.indexOf(l.charAt(g++)))>>4,d=(15&h)<<4|(p=a.indexOf(l.charAt(g++)))>>2,f=(3&p)<<6|(y=a.indexOf(l.charAt(g++))),x[w++]=u,p!==64&&(x[w++]=d),y!==64&&(x[w++]=f);return x}},{"./support":30,"./utils":32}],2:[function(n,r,s){var o=n("./external"),i=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,f,h,p,y){this.compressedSize=d,this.uncompressedSize=f,this.crc32=h,this.compression=p,this.compressedContent=y}u.prototype={getContentWorker:function(){var d=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,f,h){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var o=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var o=n("./utils"),i=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(u,d,f,h){var p=i,y=h+f;u^=-1;for(var g=h;g<y;g++)u=u>>>8^p[255&(u^d[g])];return-1^u}(0|l,a,a.length,0):function(u,d,f,h){var p=i,y=h+f;u^=-1;for(var g=h;g<y;g++)u=u>>>8^p[255&(u^d.charCodeAt(g))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=o?"uint8array":"array";function d(f,h){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}s.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},s.compressWorker=function(f){return new d("Deflate",f)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function o(p,y){var g,w="";for(g=0;g<y;g++)w+=String.fromCharCode(255&p),p>>>=8;return w}function i(p,y,g,w,v,x){var b,_,S=p.file,N=p.compression,k=x!==u.utf8encode,j=a.transformTo("string",x(S.name)),T=a.transformTo("string",u.utf8encode(S.name)),M=S.comment,F=a.transformTo("string",x(M)),P=a.transformTo("string",u.utf8encode(M)),L=T.length!==S.name.length,C=P.length!==M.length,O="",V="",B="",z=S.dir,$=S.date,W={crc32:0,compressedSize:0,uncompressedSize:0};y&&!g||(W.crc32=p.crc32,W.compressedSize=p.compressedSize,W.uncompressedSize=p.uncompressedSize);var A=0;y&&(A|=8),k||!L&&!C||(A|=2048);var D=0,X=0;z&&(D|=16),v==="UNIX"?(X=798,D|=function(H,Z){var J=H;return H||(J=Z?16893:33204),(65535&J)<<16}(S.unixPermissions,z)):(X=20,D|=function(H){return 63&(H||0)}(S.dosPermissions)),b=$.getUTCHours(),b<<=6,b|=$.getUTCMinutes(),b<<=5,b|=$.getUTCSeconds()/2,_=$.getUTCFullYear()-1980,_<<=4,_|=$.getUTCMonth()+1,_<<=5,_|=$.getUTCDate(),L&&(V=o(1,1)+o(d(j),4)+T,O+="up"+o(V.length,2)+V),C&&(B=o(1,1)+o(d(F),4)+P,O+="uc"+o(B.length,2)+B);var Y="";return Y+=`
\0`,Y+=o(A,2),Y+=N.magic,Y+=o(b,2),Y+=o(_,2),Y+=o(W.crc32,4),Y+=o(W.compressedSize,4),Y+=o(W.uncompressedSize,4),Y+=o(j.length,2),Y+=o(O.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Y+j+O,dirRecord:f.CENTRAL_FILE_HEADER+o(X,2)+Y+o(F.length,2)+"\0\0\0\0"+o(D,4)+o(w,4)+j+O+F}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),f=n("../signature");function h(p,y,g,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=g,this.encodeFileName=w,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(p){var y=p.meta.percent||0,g=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(y+100*(g-w-1))/g:100}}))},h.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var y=this.streamFiles&&!p.file.dir;if(y){var g=i(p,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(p){this.accumulate=!1;var y=this.streamFiles&&!p.file.dir,g=i(p,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),y)this.push({data:function(w){return f.DATA_DESCRIPTOR+o(w.crc32,4)+o(w.compressedSize,4)+o(w.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var p=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var g=this.bytesWritten-p,w=function(v,x,b,_,S){var N=a.transformTo("string",S(_));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(v,2)+o(v,2)+o(x,4)+o(b,4)+o(N.length,2)+N}(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(p){this._sources.push(p);var y=this;return p.on("data",function(g){y.processChunk(g)}),p.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),p.on("error",function(g){y.error(g)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(p){var y=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var g=0;g<y.length;g++)try{y[g].error(p)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,y=0;y<p.length;y++)p[y].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var o=n("../compressions"),i=n("./ZipFileWorker");s.generateWorker=function(a,l,u){var d=new i(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(h,p){f++;var y=function(x,b){var _=x||b,S=o[_];if(!S)throw new Error(_+" is not a valid compression method !");return S}(p.options.compression,l.compression),g=p.options.compressionOptions||l.compressionOptions||{},w=p.dir,v=p.date;p._compressWorker(y,g).withStreamInfo("file",{name:h,dir:w,date:v,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var a in this)typeof this[a]!="function"&&(i[a]=this[a]);return i}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(i,a){return new o().loadAsync(i,a)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var o=n("./utils"),i=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function f(h){return new i.Promise(function(p,y){var g=h.decompressed.getContentWorker().pipe(new u);g.on("error",function(w){y(w)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(h,p){var y=this;return p=o.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(h)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(g){var w=new l(p);return w.load(g),w}).then(function(g){var w=[i.Promise.resolve(g)],v=g.files;if(p.checkCRC32)for(var x=0;x<v.length;x++)w.push(f(v[x]));return i.Promise.all(w)}).then(function(g){for(var w=g.shift(),v=w.files,x=0;x<v.length;x++){var b=v[x],_=b.fileNameStr,S=o.resolve(b.fileNameStr);y.file(S,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:p.createFolders}),b.dir||(y.file(S).unsafeOriginalName=_)}return w.zipComment.length&&(y.comment=w.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var o=n("../utils"),i=n("../stream/GenericWorker");function a(l,u){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}o.inherits(a,i),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var o=n("readable-stream").Readable;function i(a,l,u){o.call(this,l),this._helper=a;var d=this;a.on("data",function(f,h){d.push(f)||d._helper.pause(),u&&u(h)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}n("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,s){function o(S,N,k){var j,T=a.getTypeOf(N),M=a.extend(k||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(S=v(S)),M.createFolders&&(j=w(S))&&x.call(this,j,!0);var F=T==="string"&&M.binary===!1&&M.base64===!1;k&&k.binary!==void 0||(M.binary=!F),(N instanceof f&&N.uncompressedSize===0||M.dir||!N||N.length===0)&&(M.base64=!1,M.binary=!0,N="",M.compression="STORE",T="string");var P=null;P=N instanceof f||N instanceof l?N:y.isNode&&y.isStream(N)?new g(S,N):a.prepareContent(S,N,M.binary,M.optimizedBinaryString,M.base64);var L=new h(S,P,M);this.files[S]=L}var i=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),f=n("./compressedObject"),h=n("./zipObject"),p=n("./generate"),y=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),w=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var N=S.lastIndexOf("/");return 0<N?S.substring(0,N):""},v=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},x=function(S,N){return N=N!==void 0?N:d.createFolders,S=v(S),this.files[S]||o.call(this,S,null,{dir:!0,createFolders:N}),this.files[S]};function b(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var N,k,j;for(N in this.files)j=this.files[N],(k=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&S(k,j)},filter:function(S){var N=[];return this.forEach(function(k,j){S(k,j)&&N.push(j)}),N},file:function(S,N,k){if(arguments.length!==1)return S=this.root+S,o.call(this,S,N,k),this;if(b(S)){var j=S;return this.filter(function(M,F){return!F.dir&&j.test(M)})}var T=this.files[this.root+S];return T&&!T.dir?T:null},folder:function(S){if(!S)return this;if(b(S))return this.filter(function(T,M){return M.dir&&S.test(T)});var N=this.root+S,k=x.call(this,N),j=this.clone();return j.root=k.name,j},remove:function(S){S=this.root+S;var N=this.files[S];if(N||(S.slice(-1)!=="/"&&(S+="/"),N=this.files[S]),N&&!N.dir)delete this.files[S];else for(var k=this.filter(function(T,M){return M.name.slice(0,S.length)===S}),j=0;j<k.length;j++)delete this.files[k[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var N,k={};try{if((k=a.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var j=k.comment||this.comment||"";N=p.generateWorker(this,k,j)}catch(T){(N=new l("error")).error(T)}return new u(N,k.type||"string",k.mimeType)},generateAsync:function(S,N){return this.generateInternalStream(S).accumulate(N)},generateNodeStream:function(S,N){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(N)}};r.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var o=n("./DataReader");function i(a){o.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(i,o),i.prototype.byteAt=function(a){return this.data[this.zero+a]},i.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===u&&this.data[h+2]===d&&this.data[h+3]===f)return h-this.zero;return-1},i.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&u===h[1]&&d===h[2]&&f===h[3]},i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var o=n("../utils");function i(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=i},{"../utils":32}],19:[function(n,r,s){var o=n("./Uint8ArrayReader");function i(a){o.call(this,a)}n("../utils").inherits(i,o),i.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var o=n("./DataReader");function i(a){o.call(this,a)}n("../utils").inherits(i,o),i.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},i.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},i.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},i.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var o=n("./ArrayReader");function i(a){o.call(this,a)}n("../utils").inherits(i,o),i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var o=n("../utils"),i=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(f){var h=o.getTypeOf(f);return o.checkSupport(h),h!=="string"||i.uint8array?h==="nodebuffer"?new u(f):i.uint8array?new d(o.transformTo("uint8array",f)):new a(o.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var o=n("./GenericWorker"),i=n("../utils");function a(l){o.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(a,o),a.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var o=n("./GenericWorker"),i=n("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,o),a.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var o=n("../utils"),i=n("./GenericWorker");function a(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}o.inherits(a,i),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}i.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var o=n("../utils"),i=n("./GenericWorker");function a(l){i.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=o.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}o.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,a){return this._listeners[i].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,a){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,a)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var a=this;return i.on("data",function(l){a.processChunk(l)}),i.on("end",function(){a.end()}),i.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,a){return this.extraStreamInfo[i]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=o},{}],29:[function(n,r,s){var o=n("../utils"),i=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(y,g){return new d.Promise(function(w,v){var x=[],b=y._internalType,_=y._outputType,S=y._mimeType;y.on("data",function(N,k){x.push(N),g&&g(k)}).on("error",function(N){x=[],v(N)}).on("end",function(){try{var N=function(k,j,T){switch(k){case"blob":return o.newBlob(o.transformTo("arraybuffer",j),T);case"base64":return l.encode(j);default:return o.transformTo(k,j)}}(_,function(k,j){var T,M=0,F=null,P=0;for(T=0;T<j.length;T++)P+=j[T].length;switch(k){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(F=new Uint8Array(P),T=0;T<j.length;T++)F.set(j[T],M),M+=j[T].length;return F;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+k+"'")}}(b,x),S);w(N)}catch(k){v(k)}x=[]}).resume()})}function p(y,g,w){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=w,o.checkSupport(v),this._worker=y.pipe(new i(v)),y.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}p.prototype={accumulate:function(y){return h(this,y)},on:function(y,g){var w=this;return y==="data"?this._worker.on(y,function(v){g.call(w,v.data,v.meta)}):this._worker.on(y,function(){o.delay(g,arguments,w)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var o=n("./utils"),i=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}s.utf8encode=function(p){return i.nodebuffer?a.newBufferFrom(p,"utf-8"):function(y){var g,w,v,x,b,_=y.length,S=0;for(x=0;x<_;x++)(64512&(w=y.charCodeAt(x)))==55296&&x+1<_&&(64512&(v=y.charCodeAt(x+1)))==56320&&(w=65536+(w-55296<<10)+(v-56320),x++),S+=w<128?1:w<2048?2:w<65536?3:4;for(g=i.uint8array?new Uint8Array(S):new Array(S),x=b=0;b<S;x++)(64512&(w=y.charCodeAt(x)))==55296&&x+1<_&&(64512&(v=y.charCodeAt(x+1)))==56320&&(w=65536+(w-55296<<10)+(v-56320),x++),w<128?g[b++]=w:(w<2048?g[b++]=192|w>>>6:(w<65536?g[b++]=224|w>>>12:(g[b++]=240|w>>>18,g[b++]=128|w>>>12&63),g[b++]=128|w>>>6&63),g[b++]=128|63&w);return g}(p)},s.utf8decode=function(p){return i.nodebuffer?o.transformTo("nodebuffer",p).toString("utf-8"):function(y){var g,w,v,x,b=y.length,_=new Array(2*b);for(g=w=0;g<b;)if((v=y[g++])<128)_[w++]=v;else if(4<(x=u[v]))_[w++]=65533,g+=x-1;else{for(v&=x===2?31:x===3?15:7;1<x&&g<b;)v=v<<6|63&y[g++],x--;1<x?_[w++]=65533:v<65536?_[w++]=v:(v-=65536,_[w++]=55296|v>>10&1023,_[w++]=56320|1023&v)}return _.length!==w&&(_.subarray?_=_.subarray(0,w):_.length=w),o.applyFromCharCode(_)}(p=o.transformTo(i.uint8array?"uint8array":"array",p))},o.inherits(f,l),f.prototype.processChunk=function(p){var y=o.transformTo(i.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var g=y;(y=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),y.set(g,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var w=function(x,b){var _;for((b=b||x.length)>x.length&&(b=x.length),_=b-1;0<=_&&(192&x[_])==128;)_--;return _<0||_===0?b:_+u[x[_]]>b?_:b}(y),v=y;w!==y.length&&(i.uint8array?(v=y.subarray(0,w),this.leftOver=y.subarray(w,y.length)):(v=y.slice(0,w),this.leftOver=y.slice(w,y.length))),this.push({data:s.utf8decode(v),meta:p.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,o.inherits(h,l),h.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var o=n("./support"),i=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(g){return g}function d(g,w){for(var v=0;v<g.length;++v)w[v]=255&g.charCodeAt(v);return w}n("setimmediate"),s.newBlob=function(g,w){s.checkSupport("blob");try{return new Blob([g],{type:w})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,w,v){var x=[],b=0,_=g.length;if(_<=v)return String.fromCharCode.apply(null,g);for(;b<_;)w==="array"||w==="nodebuffer"?x.push(String.fromCharCode.apply(null,g.slice(b,Math.min(b+v,_)))):x.push(String.fromCharCode.apply(null,g.subarray(b,Math.min(b+v,_)))),b+=v;return x.join("")},stringifyByChar:function(g){for(var w="",v=0;v<g.length;v++)w+=String.fromCharCode(g[v]);return w},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(g){var w=65536,v=s.getTypeOf(g),x=!0;if(v==="uint8array"?x=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(x=f.applyCanBeUsed.nodebuffer),x)for(;1<w;)try{return f.stringifyByChunk(g,v,w)}catch{w=Math.floor(w/2)}return f.stringifyByChar(g)}function p(g,w){for(var v=0;v<g.length;v++)w[v]=g[v];return w}s.applyFromCharCode=h;var y={};y.string={string:u,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return y.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,a.allocBuffer(g.length))}},y.array={string:h,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},y.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},y.uint8array={string:h,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return a.newBufferFrom(g)}},y.nodebuffer={string:h,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return y.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:u},s.transformTo=function(g,w){if(w=w||"",!g)return w;s.checkSupport(g);var v=s.getTypeOf(w);return y[v][g](w)},s.resolve=function(g){for(var w=g.split("/"),v=[],x=0;x<w.length;x++){var b=w[x];b==="."||b===""&&x!==0&&x!==w.length-1||(b===".."?v.pop():v.push(b))}return v.join("/")},s.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(g){var w,v,x="";for(v=0;v<(g||"").length;v++)x+="\\x"+((w=g.charCodeAt(v))<16?"0":"")+w.toString(16).toUpperCase();return x},s.delay=function(g,w,v){setImmediate(function(){g.apply(v||null,w||[])})},s.inherits=function(g,w){function v(){}v.prototype=w.prototype,g.prototype=new v},s.extend=function(){var g,w,v={};for(g=0;g<arguments.length;g++)for(w in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],w)&&v[w]===void 0&&(v[w]=arguments[g][w]);return v},s.prepareContent=function(g,w,v,x,b){return l.Promise.resolve(w).then(function(_){return o.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,N){var k=new FileReader;k.onload=function(j){S(j.target.result)},k.onerror=function(j){N(j.target.error)},k.readAsArrayBuffer(_)}):_}).then(function(_){var S=s.getTypeOf(_);return S?(S==="arraybuffer"?_=s.transformTo("uint8array",_):S==="string"&&(b?_=i.decode(_):v&&x!==!0&&(_=function(N){return d(N,o.uint8array?new Uint8Array(N.length):new Array(N.length))}(_))),_):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var o=n("./reader/readerFor"),i=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(h)+", expected "+i.pretty(f)+")")}},isSignature:function(f,h){var p=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===h;return this.reader.setIndex(p),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",p=i.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,p,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),h=this.reader.readInt(4),p=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var y=h-p;if(0<y)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=o(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var o=n("./reader/readerFor"),i=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),f=n("./support");function h(p,y){this.options=p,this.loadOptions=y}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var y,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(w){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===w)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,y,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var y=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(y),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var y,g,w,v=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<v;)y=p.readInt(2),g=p.readInt(2),w=p.readData(g),this.extraFields[y]={id:y,length:g,value:w};p.setIndex(v)},handleUTF8:function(){var p=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var g=i.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var v=i.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var y=o(p.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var y=o(p.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(p.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function o(y,g,w){this.name=y,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=g,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var i=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");o.prototype={internalStream:function(y){var g=null,w="string";try{if(!y)throw new Error("No output type specified.");var v=(w=y.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),g=this._decompressWorker();var x=!this._dataBinary;x&&!v&&(g=g.pipe(new l.Utf8EncodeWorker)),!x&&v&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(b){(g=new d("error")).error(b)}return new i(g,w,"")},async:function(y,g){return this.internalStream(y).accumulate(g)},nodeStream:function(y,g){return this.internalStream(y||"nodebuffer").toNodejsStream(g)},_compressWorker:function(y,g){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(w,y,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<f.length;p++)o.prototype[f[p]]=h;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(o){var i,a,l=o.MutationObserver||o.WebKitMutationObserver;if(l){var u=0,d=new l(y),f=o.document.createTextNode("");d.observe(f,{characterData:!0}),i=function(){f.data=u=++u%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){y(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(y,0)};else{var h=new o.MessageChannel;h.port1.onmessage=y,i=function(){h.port2.postMessage(0)}}var p=[];function y(){var g,w;a=!0;for(var v=p.length;v;){for(w=p,p=[],g=-1;++g<v;)w[g]();v=p.length}a=!1}r.exports=function(g){p.push(g)!==1||a||i()}}).call(this,typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var o=n("immediate");function i(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function f(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==i&&g(this,v)}function h(v,x,b){this.promise=v,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function p(v,x,b){o(function(){var _;try{_=x(b)}catch(S){return a.reject(v,S)}_===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,_)})}function y(v){var x=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof x=="function")return function(){x.apply(v,arguments)}}function g(v,x){var b=!1;function _(k){b||(b=!0,a.reject(v,k))}function S(k){b||(b=!0,a.resolve(v,k))}var N=w(function(){x(S,_)});N.status==="error"&&_(N.value)}function w(v,x){var b={};try{b.value=v(x),b.status="success"}catch(_){b.status="error",b.value=_}return b}(r.exports=f).prototype.finally=function(v){if(typeof v!="function")return this;var x=this.constructor;return this.then(function(b){return x.resolve(v()).then(function(){return b})},function(b){return x.resolve(v()).then(function(){throw b})})},f.prototype.catch=function(v){return this.then(null,v)},f.prototype.then=function(v,x){if(typeof v!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var b=new this.constructor(i);return this.state!==d?p(b,this.state===u?v:x,this.outcome):this.queue.push(new h(b,v,x)),b},h.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},h.prototype.otherCallFulfilled=function(v){p(this.promise,this.onFulfilled,v)},h.prototype.callRejected=function(v){a.reject(this.promise,v)},h.prototype.otherCallRejected=function(v){p(this.promise,this.onRejected,v)},a.resolve=function(v,x){var b=w(y,x);if(b.status==="error")return a.reject(v,b.value);var _=b.value;if(_)g(v,_);else{v.state=u,v.outcome=x;for(var S=-1,N=v.queue.length;++S<N;)v.queue[S].callFulfilled(x)}return v},a.reject=function(v,x){v.state=l,v.outcome=x;for(var b=-1,_=v.queue.length;++b<_;)v.queue[b].callRejected(x);return v},f.resolve=function(v){return v instanceof this?v:a.resolve(new this(i),v)},f.reject=function(v){var x=new this(i);return a.reject(x,v)},f.all=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,_=!1;if(!b)return this.resolve([]);for(var S=new Array(b),N=0,k=-1,j=new this(i);++k<b;)T(v[k],k);return j;function T(M,F){x.resolve(M).then(function(P){S[F]=P,++N!==b||_||(_=!0,a.resolve(j,S))},function(P){_||(_=!0,a.reject(j,P))})}},f.race=function(v){var x=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,_=!1;if(!b)return this.resolve([]);for(var S=-1,N=new this(i);++S<b;)k=v[S],x.resolve(k).then(function(j){_||(_=!0,a.resolve(N,j))},function(j){_||(_=!0,a.reject(N,j))});var k;return N}},{immediate:36}],38:[function(n,r,s){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var o=n("./zlib/deflate"),i=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,f=0,h=-1,p=0,y=8;function g(v){if(!(this instanceof g))return new g(v);this.options=i.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},v||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=o.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(b!==f)throw new Error(l[b]);if(x.header&&o.deflateSetHeader(this.strm,x.header),x.dictionary){var _;if(_=typeof x.dictionary=="string"?a.string2buf(x.dictionary):d.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(b=o.deflateSetDictionary(this.strm,_))!==f)throw new Error(l[b]);this._dict_set=!0}}function w(v,x){var b=new g(x);if(b.push(v,!0),b.err)throw b.msg||l[b.err];return b.result}g.prototype.push=function(v,x){var b,_,S=this.strm,N=this.options.chunkSize;if(this.ended)return!1;_=x===~~x?x:x===!0?4:0,typeof v=="string"?S.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?S.input=new Uint8Array(v):S.input=v,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new i.Buf8(N),S.next_out=0,S.avail_out=N),(b=o.deflate(S,_))!==1&&b!==f)return this.onEnd(b),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(i.shrinkBuf(S.output,S.next_out))):this.onData(i.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&b!==1);return _===4?(b=o.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f):_!==2||(this.onEnd(f),!(S.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=g,s.deflate=w,s.deflateRaw=function(v,x){return(x=x||{}).raw=!0,w(v,x)},s.gzip=function(v,x){return(x=x||{}).gzip=!0,w(v,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var o=n("./zlib/inflate"),i=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),f=n("./zlib/gzheader"),h=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},g||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||g&&g.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=o.inflateInit2(this.strm,w.windowBits);if(v!==l.Z_OK)throw new Error(u[v]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function y(g,w){var v=new p(w);if(v.push(g,!0),v.err)throw v.msg||u[v.err];return v.result}p.prototype.push=function(g,w){var v,x,b,_,S,N,k=this.strm,j=this.options.chunkSize,T=this.options.dictionary,M=!1;if(this.ended)return!1;x=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?k.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?k.input=new Uint8Array(g):k.input=g,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new i.Buf8(j),k.next_out=0,k.avail_out=j),(v=o.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(N=typeof T=="string"?a.string2buf(T):h.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,v=o.inflateSetDictionary(this.strm,N)),v===l.Z_BUF_ERROR&&M===!0&&(v=l.Z_OK,M=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&v!==l.Z_STREAM_END&&(k.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(k.output,k.next_out),_=k.next_out-b,S=a.buf2string(k.output,b),k.next_out=_,k.avail_out=j-_,_&&i.arraySet(k.output,k.output,b,_,0),this.onData(S)):this.onData(i.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(M=!0)}while((0<k.avail_in||k.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(v=o.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=p,s.inflate=y,s.inflateRaw=function(g,w){return(w=w||{}).raw=!0,y(g,w)},s.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(l[f]=d[f])}}return l},s.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var i={arraySet:function(l,u,d,f,h){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+f),h);else for(var p=0;p<f;p++)l[h+p]=u[d+p]},flattenChunks:function(l){var u,d,f,h,p,y;for(u=f=0,d=l.length;u<d;u++)f+=l[u].length;for(y=new Uint8Array(f),u=h=0,d=l.length;u<d;u++)p=l[u],y.set(p,h),h+=p.length;return y}},a={arraySet:function(l,u,d,f,h){for(var p=0;p<f;p++)l[h+p]=u[d+p]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(o)},{}],42:[function(n,r,s){var o=n("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new o.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(f,h){if(h<65537&&(f.subarray&&a||!f.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(f,h));for(var p="",y=0;y<h;y++)p+=String.fromCharCode(f[y]);return p}l[254]=l[254]=1,s.string2buf=function(f){var h,p,y,g,w,v=f.length,x=0;for(g=0;g<v;g++)(64512&(p=f.charCodeAt(g)))==55296&&g+1<v&&(64512&(y=f.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(y-56320),g++),x+=p<128?1:p<2048?2:p<65536?3:4;for(h=new o.Buf8(x),g=w=0;w<x;g++)(64512&(p=f.charCodeAt(g)))==55296&&g+1<v&&(64512&(y=f.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(y-56320),g++),p<128?h[w++]=p:(p<2048?h[w++]=192|p>>>6:(p<65536?h[w++]=224|p>>>12:(h[w++]=240|p>>>18,h[w++]=128|p>>>12&63),h[w++]=128|p>>>6&63),h[w++]=128|63&p);return h},s.buf2binstring=function(f){return d(f,f.length)},s.binstring2buf=function(f){for(var h=new o.Buf8(f.length),p=0,y=h.length;p<y;p++)h[p]=f.charCodeAt(p);return h},s.buf2string=function(f,h){var p,y,g,w,v=h||f.length,x=new Array(2*v);for(p=y=0;p<v;)if((g=f[p++])<128)x[y++]=g;else if(4<(w=l[g]))x[y++]=65533,p+=w-1;else{for(g&=w===2?31:w===3?15:7;1<w&&p<v;)g=g<<6|63&f[p++],w--;1<w?x[y++]=65533:g<65536?x[y++]=g:(g-=65536,x[y++]=55296|g>>10&1023,x[y++]=56320|1023&g)}return d(x,y)},s.utf8border=function(f,h){var p;for((h=h||f.length)>f.length&&(h=f.length),p=h-1;0<=p&&(192&f[p])==128;)p--;return p<0||p===0?h:p+l[f[p]]>h?p:h}},{"./common":41}],43:[function(n,r,s){r.exports=function(o,i,a,l){for(var u=65535&o|0,d=o>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;d=d+(u=u+i[l++]|0)|0,--f;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var o=function(){for(var i,a=[],l=0;l<256;l++){i=l;for(var u=0;u<8;u++)i=1&i?3988292384^i>>>1:i>>>1;a[l]=i}return a}();r.exports=function(i,a,l,u){var d=o,f=u+l;i^=-1;for(var h=u;h<f;h++)i=i>>>8^d[255&(i^a[h])];return-1^i}},{}],46:[function(n,r,s){var o,i=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),f=0,h=4,p=0,y=-2,g=-1,w=4,v=2,x=8,b=9,_=286,S=30,N=19,k=2*_+1,j=15,T=3,M=258,F=M+T+1,P=42,L=113,C=1,O=2,V=3,B=4;function z(E,q){return E.msg=d[q],q}function $(E){return(E<<1)-(4<E?9:0)}function W(E){for(var q=E.length;0<=--q;)E[q]=0}function A(E){var q=E.state,G=q.pending;G>E.avail_out&&(G=E.avail_out),G!==0&&(i.arraySet(E.output,q.pending_buf,q.pending_out,G,E.next_out),E.next_out+=G,q.pending_out+=G,E.total_out+=G,E.avail_out-=G,q.pending-=G,q.pending===0&&(q.pending_out=0))}function D(E,q){a._tr_flush_block(E,0<=E.block_start?E.block_start:-1,E.strstart-E.block_start,q),E.block_start=E.strstart,A(E.strm)}function X(E,q){E.pending_buf[E.pending++]=q}function Y(E,q){E.pending_buf[E.pending++]=q>>>8&255,E.pending_buf[E.pending++]=255&q}function H(E,q){var G,I,R=E.max_chain_length,U=E.strstart,ee=E.prev_length,Q=E.nice_match,K=E.strstart>E.w_size-F?E.strstart-(E.w_size-F):0,se=E.window,de=E.w_mask,oe=E.prev,ve=E.strstart+M,Ie=se[U+ee-1],Ne=se[U+ee];E.prev_length>=E.good_match&&(R>>=2),Q>E.lookahead&&(Q=E.lookahead);do if(se[(G=q)+ee]===Ne&&se[G+ee-1]===Ie&&se[G]===se[U]&&se[++G]===se[U+1]){U+=2,G++;do;while(se[++U]===se[++G]&&se[++U]===se[++G]&&se[++U]===se[++G]&&se[++U]===se[++G]&&se[++U]===se[++G]&&se[++U]===se[++G]&&se[++U]===se[++G]&&se[++U]===se[++G]&&U<ve);if(I=M-(ve-U),U=ve-M,ee<I){if(E.match_start=q,Q<=(ee=I))break;Ie=se[U+ee-1],Ne=se[U+ee]}}while((q=oe[q&de])>K&&--R!=0);return ee<=E.lookahead?ee:E.lookahead}function Z(E){var q,G,I,R,U,ee,Q,K,se,de,oe=E.w_size;do{if(R=E.window_size-E.lookahead-E.strstart,E.strstart>=oe+(oe-F)){for(i.arraySet(E.window,E.window,oe,oe,0),E.match_start-=oe,E.strstart-=oe,E.block_start-=oe,q=G=E.hash_size;I=E.head[--q],E.head[q]=oe<=I?I-oe:0,--G;);for(q=G=oe;I=E.prev[--q],E.prev[q]=oe<=I?I-oe:0,--G;);R+=oe}if(E.strm.avail_in===0)break;if(ee=E.strm,Q=E.window,K=E.strstart+E.lookahead,se=R,de=void 0,de=ee.avail_in,se<de&&(de=se),G=de===0?0:(ee.avail_in-=de,i.arraySet(Q,ee.input,ee.next_in,de,K),ee.state.wrap===1?ee.adler=l(ee.adler,Q,de,K):ee.state.wrap===2&&(ee.adler=u(ee.adler,Q,de,K)),ee.next_in+=de,ee.total_in+=de,de),E.lookahead+=G,E.lookahead+E.insert>=T)for(U=E.strstart-E.insert,E.ins_h=E.window[U],E.ins_h=(E.ins_h<<E.hash_shift^E.window[U+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[U+T-1])&E.hash_mask,E.prev[U&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=U,U++,E.insert--,!(E.lookahead+E.insert<T)););}while(E.lookahead<F&&E.strm.avail_in!==0)}function J(E,q){for(var G,I;;){if(E.lookahead<F){if(Z(E),E.lookahead<F&&q===f)return C;if(E.lookahead===0)break}if(G=0,E.lookahead>=T&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+T-1])&E.hash_mask,G=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),G!==0&&E.strstart-G<=E.w_size-F&&(E.match_length=H(E,G)),E.match_length>=T)if(I=a._tr_tally(E,E.strstart-E.match_start,E.match_length-T),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=T){for(E.match_length--;E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+T-1])&E.hash_mask,G=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart,--E.match_length!=0;);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else I=a._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(I&&(D(E,!1),E.strm.avail_out===0))return C}return E.insert=E.strstart<T-1?E.strstart:T-1,q===h?(D(E,!0),E.strm.avail_out===0?V:B):E.last_lit&&(D(E,!1),E.strm.avail_out===0)?C:O}function re(E,q){for(var G,I,R;;){if(E.lookahead<F){if(Z(E),E.lookahead<F&&q===f)return C;if(E.lookahead===0)break}if(G=0,E.lookahead>=T&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+T-1])&E.hash_mask,G=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=T-1,G!==0&&E.prev_length<E.max_lazy_match&&E.strstart-G<=E.w_size-F&&(E.match_length=H(E,G),E.match_length<=5&&(E.strategy===1||E.match_length===T&&4096<E.strstart-E.match_start)&&(E.match_length=T-1)),E.prev_length>=T&&E.match_length<=E.prev_length){for(R=E.strstart+E.lookahead-T,I=a._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-T),E.lookahead-=E.prev_length-1,E.prev_length-=2;++E.strstart<=R&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+T-1])&E.hash_mask,G=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),--E.prev_length!=0;);if(E.match_available=0,E.match_length=T-1,E.strstart++,I&&(D(E,!1),E.strm.avail_out===0))return C}else if(E.match_available){if((I=a._tr_tally(E,0,E.window[E.strstart-1]))&&D(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return C}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(I=a._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<T-1?E.strstart:T-1,q===h?(D(E,!0),E.strm.avail_out===0?V:B):E.last_lit&&(D(E,!1),E.strm.avail_out===0)?C:O}function ae(E,q,G,I,R){this.good_length=E,this.max_lazy=q,this.nice_length=G,this.max_chain=I,this.func=R}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*k),this.dyn_dtree=new i.Buf16(2*(2*S+1)),this.bl_tree=new i.Buf16(2*(2*N+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(j+1),this.heap=new i.Buf16(2*_+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*_+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(E){var q;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=v,(q=E.state).pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?P:L,E.adler=q.wrap===2?0:1,q.last_flush=f,a._tr_init(q),p):z(E,y)}function ye(E){var q=ue(E);return q===p&&function(G){G.window_size=2*G.w_size,W(G.head),G.max_lazy_match=o[G.level].max_lazy,G.good_match=o[G.level].good_length,G.nice_match=o[G.level].nice_length,G.max_chain_length=o[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=T-1,G.match_available=0,G.ins_h=0}(E.state),q}function ke(E,q,G,I,R,U){if(!E)return y;var ee=1;if(q===g&&(q=6),I<0?(ee=0,I=-I):15<I&&(ee=2,I-=16),R<1||b<R||G!==x||I<8||15<I||q<0||9<q||U<0||w<U)return z(E,y);I===8&&(I=9);var Q=new le;return(E.state=Q).strm=E,Q.wrap=ee,Q.gzhead=null,Q.w_bits=I,Q.w_size=1<<Q.w_bits,Q.w_mask=Q.w_size-1,Q.hash_bits=R+7,Q.hash_size=1<<Q.hash_bits,Q.hash_mask=Q.hash_size-1,Q.hash_shift=~~((Q.hash_bits+T-1)/T),Q.window=new i.Buf8(2*Q.w_size),Q.head=new i.Buf16(Q.hash_size),Q.prev=new i.Buf16(Q.w_size),Q.lit_bufsize=1<<R+6,Q.pending_buf_size=4*Q.lit_bufsize,Q.pending_buf=new i.Buf8(Q.pending_buf_size),Q.d_buf=1*Q.lit_bufsize,Q.l_buf=3*Q.lit_bufsize,Q.level=q,Q.strategy=U,Q.method=G,ye(E)}o=[new ae(0,0,0,0,function(E,q){var G=65535;for(G>E.pending_buf_size-5&&(G=E.pending_buf_size-5);;){if(E.lookahead<=1){if(Z(E),E.lookahead===0&&q===f)return C;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var I=E.block_start+G;if((E.strstart===0||E.strstart>=I)&&(E.lookahead=E.strstart-I,E.strstart=I,D(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-F&&(D(E,!1),E.strm.avail_out===0))return C}return E.insert=0,q===h?(D(E,!0),E.strm.avail_out===0?V:B):(E.strstart>E.block_start&&(D(E,!1),E.strm.avail_out),C)}),new ae(4,4,8,4,J),new ae(4,5,16,8,J),new ae(4,6,32,32,J),new ae(4,4,16,16,re),new ae(8,16,32,32,re),new ae(8,16,128,128,re),new ae(8,32,128,256,re),new ae(32,128,258,1024,re),new ae(32,258,258,4096,re)],s.deflateInit=function(E,q){return ke(E,q,x,15,8,0)},s.deflateInit2=ke,s.deflateReset=ye,s.deflateResetKeep=ue,s.deflateSetHeader=function(E,q){return E&&E.state?E.state.wrap!==2?y:(E.state.gzhead=q,p):y},s.deflate=function(E,q){var G,I,R,U;if(!E||!E.state||5<q||q<0)return E?z(E,y):y;if(I=E.state,!E.output||!E.input&&E.avail_in!==0||I.status===666&&q!==h)return z(E,E.avail_out===0?-5:y);if(I.strm=E,G=I.last_flush,I.last_flush=q,I.status===P)if(I.wrap===2)E.adler=0,X(I,31),X(I,139),X(I,8),I.gzhead?(X(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),X(I,255&I.gzhead.time),X(I,I.gzhead.time>>8&255),X(I,I.gzhead.time>>16&255),X(I,I.gzhead.time>>24&255),X(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),X(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(X(I,255&I.gzhead.extra.length),X(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(E.adler=u(E.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(X(I,0),X(I,0),X(I,0),X(I,0),X(I,0),X(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),X(I,3),I.status=L);else{var ee=x+(I.w_bits-8<<4)<<8;ee|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(ee|=32),ee+=31-ee%31,I.status=L,Y(I,ee),I.strstart!==0&&(Y(I,E.adler>>>16),Y(I,65535&E.adler)),E.adler=1}if(I.status===69)if(I.gzhead.extra){for(R=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>R&&(E.adler=u(E.adler,I.pending_buf,I.pending-R,R)),A(E),R=I.pending,I.pending!==I.pending_buf_size));)X(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>R&&(E.adler=u(E.adler,I.pending_buf,I.pending-R,R)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){R=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>R&&(E.adler=u(E.adler,I.pending_buf,I.pending-R,R)),A(E),R=I.pending,I.pending===I.pending_buf_size)){U=1;break}U=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,X(I,U)}while(U!==0);I.gzhead.hcrc&&I.pending>R&&(E.adler=u(E.adler,I.pending_buf,I.pending-R,R)),U===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){R=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>R&&(E.adler=u(E.adler,I.pending_buf,I.pending-R,R)),A(E),R=I.pending,I.pending===I.pending_buf_size)){U=1;break}U=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,X(I,U)}while(U!==0);I.gzhead.hcrc&&I.pending>R&&(E.adler=u(E.adler,I.pending_buf,I.pending-R,R)),U===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&A(E),I.pending+2<=I.pending_buf_size&&(X(I,255&E.adler),X(I,E.adler>>8&255),E.adler=0,I.status=L)):I.status=L),I.pending!==0){if(A(E),E.avail_out===0)return I.last_flush=-1,p}else if(E.avail_in===0&&$(q)<=$(G)&&q!==h)return z(E,-5);if(I.status===666&&E.avail_in!==0)return z(E,-5);if(E.avail_in!==0||I.lookahead!==0||q!==f&&I.status!==666){var Q=I.strategy===2?function(K,se){for(var de;;){if(K.lookahead===0&&(Z(K),K.lookahead===0)){if(se===f)return C;break}if(K.match_length=0,de=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,de&&(D(K,!1),K.strm.avail_out===0))return C}return K.insert=0,se===h?(D(K,!0),K.strm.avail_out===0?V:B):K.last_lit&&(D(K,!1),K.strm.avail_out===0)?C:O}(I,q):I.strategy===3?function(K,se){for(var de,oe,ve,Ie,Ne=K.window;;){if(K.lookahead<=M){if(Z(K),K.lookahead<=M&&se===f)return C;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=T&&0<K.strstart&&(oe=Ne[ve=K.strstart-1])===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]){Ie=K.strstart+M;do;while(oe===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]&&oe===Ne[++ve]&&ve<Ie);K.match_length=M-(Ie-ve),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=T?(de=a._tr_tally(K,1,K.match_length-T),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(de=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),de&&(D(K,!1),K.strm.avail_out===0))return C}return K.insert=0,se===h?(D(K,!0),K.strm.avail_out===0?V:B):K.last_lit&&(D(K,!1),K.strm.avail_out===0)?C:O}(I,q):o[I.level].func(I,q);if(Q!==V&&Q!==B||(I.status=666),Q===C||Q===V)return E.avail_out===0&&(I.last_flush=-1),p;if(Q===O&&(q===1?a._tr_align(I):q!==5&&(a._tr_stored_block(I,0,0,!1),q===3&&(W(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),A(E),E.avail_out===0))return I.last_flush=-1,p}return q!==h?p:I.wrap<=0?1:(I.wrap===2?(X(I,255&E.adler),X(I,E.adler>>8&255),X(I,E.adler>>16&255),X(I,E.adler>>24&255),X(I,255&E.total_in),X(I,E.total_in>>8&255),X(I,E.total_in>>16&255),X(I,E.total_in>>24&255)):(Y(I,E.adler>>>16),Y(I,65535&E.adler)),A(E),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?p:1)},s.deflateEnd=function(E){var q;return E&&E.state?(q=E.state.status)!==P&&q!==69&&q!==73&&q!==91&&q!==103&&q!==L&&q!==666?z(E,y):(E.state=null,q===L?z(E,-3):p):y},s.deflateSetDictionary=function(E,q){var G,I,R,U,ee,Q,K,se,de=q.length;if(!E||!E.state||(U=(G=E.state).wrap)===2||U===1&&G.status!==P||G.lookahead)return y;for(U===1&&(E.adler=l(E.adler,q,de,0)),G.wrap=0,de>=G.w_size&&(U===0&&(W(G.head),G.strstart=0,G.block_start=0,G.insert=0),se=new i.Buf8(G.w_size),i.arraySet(se,q,de-G.w_size,G.w_size,0),q=se,de=G.w_size),ee=E.avail_in,Q=E.next_in,K=E.input,E.avail_in=de,E.next_in=0,E.input=q,Z(G);G.lookahead>=T;){for(I=G.strstart,R=G.lookahead-(T-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[I+T-1])&G.hash_mask,G.prev[I&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=I,I++,--R;);G.strstart=I,G.lookahead=T-1,Z(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=T-1,G.match_available=0,E.next_in=Q,E.input=K,E.avail_in=ee,G.wrap=U,p},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(o,i){var a,l,u,d,f,h,p,y,g,w,v,x,b,_,S,N,k,j,T,M,F,P,L,C,O;a=o.state,l=o.next_in,C=o.input,u=l+(o.avail_in-5),d=o.next_out,O=o.output,f=d-(i-o.avail_out),h=d+(o.avail_out-257),p=a.dmax,y=a.wsize,g=a.whave,w=a.wnext,v=a.window,x=a.hold,b=a.bits,_=a.lencode,S=a.distcode,N=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{b<15&&(x+=C[l++]<<b,b+=8,x+=C[l++]<<b,b+=8),j=_[x&N];t:for(;;){if(x>>>=T=j>>>24,b-=T,(T=j>>>16&255)===0)O[d++]=65535&j;else{if(!(16&T)){if(!(64&T)){j=_[(65535&j)+(x&(1<<T)-1)];continue t}if(32&T){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}M=65535&j,(T&=15)&&(b<T&&(x+=C[l++]<<b,b+=8),M+=x&(1<<T)-1,x>>>=T,b-=T),b<15&&(x+=C[l++]<<b,b+=8,x+=C[l++]<<b,b+=8),j=S[x&k];n:for(;;){if(x>>>=T=j>>>24,b-=T,!(16&(T=j>>>16&255))){if(!(64&T)){j=S[(65535&j)+(x&(1<<T)-1)];continue n}o.msg="invalid distance code",a.mode=30;break e}if(F=65535&j,b<(T&=15)&&(x+=C[l++]<<b,(b+=8)<T&&(x+=C[l++]<<b,b+=8)),p<(F+=x&(1<<T)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=T,b-=T,(T=d-f)<F){if(g<(T=F-T)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(L=v,(P=0)===w){if(P+=y-T,T<M){for(M-=T;O[d++]=v[P++],--T;);P=d-F,L=O}}else if(w<T){if(P+=y+w-T,(T-=w)<M){for(M-=T;O[d++]=v[P++],--T;);if(P=0,w<M){for(M-=T=w;O[d++]=v[P++],--T;);P=d-F,L=O}}}else if(P+=w-T,T<M){for(M-=T;O[d++]=v[P++],--T;);P=d-F,L=O}for(;2<M;)O[d++]=L[P++],O[d++]=L[P++],O[d++]=L[P++],M-=3;M&&(O[d++]=L[P++],1<M&&(O[d++]=L[P++]))}else{for(P=d-F;O[d++]=O[P++],O[d++]=O[P++],O[d++]=O[P++],2<(M-=3););M&&(O[d++]=O[P++],1<M&&(O[d++]=O[P++]))}break}}break}}while(l<u&&d<h);l-=M=b>>3,x&=(1<<(b-=M<<3))-1,o.next_in=l,o.next_out=d,o.avail_in=l<u?u-l+5:5-(l-u),o.avail_out=d<h?h-d+257:257-(d-h),a.hold=x,a.bits=b}},{}],49:[function(n,r,s){var o=n("../utils/common"),i=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,f=2,h=0,p=-2,y=1,g=852,w=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(P){var L;return P&&P.state?(L=P.state,P.total_in=P.total_out=L.total=0,P.msg="",L.wrap&&(P.adler=1&L.wrap),L.mode=y,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new o.Buf32(g),L.distcode=L.distdyn=new o.Buf32(w),L.sane=1,L.back=-1,h):p}function _(P){var L;return P&&P.state?((L=P.state).wsize=0,L.whave=0,L.wnext=0,b(P)):p}function S(P,L){var C,O;return P&&P.state?(O=P.state,L<0?(C=0,L=-L):(C=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?p:(O.window!==null&&O.wbits!==L&&(O.window=null),O.wrap=C,O.wbits=L,_(P))):p}function N(P,L){var C,O;return P?(O=new x,(P.state=O).window=null,(C=S(P,L))!==h&&(P.state=null),C):p}var k,j,T=!0;function M(P){if(T){var L;for(k=new o.Buf32(512),j=new o.Buf32(32),L=0;L<144;)P.lens[L++]=8;for(;L<256;)P.lens[L++]=9;for(;L<280;)P.lens[L++]=7;for(;L<288;)P.lens[L++]=8;for(u(d,P.lens,0,288,k,0,P.work,{bits:9}),L=0;L<32;)P.lens[L++]=5;u(f,P.lens,0,32,j,0,P.work,{bits:5}),T=!1}P.lencode=k,P.lenbits=9,P.distcode=j,P.distbits=5}function F(P,L,C,O){var V,B=P.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new o.Buf8(B.wsize)),O>=B.wsize?(o.arraySet(B.window,L,C-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(O<(V=B.wsize-B.wnext)&&(V=O),o.arraySet(B.window,L,C-O,V,B.wnext),(O-=V)?(o.arraySet(B.window,L,C-O,O,0),B.wnext=O,B.whave=B.wsize):(B.wnext+=V,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=V))),0}s.inflateReset=_,s.inflateReset2=S,s.inflateResetKeep=b,s.inflateInit=function(P){return N(P,15)},s.inflateInit2=N,s.inflate=function(P,L){var C,O,V,B,z,$,W,A,D,X,Y,H,Z,J,re,ae,le,ue,ye,ke,E,q,G,I,R=0,U=new o.Buf8(4),ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return p;(C=P.state).mode===12&&(C.mode=13),z=P.next_out,V=P.output,W=P.avail_out,B=P.next_in,O=P.input,$=P.avail_in,A=C.hold,D=C.bits,X=$,Y=W,q=h;e:for(;;)switch(C.mode){case y:if(C.wrap===0){C.mode=13;break}for(;D<16;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(2&C.wrap&&A===35615){U[C.check=0]=255&A,U[1]=A>>>8&255,C.check=a(C.check,U,2,0),D=A=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&A)<<8)+(A>>8))%31){P.msg="incorrect header check",C.mode=30;break}if((15&A)!=8){P.msg="unknown compression method",C.mode=30;break}if(D-=4,E=8+(15&(A>>>=4)),C.wbits===0)C.wbits=E;else if(E>C.wbits){P.msg="invalid window size",C.mode=30;break}C.dmax=1<<E,P.adler=C.check=1,C.mode=512&A?10:12,D=A=0;break;case 2:for(;D<16;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(C.flags=A,(255&C.flags)!=8){P.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){P.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=A>>8&1),512&C.flags&&(U[0]=255&A,U[1]=A>>>8&255,C.check=a(C.check,U,2,0)),D=A=0,C.mode=3;case 3:for(;D<32;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}C.head&&(C.head.time=A),512&C.flags&&(U[0]=255&A,U[1]=A>>>8&255,U[2]=A>>>16&255,U[3]=A>>>24&255,C.check=a(C.check,U,4,0)),D=A=0,C.mode=4;case 4:for(;D<16;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}C.head&&(C.head.xflags=255&A,C.head.os=A>>8),512&C.flags&&(U[0]=255&A,U[1]=A>>>8&255,C.check=a(C.check,U,2,0)),D=A=0,C.mode=5;case 5:if(1024&C.flags){for(;D<16;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}C.length=A,C.head&&(C.head.extra_len=A),512&C.flags&&(U[0]=255&A,U[1]=A>>>8&255,C.check=a(C.check,U,2,0)),D=A=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&($<(H=C.length)&&(H=$),H&&(C.head&&(E=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),o.arraySet(C.head.extra,O,B,H,E)),512&C.flags&&(C.check=a(C.check,O,H,B)),$-=H,B+=H,C.length-=H),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if($===0)break e;for(H=0;E=O[B+H++],C.head&&E&&C.length<65536&&(C.head.name+=String.fromCharCode(E)),E&&H<$;);if(512&C.flags&&(C.check=a(C.check,O,H,B)),$-=H,B+=H,E)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if($===0)break e;for(H=0;E=O[B+H++],C.head&&E&&C.length<65536&&(C.head.comment+=String.fromCharCode(E)),E&&H<$;);if(512&C.flags&&(C.check=a(C.check,O,H,B)),$-=H,B+=H,E)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;D<16;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(A!==(65535&C.check)){P.msg="header crc mismatch",C.mode=30;break}D=A=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),P.adler=C.check=0,C.mode=12;break;case 10:for(;D<32;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}P.adler=C.check=v(A),D=A=0,C.mode=11;case 11:if(C.havedict===0)return P.next_out=z,P.avail_out=W,P.next_in=B,P.avail_in=$,C.hold=A,C.bits=D,2;P.adler=C.check=1,C.mode=12;case 12:if(L===5||L===6)break e;case 13:if(C.last){A>>>=7&D,D-=7&D,C.mode=27;break}for(;D<3;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}switch(C.last=1&A,D-=1,3&(A>>>=1)){case 0:C.mode=14;break;case 1:if(M(C),C.mode=20,L!==6)break;A>>>=2,D-=2;break e;case 2:C.mode=17;break;case 3:P.msg="invalid block type",C.mode=30}A>>>=2,D-=2;break;case 14:for(A>>>=7&D,D-=7&D;D<32;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if((65535&A)!=(A>>>16^65535)){P.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&A,D=A=0,C.mode=15,L===6)break e;case 15:C.mode=16;case 16:if(H=C.length){if($<H&&(H=$),W<H&&(H=W),H===0)break e;o.arraySet(V,O,B,H,z),$-=H,B+=H,W-=H,z+=H,C.length-=H;break}C.mode=12;break;case 17:for(;D<14;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(C.nlen=257+(31&A),A>>>=5,D-=5,C.ndist=1+(31&A),A>>>=5,D-=5,C.ncode=4+(15&A),A>>>=4,D-=4,286<C.nlen||30<C.ndist){P.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;D<3;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}C.lens[ee[C.have++]]=7&A,A>>>=3,D-=3}for(;C.have<19;)C.lens[ee[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,G={bits:C.lenbits},q=u(0,C.lens,0,19,C.lencode,0,C.work,G),C.lenbits=G.bits,q){P.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;ae=(R=C.lencode[A&(1<<C.lenbits)-1])>>>16&255,le=65535&R,!((re=R>>>24)<=D);){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(le<16)A>>>=re,D-=re,C.lens[C.have++]=le;else{if(le===16){for(I=re+2;D<I;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(A>>>=re,D-=re,C.have===0){P.msg="invalid bit length repeat",C.mode=30;break}E=C.lens[C.have-1],H=3+(3&A),A>>>=2,D-=2}else if(le===17){for(I=re+3;D<I;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}D-=re,E=0,H=3+(7&(A>>>=re)),A>>>=3,D-=3}else{for(I=re+7;D<I;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}D-=re,E=0,H=11+(127&(A>>>=re)),A>>>=7,D-=7}if(C.have+H>C.nlen+C.ndist){P.msg="invalid bit length repeat",C.mode=30;break}for(;H--;)C.lens[C.have++]=E}}if(C.mode===30)break;if(C.lens[256]===0){P.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,G={bits:C.lenbits},q=u(d,C.lens,0,C.nlen,C.lencode,0,C.work,G),C.lenbits=G.bits,q){P.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,G={bits:C.distbits},q=u(f,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,G),C.distbits=G.bits,q){P.msg="invalid distances set",C.mode=30;break}if(C.mode=20,L===6)break e;case 20:C.mode=21;case 21:if(6<=$&&258<=W){P.next_out=z,P.avail_out=W,P.next_in=B,P.avail_in=$,C.hold=A,C.bits=D,l(P,Y),z=P.next_out,V=P.output,W=P.avail_out,B=P.next_in,O=P.input,$=P.avail_in,A=C.hold,D=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;ae=(R=C.lencode[A&(1<<C.lenbits)-1])>>>16&255,le=65535&R,!((re=R>>>24)<=D);){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(ae&&!(240&ae)){for(ue=re,ye=ae,ke=le;ae=(R=C.lencode[ke+((A&(1<<ue+ye)-1)>>ue)])>>>16&255,le=65535&R,!(ue+(re=R>>>24)<=D);){if($===0)break e;$--,A+=O[B++]<<D,D+=8}A>>>=ue,D-=ue,C.back+=ue}if(A>>>=re,D-=re,C.back+=re,C.length=le,ae===0){C.mode=26;break}if(32&ae){C.back=-1,C.mode=12;break}if(64&ae){P.msg="invalid literal/length code",C.mode=30;break}C.extra=15&ae,C.mode=22;case 22:if(C.extra){for(I=C.extra;D<I;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}C.length+=A&(1<<C.extra)-1,A>>>=C.extra,D-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;ae=(R=C.distcode[A&(1<<C.distbits)-1])>>>16&255,le=65535&R,!((re=R>>>24)<=D);){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(!(240&ae)){for(ue=re,ye=ae,ke=le;ae=(R=C.distcode[ke+((A&(1<<ue+ye)-1)>>ue)])>>>16&255,le=65535&R,!(ue+(re=R>>>24)<=D);){if($===0)break e;$--,A+=O[B++]<<D,D+=8}A>>>=ue,D-=ue,C.back+=ue}if(A>>>=re,D-=re,C.back+=re,64&ae){P.msg="invalid distance code",C.mode=30;break}C.offset=le,C.extra=15&ae,C.mode=24;case 24:if(C.extra){for(I=C.extra;D<I;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}C.offset+=A&(1<<C.extra)-1,A>>>=C.extra,D-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){P.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(W===0)break e;if(H=Y-W,C.offset>H){if((H=C.offset-H)>C.whave&&C.sane){P.msg="invalid distance too far back",C.mode=30;break}Z=H>C.wnext?(H-=C.wnext,C.wsize-H):C.wnext-H,H>C.length&&(H=C.length),J=C.window}else J=V,Z=z-C.offset,H=C.length;for(W<H&&(H=W),W-=H,C.length-=H;V[z++]=J[Z++],--H;);C.length===0&&(C.mode=21);break;case 26:if(W===0)break e;V[z++]=C.length,W--,C.mode=21;break;case 27:if(C.wrap){for(;D<32;){if($===0)break e;$--,A|=O[B++]<<D,D+=8}if(Y-=W,P.total_out+=Y,C.total+=Y,Y&&(P.adler=C.check=C.flags?a(C.check,V,Y,z-Y):i(C.check,V,Y,z-Y)),Y=W,(C.flags?A:v(A))!==C.check){P.msg="incorrect data check",C.mode=30;break}D=A=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;D<32;){if($===0)break e;$--,A+=O[B++]<<D,D+=8}if(A!==(4294967295&C.total)){P.msg="incorrect length check",C.mode=30;break}D=A=0}C.mode=29;case 29:q=1;break e;case 30:q=-3;break e;case 31:return-4;case 32:default:return p}return P.next_out=z,P.avail_out=W,P.next_in=B,P.avail_in=$,C.hold=A,C.bits=D,(C.wsize||Y!==P.avail_out&&C.mode<30&&(C.mode<27||L!==4))&&F(P,P.output,P.next_out,Y-P.avail_out)?(C.mode=31,-4):(X-=P.avail_in,Y-=P.avail_out,P.total_in+=X,P.total_out+=Y,C.total+=Y,C.wrap&&Y&&(P.adler=C.check=C.flags?a(C.check,V,Y,P.next_out-Y):i(C.check,V,Y,P.next_out-Y)),P.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(X==0&&Y===0||L===4)&&q===h&&(q=-5),q)},s.inflateEnd=function(P){if(!P||!P.state)return p;var L=P.state;return L.window&&(L.window=null),P.state=null,h},s.inflateGetHeader=function(P,L){var C;return P&&P.state&&2&(C=P.state).wrap?((C.head=L).done=!1,h):p},s.inflateSetDictionary=function(P,L){var C,O=L.length;return P&&P.state?(C=P.state).wrap!==0&&C.mode!==11?p:C.mode===11&&i(1,L,O,0)!==C.check?-3:F(P,L,O,O)?(C.mode=31,-4):(C.havedict=1,h):p},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var o=n("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,f,h,p,y,g,w,v){var x,b,_,S,N,k,j,T,M,F=v.bits,P=0,L=0,C=0,O=0,V=0,B=0,z=0,$=0,W=0,A=0,D=null,X=0,Y=new o.Buf16(16),H=new o.Buf16(16),Z=null,J=0;for(P=0;P<=15;P++)Y[P]=0;for(L=0;L<p;L++)Y[f[h+L]]++;for(V=F,O=15;1<=O&&Y[O]===0;O--);if(O<V&&(V=O),O===0)return y[g++]=20971520,y[g++]=20971520,v.bits=1,0;for(C=1;C<O&&Y[C]===0;C++);for(V<C&&(V=C),P=$=1;P<=15;P++)if($<<=1,($-=Y[P])<0)return-1;if(0<$&&(d===0||O!==1))return-1;for(H[1]=0,P=1;P<15;P++)H[P+1]=H[P]+Y[P];for(L=0;L<p;L++)f[h+L]!==0&&(w[H[f[h+L]]++]=L);if(k=d===0?(D=Z=w,19):d===1?(D=i,X-=257,Z=a,J-=257,256):(D=l,Z=u,-1),P=C,N=g,z=L=A=0,_=-1,S=(W=1<<(B=V))-1,d===1&&852<W||d===2&&592<W)return 1;for(;;){for(j=P-z,M=w[L]<k?(T=0,w[L]):w[L]>k?(T=Z[J+w[L]],D[X+w[L]]):(T=96,0),x=1<<P-z,C=b=1<<B;y[N+(A>>z)+(b-=x)]=j<<24|T<<16|M|0,b!==0;);for(x=1<<P-1;A&x;)x>>=1;if(x!==0?(A&=x-1,A+=x):A=0,L++,--Y[P]==0){if(P===O)break;P=f[h+w[L]]}if(V<P&&(A&S)!==_){for(z===0&&(z=V),N+=C,$=1<<(B=P-z);B+z<O&&!(($-=Y[B+z])<=0);)B++,$<<=1;if(W+=1<<B,d===1&&852<W||d===2&&592<W)return 1;y[_=A&S]=V<<24|B<<16|N-g|0}}return A!==0&&(y[N+A]=P-z<<24|64<<16|0),v.bits=V,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var o=n("../utils/common"),i=0,a=1;function l(R){for(var U=R.length;0<=--U;)R[U]=0}var u=0,d=29,f=256,h=f+1+d,p=30,y=19,g=2*h+1,w=15,v=16,x=7,b=256,_=16,S=17,N=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));l(F);var P=new Array(2*p);l(P);var L=new Array(512);l(L);var C=new Array(256);l(C);var O=new Array(d);l(O);var V,B,z,$=new Array(p);function W(R,U,ee,Q,K){this.static_tree=R,this.extra_bits=U,this.extra_base=ee,this.elems=Q,this.max_length=K,this.has_stree=R&&R.length}function A(R,U){this.dyn_tree=R,this.max_code=0,this.stat_desc=U}function D(R){return R<256?L[R]:L[256+(R>>>7)]}function X(R,U){R.pending_buf[R.pending++]=255&U,R.pending_buf[R.pending++]=U>>>8&255}function Y(R,U,ee){R.bi_valid>v-ee?(R.bi_buf|=U<<R.bi_valid&65535,X(R,R.bi_buf),R.bi_buf=U>>v-R.bi_valid,R.bi_valid+=ee-v):(R.bi_buf|=U<<R.bi_valid&65535,R.bi_valid+=ee)}function H(R,U,ee){Y(R,ee[2*U],ee[2*U+1])}function Z(R,U){for(var ee=0;ee|=1&R,R>>>=1,ee<<=1,0<--U;);return ee>>>1}function J(R,U,ee){var Q,K,se=new Array(w+1),de=0;for(Q=1;Q<=w;Q++)se[Q]=de=de+ee[Q-1]<<1;for(K=0;K<=U;K++){var oe=R[2*K+1];oe!==0&&(R[2*K]=Z(se[oe]++,oe))}}function re(R){var U;for(U=0;U<h;U++)R.dyn_ltree[2*U]=0;for(U=0;U<p;U++)R.dyn_dtree[2*U]=0;for(U=0;U<y;U++)R.bl_tree[2*U]=0;R.dyn_ltree[2*b]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function ae(R){8<R.bi_valid?X(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function le(R,U,ee,Q){var K=2*U,se=2*ee;return R[K]<R[se]||R[K]===R[se]&&Q[U]<=Q[ee]}function ue(R,U,ee){for(var Q=R.heap[ee],K=ee<<1;K<=R.heap_len&&(K<R.heap_len&&le(U,R.heap[K+1],R.heap[K],R.depth)&&K++,!le(U,Q,R.heap[K],R.depth));)R.heap[ee]=R.heap[K],ee=K,K<<=1;R.heap[ee]=Q}function ye(R,U,ee){var Q,K,se,de,oe=0;if(R.last_lit!==0)for(;Q=R.pending_buf[R.d_buf+2*oe]<<8|R.pending_buf[R.d_buf+2*oe+1],K=R.pending_buf[R.l_buf+oe],oe++,Q===0?H(R,K,U):(H(R,(se=C[K])+f+1,U),(de=k[se])!==0&&Y(R,K-=O[se],de),H(R,se=D(--Q),ee),(de=j[se])!==0&&Y(R,Q-=$[se],de)),oe<R.last_lit;);H(R,b,U)}function ke(R,U){var ee,Q,K,se=U.dyn_tree,de=U.stat_desc.static_tree,oe=U.stat_desc.has_stree,ve=U.stat_desc.elems,Ie=-1;for(R.heap_len=0,R.heap_max=g,ee=0;ee<ve;ee++)se[2*ee]!==0?(R.heap[++R.heap_len]=Ie=ee,R.depth[ee]=0):se[2*ee+1]=0;for(;R.heap_len<2;)se[2*(K=R.heap[++R.heap_len]=Ie<2?++Ie:0)]=1,R.depth[K]=0,R.opt_len--,oe&&(R.static_len-=de[2*K+1]);for(U.max_code=Ie,ee=R.heap_len>>1;1<=ee;ee--)ue(R,se,ee);for(K=ve;ee=R.heap[1],R.heap[1]=R.heap[R.heap_len--],ue(R,se,1),Q=R.heap[1],R.heap[--R.heap_max]=ee,R.heap[--R.heap_max]=Q,se[2*K]=se[2*ee]+se[2*Q],R.depth[K]=(R.depth[ee]>=R.depth[Q]?R.depth[ee]:R.depth[Q])+1,se[2*ee+1]=se[2*Q+1]=K,R.heap[1]=K++,ue(R,se,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(Ne,nn){var ui,Tn,di,tt,tl,_d,Hn=nn.dyn_tree,xv=nn.max_code,oP=nn.stat_desc.static_tree,iP=nn.stat_desc.has_stree,aP=nn.stat_desc.extra_bits,wv=nn.stat_desc.extra_base,fi=nn.stat_desc.max_length,nl=0;for(tt=0;tt<=w;tt++)Ne.bl_count[tt]=0;for(Hn[2*Ne.heap[Ne.heap_max]+1]=0,ui=Ne.heap_max+1;ui<g;ui++)fi<(tt=Hn[2*Hn[2*(Tn=Ne.heap[ui])+1]+1]+1)&&(tt=fi,nl++),Hn[2*Tn+1]=tt,xv<Tn||(Ne.bl_count[tt]++,tl=0,wv<=Tn&&(tl=aP[Tn-wv]),_d=Hn[2*Tn],Ne.opt_len+=_d*(tt+tl),iP&&(Ne.static_len+=_d*(oP[2*Tn+1]+tl)));if(nl!==0){do{for(tt=fi-1;Ne.bl_count[tt]===0;)tt--;Ne.bl_count[tt]--,Ne.bl_count[tt+1]+=2,Ne.bl_count[fi]--,nl-=2}while(0<nl);for(tt=fi;tt!==0;tt--)for(Tn=Ne.bl_count[tt];Tn!==0;)xv<(di=Ne.heap[--ui])||(Hn[2*di+1]!==tt&&(Ne.opt_len+=(tt-Hn[2*di+1])*Hn[2*di],Hn[2*di+1]=tt),Tn--)}}(R,U),J(se,Ie,R.bl_count)}function E(R,U,ee){var Q,K,se=-1,de=U[1],oe=0,ve=7,Ie=4;for(de===0&&(ve=138,Ie=3),U[2*(ee+1)+1]=65535,Q=0;Q<=ee;Q++)K=de,de=U[2*(Q+1)+1],++oe<ve&&K===de||(oe<Ie?R.bl_tree[2*K]+=oe:K!==0?(K!==se&&R.bl_tree[2*K]++,R.bl_tree[2*_]++):oe<=10?R.bl_tree[2*S]++:R.bl_tree[2*N]++,se=K,Ie=(oe=0)===de?(ve=138,3):K===de?(ve=6,3):(ve=7,4))}function q(R,U,ee){var Q,K,se=-1,de=U[1],oe=0,ve=7,Ie=4;for(de===0&&(ve=138,Ie=3),Q=0;Q<=ee;Q++)if(K=de,de=U[2*(Q+1)+1],!(++oe<ve&&K===de)){if(oe<Ie)for(;H(R,K,R.bl_tree),--oe!=0;);else K!==0?(K!==se&&(H(R,K,R.bl_tree),oe--),H(R,_,R.bl_tree),Y(R,oe-3,2)):oe<=10?(H(R,S,R.bl_tree),Y(R,oe-3,3)):(H(R,N,R.bl_tree),Y(R,oe-11,7));se=K,Ie=(oe=0)===de?(ve=138,3):K===de?(ve=6,3):(ve=7,4)}}l($);var G=!1;function I(R,U,ee,Q){Y(R,(u<<1)+(Q?1:0),3),function(K,se,de,oe){ae(K),oe&&(X(K,de),X(K,~de)),o.arraySet(K.pending_buf,K.window,se,de,K.pending),K.pending+=de}(R,U,ee,!0)}s._tr_init=function(R){G||(function(){var U,ee,Q,K,se,de=new Array(w+1);for(K=Q=0;K<d-1;K++)for(O[K]=Q,U=0;U<1<<k[K];U++)C[Q++]=K;for(C[Q-1]=K,K=se=0;K<16;K++)for($[K]=se,U=0;U<1<<j[K];U++)L[se++]=K;for(se>>=7;K<p;K++)for($[K]=se<<7,U=0;U<1<<j[K]-7;U++)L[256+se++]=K;for(ee=0;ee<=w;ee++)de[ee]=0;for(U=0;U<=143;)F[2*U+1]=8,U++,de[8]++;for(;U<=255;)F[2*U+1]=9,U++,de[9]++;for(;U<=279;)F[2*U+1]=7,U++,de[7]++;for(;U<=287;)F[2*U+1]=8,U++,de[8]++;for(J(F,h+1,de),U=0;U<p;U++)P[2*U+1]=5,P[2*U]=Z(U,5);V=new W(F,k,f+1,h,w),B=new W(P,j,0,p,w),z=new W(new Array(0),T,0,y,x)}(),G=!0),R.l_desc=new A(R.dyn_ltree,V),R.d_desc=new A(R.dyn_dtree,B),R.bl_desc=new A(R.bl_tree,z),R.bi_buf=0,R.bi_valid=0,re(R)},s._tr_stored_block=I,s._tr_flush_block=function(R,U,ee,Q){var K,se,de=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(oe){var ve,Ie=4093624447;for(ve=0;ve<=31;ve++,Ie>>>=1)if(1&Ie&&oe.dyn_ltree[2*ve]!==0)return i;if(oe.dyn_ltree[18]!==0||oe.dyn_ltree[20]!==0||oe.dyn_ltree[26]!==0)return a;for(ve=32;ve<f;ve++)if(oe.dyn_ltree[2*ve]!==0)return a;return i}(R)),ke(R,R.l_desc),ke(R,R.d_desc),de=function(oe){var ve;for(E(oe,oe.dyn_ltree,oe.l_desc.max_code),E(oe,oe.dyn_dtree,oe.d_desc.max_code),ke(oe,oe.bl_desc),ve=y-1;3<=ve&&oe.bl_tree[2*M[ve]+1]===0;ve--);return oe.opt_len+=3*(ve+1)+5+5+4,ve}(R),K=R.opt_len+3+7>>>3,(se=R.static_len+3+7>>>3)<=K&&(K=se)):K=se=ee+5,ee+4<=K&&U!==-1?I(R,U,ee,Q):R.strategy===4||se===K?(Y(R,2+(Q?1:0),3),ye(R,F,P)):(Y(R,4+(Q?1:0),3),function(oe,ve,Ie,Ne){var nn;for(Y(oe,ve-257,5),Y(oe,Ie-1,5),Y(oe,Ne-4,4),nn=0;nn<Ne;nn++)Y(oe,oe.bl_tree[2*M[nn]+1],3);q(oe,oe.dyn_ltree,ve-1),q(oe,oe.dyn_dtree,Ie-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,de+1),ye(R,R.dyn_ltree,R.dyn_dtree)),re(R),Q&&ae(R)},s._tr_tally=function(R,U,ee){return R.pending_buf[R.d_buf+2*R.last_lit]=U>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&U,R.pending_buf[R.l_buf+R.last_lit]=255&ee,R.last_lit++,U===0?R.dyn_ltree[2*ee]++:(R.matches++,U--,R.dyn_ltree[2*(C[ee]+f+1)]++,R.dyn_dtree[2*D(U)]++),R.last_lit===R.lit_bufsize-1},s._tr_align=function(R){Y(R,2,3),H(R,b,F),function(U){U.bi_valid===16?(X(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(o){(function(i,a){if(!i.setImmediate){var l,u,d,f,h=1,p={},y=!1,g=i.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(i);w=w&&w.setTimeout?w:i,l={}.toString.call(i.process)==="[object process]"?function(_){process.nextTick(function(){x(_)})}:function(){if(i.postMessage&&!i.importScripts){var _=!0,S=i.onmessage;return i.onmessage=function(){_=!1},i.postMessage("","*"),i.onmessage=S,_}}()?(f="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",b,!1):i.attachEvent("onmessage",b),function(_){i.postMessage(f+_,"*")}):i.MessageChannel?((d=new MessageChannel).port1.onmessage=function(_){x(_.data)},function(_){d.port2.postMessage(_)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(_){var S=g.createElement("script");S.onreadystatechange=function(){x(_),S.onreadystatechange=null,u.removeChild(S),S=null},u.appendChild(S)}):function(_){setTimeout(x,0,_)},w.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var S=new Array(arguments.length-1),N=0;N<S.length;N++)S[N]=arguments[N+1];var k={callback:_,args:S};return p[h]=k,l(h),h++},w.clearImmediate=v}function v(_){delete p[_]}function x(_){if(y)setTimeout(x,0,_);else{var S=p[_];if(S){y=!0;try{(function(N){var k=N.callback,j=N.args;switch(j.length){case 0:k();break;case 1:k(j[0]);break;case 2:k(j[0],j[1]);break;case 3:k(j[0],j[1],j[2]);break;default:k.apply(a,j)}})(S)}finally{v(_),y=!1}}}}function b(_){_.source===i&&typeof _.data=="string"&&_.data.indexOf(f)===0&&x(+_.data.slice(f.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof wt<"u"?wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Aj);var v9=Aj.exports;const y9=Ap(v9),yv=({onFilesUploaded:e,onZipExtracted:t,acceptZip:n=!1,customMessage:r})=>{const[s,o]=m.useState([]),[i,a]=m.useState(!1),l=m.useRef(null),{toast:u}=at(),d=N=>{N.preventDefault(),a(!0)},f=()=>{a(!1)},h=N=>{const j=N.replace(/\/$/,"").match(/(\d+(\.\d+)?)/);return j?j[1]:null},p=async N=>{console.log("Processing ZIP file:",N.name);try{const k=await y9.loadAsync(N),j=[],T={};k.forEach((F,P)=>{if(P.dir){const L=h(P.name);L&&(console.log(`Found chapter folder: ${P.name} -> Chapter Number: ${L}`),T[L]||(T[L]={id:Math.random().toString(36).substring(2,11),number:L,pages:[],thumbnailFile:null,thumbnailPreview:"",uploadProgress:0,uploadStatus:null,uploadError:null,rawFolderName:P.name}))}});const M=[];k.forEach((F,P)=>{if(!P.dir&&P.name.match(/\.(jpg|jpeg|png|webp)$/i)){const L=F.split("/");if(L.length>1){const C=L.slice(0,-1).join("/")+"/";let O=null;for(const V in T)if(T[V].rawFolderName===C){O=V;break}O&&T[O]?(console.log(`Found page: ${P.name} for chapter folder: ${C} (Chapter ${O})`),M.push(P.async("blob").then(V=>{const B=new File([V],L.pop(),{type:V.type});T[O].pages.push({file:B,preview:URL.createObjectURL(B),id:Math.random().toString(36).substring(2,11),name:B.name,size:B.size,uploadDate:new Date().toISOString()}),console.log(`Added page ${B.name} to Chapter ${O}`)}).catch(V=>console.error(`Error processing page ${P.name}:`,V)))):console.log(`Skipping page ${P.name}, no matching chapter folder found or chapter number not extracted for folder ${C}`)}}}),await Promise.all(M),console.log("All page processing promises resolved.");for(const F in T){const P=T[F];P.pages.length>0?(P.pages.sort((L,C)=>L.name.localeCompare(C.name,void 0,{numeric:!0,sensitivity:"base"})),j.push(P),console.log(`Chapter ${P.number} has ${P.pages.length} pages after sorting.`)):console.log(`Chapter ${P.number} has no pages, not adding to extractedChapters.`)}j.length>0?(j.sort((F,P)=>parseFloat(F.number)-parseFloat(P.number)),console.log("Final extracted chapters:",j),t(j),u({title:"ZIP Traité",description:`${j.length} chapitre(s) avec des pages extrait(s) du fichier ZIP.`})):(console.log("No valid chapters with pages found in ZIP."),u({title:"ZIP Vide ou Invalide",description:"Aucun chapitre valide (ex: 'Chapitre 01') avec des images n'a été trouvé dans le ZIP, ou les dossiers de chapitre étaient vides.",variant:"destructive"}))}catch(k){console.error("Error processing ZIP file:",k),u({title:"Erreur ZIP",description:`Impossible de traiter le fichier ZIP: ${k.message}`,variant:"destructive"})}},y=N=>{N.preventDefault(),a(!1);const k=Array.from(N.dataTransfer.files);if(n&&k.length===1&&k[0].name.endsWith(".zip"))p(k[0]);else{const j=k.filter(T=>T.type.startsWith("image/"));if(j.length===0&&!n){u({title:"Erreur",description:"Veuillez déposer uniquement des fichiers image.",variant:"destructive"});return}j.length>0&&w(j)}},g=N=>{const k=Array.from(N.target.files);n&&k.length===1&&k[0].name.endsWith(".zip")?p(k[0]):w(k.filter(j=>j.type.startsWith("image/"))),N.target.value=null},w=N=>{const k=N.map(T=>({file:T,preview:URL.createObjectURL(T),id:Math.random().toString(36).substring(2,11),name:T.name,size:T.size,uploadDate:new Date().toISOString()})),j=[...s,...k];o(j),e&&e(j)},v=N=>{const k=s.find(T=>T.id===N);k&&k.preview.startsWith("blob:")&&URL.revokeObjectURL(k.preview);const j=s.filter(T=>T.id!==N);o(j),e&&e(j)},x=n?"image/png, image/jpeg, image/webp, application/zip":"image/png, image/jpeg, image/webp",_=r||(n?"Formats: PNG, JPG, WEBP ou un fichier .ZIP contenant des chapitres.":"Formats: PNG, JPG, WEBP. L'ordre est important."),S=n?"Déposez un fichier .ZIP ou des images ici":"Déposez les pages ici ou cliquez pour parcourir";return c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:`upload-drop-zone p-6 flex flex-col items-center justify-center cursor-pointer border-2 border-dashed border-muted-foreground/30 hover:border-primary/70 transition-colors duration-200 rounded-lg ${i?"border-primary bg-primary/10":"bg-muted/10"}`,onDragOver:d,onDragLeave:f,onDrop:y,onClick:()=>{var N;return(N=l.current)==null?void 0:N.click()},children:[c.jsx(ge.div,{initial:{scale:1},animate:{scale:i?1.1:1},transition:{duration:.2},children:n?c.jsx(g_,{className:"h-10 w-10 mb-3 text-primary"}):c.jsx(Tu,{className:"h-10 w-10 mb-3 text-primary"})}),c.jsx("h3",{className:"text-md font-medium mb-1 text-center",children:S}),c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:_}),c.jsx("input",{type:"file",ref:l,onChange:g,className:"hidden",accept:x,multiple:!n})]}),s.length>0&&!n&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("p",{className:"text-sm font-medium",children:[s.length," page(s) sélectionnée(s):"]}),c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3",children:c.jsx(ts,{children:s.map((N,k)=>c.jsxs(ge.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"file-preview relative aspect-[3/4] rounded-md overflow-hidden border border-border group",children:[c.jsx("img",{src:N.preview,alt:N.name,className:"w-full h-full object-cover"}),c.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col items-center justify-center p-1",children:[c.jsxs("span",{className:"text-white text-xs font-bold bg-black/70 px-1 py-0.5 rounded mb-1",children:["Page ",k+1]}),c.jsx(te,{variant:"destructive",size:"icon",className:"remove-button h-6 w-6 rounded-full opacity-100",onClick:j=>{j.stopPropagation(),v(N.id)},title:"Supprimer cette page",children:c.jsx(Sn,{className:"h-4 w-4"})})]})]},N.id))})})]})]})},x9="https://images.unsplash.com/photo-1585776245991-a690541786ff",w9=({availableRoles:e,selectedRoles:t,onSelectionChange:n,disabled:r})=>{const s=o=>{const i=t.includes(o)?t.filter(a=>a!==o):[...t,o];n(i)};return!e||e.length===0?c.jsx("p",{className:"text-xs text-muted-foreground",children:"Aucun rôle personnalisé disponible."}):c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Ce,{className:"flex items-center",children:[c.jsx(Is,{className:"h-4 w-4 mr-2 text-primary"}),"Rôles requis pour l'accès"]}),c.jsx("div",{className:"max-h-32 overflow-y-auto p-2 border rounded-md bg-background space-y-1",children:e.map(o=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gr,{id:`role-${o.id}-${crypto.randomUUID()}`,checked:t.includes(o.name),onCheckedChange:()=>s(o.name),disabled:r}),c.jsx(Ce,{htmlFor:`role-${o.id}-${crypto.randomUUID()}`,className:"font-normal text-sm",children:o.name})]},o.id))}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Si aucun rôle n'est sélectionné, le chapitre sera public."})]})},b9=({id:e,chapterData:t,onUpdate:n,onRemove:r,webtoonChapters:s,isOnlyChapter:o,loading:i,availableRoles:a})=>{var p;const l=y=>{n(e,{...t,pages:y})},u=y=>{const g=y.target.files[0];if(g&&g.type.startsWith("image/")){const w=new FileReader;w.onloadend=()=>{n(e,{...t,thumbnailFile:g,thumbnailPreview:w.result})},w.readAsDataURL(g)}else n(e,{...t,thumbnailFile:null,thumbnailPreview:""}),g&&alert("Fichier invalide. Veuillez sélectionner une image.");y.target.value=null},d=y=>{n(e,{...t,number:y.target.value})},f=y=>{n(e,{...t,required_roles:y})},h=s==null?void 0:s.find(y=>parseFloat(y.number)===parseFloat(t.number));return c.jsxs(Ke,{className:"bg-muted/30 p-4 space-y-4 relative border border-border/50",children:[!o&&c.jsx(te,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-7 w-7 text-destructive hover:bg-destructive/10",onClick:()=>r(e),disabled:i,title:"Supprimer ce groupe",children:c.jsx(y$,{className:"h-4 w-4"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:`chapterNumber-${e}`,children:"Numéro Chapitre"}),c.jsx(Ve,{id:`chapterNumber-${e}`,type:"number",value:t.number,onChange:d,placeholder:"Ex: 1, 2.5",min:"0.1",step:"0.1",required:!0,disabled:i}),h&&c.jsxs("p",{className:"text-xs text-amber-600 flex items-center mt-1",children:[c.jsx(f_,{className:"h-3 w-3 mr-1"}),"Numéro existant. Sera remplacé."]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:`thumbnail-${e}`,children:"Miniature (Optionnel)"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("img",{src:t.thumbnailPreview||x9,alt:"Miniature",className:"h-16 w-auto object-cover rounded border aspect-[16/9] bg-background"}),c.jsx(Ve,{id:`thumbnail-${e}`,type:"file",accept:"image/*",onChange:u,className:"file-input-sm",disabled:i})]})]}),c.jsx("div",{className:"space-y-1",children:c.jsx(w9,{availableRoles:a,selectedRoles:t.required_roles||[],onSelectionChange:f,disabled:i})})]}),c.jsxs("div",{children:[c.jsxs(Ce,{children:["Pages (",((p=t.pages)==null?void 0:p.length)||0," sélectionnées)"]}),c.jsx(yv,{onFilesUploaded:l,acceptZip:!1},`pages-${e}`)]}),(t.uploadProgress>0||t.uploadStatus==="processing")&&t.uploadProgress<100&&c.jsx(vv,{value:t.uploadProgress,className:"w-full h-1.5 mt-1"}),t.uploadStatus&&t.uploadStatus!=="processing"&&c.jsx("p",{className:`text-xs mt-1 ${t.uploadStatus==="success"?"text-green-600":"text-red-600"}`,children:t.uploadStatus==="success"?"Upload réussi!":`Erreur: ${t.uploadError||"Inconnue"}`})]})},_9=()=>{var L;const{webtoonId:e}=$a(),t=as(),{toast:n}=at(),[r,s]=m.useState(null),[o,i]=m.useState([]),[a,l]=m.useState(!1),[u,d]=m.useState(0),[f,h]=m.useState(!0),[p,y]=m.useState(null),[g,w]=m.useState([]),v=(C="")=>({id:crypto.randomUUID(),number:C.toString(),thumbnailFile:null,thumbnailPreview:"",pages:[],required_roles:[],uploadProgress:0,uploadStatus:null,uploadError:null}),x=(C,O=!1)=>{if(O&&o.length>0&&o.some($=>$.pages.length>0||$.number))return;const V=(C==null?void 0:C.chapters)||[],B=V.length>0?Math.max(0,...V.map($=>parseFloat($.number)).filter($=>!isNaN($))):0,z=parseFloat(B)+1;i([v(isNaN(z)?"":z)])},b=m.useCallback(async()=>{h(!0);try{const[C,O]=await Promise.all([qu(e),bd()]);w(O||[]),C?(s(C),x(C,o.some(V=>V.pages.length>0||V.number))):(n({title:"Erreur",description:"Webtoon non trouvé.",variant:"destructive"}),t("/admin/webtoons"))}catch(C){console.error("Failed to fetch initial data:",C),n({title:"Erreur",description:"Impossible de charger les données initiales.",variant:"destructive"}),t("/admin/webtoons")}finally{h(!1)}},[e,t,n]);m.useEffect(()=>{b()},[b]);const _=C=>{C.length>0?i(C.map(O=>({...v(O.number),thumbnailPreview:O.thumbnailPreview||"",pages:O.pages||[]}))):x(r)},S=()=>{const C=o[o.length-1],O=parseFloat(C==null?void 0:C.number),V=isNaN(O)?o.length+1:O+1;i([...o,v(V)])},N=(C,O)=>i(V=>V.map(B=>B.id===C?O:B)),k=C=>{o.length>1&&i(O=>O.filter(V=>V.id!==C))},j=(C,O,V,B,z)=>{i($=>{var D,X,Y,H;const W=[...$];let A=C;return((D=W[A])==null?void 0:D.number)!==O.toString()&&(A=W.findIndex(Z=>Z.number===O.toString()&&Z.uploadStatus!=="success")),((X=W[A])==null?void 0:X.id)===((Y=$[A])==null?void 0:Y.id)&&((H=W[A])==null?void 0:H.number)===O.toString()||(A=$.findIndex(Z=>Z.number===O.toString()&&Z.uploadStatus!=="success"),A===-1&&(A=C)),A!==-1&&W[A]?W[A]={...W[A],uploadProgress:V,uploadStatus:B,uploadError:z}:console.warn(`Could not find chapter input for progress update: index ${C}, num ${O}`),W})},T=C=>d(C),M=async()=>{let C=[],O=!1,V=!1;if(o.forEach((z,$)=>{const W=parseFloat(z.number),A=!isNaN(W)&&W>=0,D=z.pages.length>0;A||(O=!0,n({title:"Erreur de validation",description:`Numéro de chapitre invalide pour le groupe ${$+1} ("${z.number||"non défini"}").`,variant:"destructive"})),D||(V=!0,n({title:"Erreur de validation",description:`Aucune page pour le chapitre ${z.number||`groupe ${$+1}`}.`,variant:"destructive"})),A&&D&&C.push({...z,originalIndex:$})}),O||V||C.length===0){C.length===0&&!O&&!V&&n({title:"Erreur",description:"Aucun chapitre valide à uploader.",variant:"destructive"});return}i(z=>z.map($=>({...$,uploadStatus:null,uploadError:null,uploadProgress:0}))),l(!0),y(null),d(0);const B=C.map(z=>({number:parseFloat(z.number),thumbnailFile:z.thumbnailFile,pages:z.pages.map($=>({file:$.file})),required_roles:z.required_roles||[]}));try{const z=await Jz(e,B,T,(W,A,D,X,Y)=>{const H=C.findIndex(Z=>parseFloat(Z.number)===parseFloat(A)&&Z.originalIndex===W);if(H!==-1)j(C[H].originalIndex,A,D,X,Y);else{const Z=o.findIndex(J=>parseFloat(J.number)===parseFloat(A));j(Z!==-1?Z:W,A,D,X,Y)}});let $=!0;z.forEach(W=>{const A=C.find(X=>parseFloat(X.number)===parseFloat(W.number)),D=A?A.originalIndex:-1;j(D,W.number,100,W.success?"success":"error",W.error),W.success||($=!1)}),$?(n({title:"Succès",description:`${z.length} chapitre(s) ajouté(s)/mis à jour.`}),x(r)):n({title:"Partiellement réussi",description:"Certains chapitres ont échoué. Vérifiez les détails sur chaque groupe de chapitre.",variant:"warning"}),await b()}catch(z){y(`Échec global: ${z.message}`),n({title:"Erreur Globale",description:`Échec: ${z.message}`,variant:"destructive"})}finally{l(!1),d(100)}},F=async(C,O)=>{if(window.confirm(`Supprimer le chapitre ${O} ? Irréversible.`)){l(!0);try{await Qz(C),n({title:"Succès",description:`Chapitre ${O} supprimé.`}),await b()}catch(V){n({title:"Erreur",description:`Impossible de supprimer: ${V.message}`,variant:"destructive"})}finally{l(!1)}}};if(f)return c.jsx("div",{className:"flex justify-center items-center p-12",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})});if(!r)return null;const P=((L=r.chapters)==null?void 0:L.sort((C,O)=>O.number-C.number))||[];return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 pb-12",children:[c.jsx(te,{variant:"outline",size:"sm",asChild:!0,children:c.jsxs(_e,{to:"/admin/webtoons",children:[c.jsx(ju,{className:"mr-2 h-4 w-4"})," Retour à la liste des webtoons"]})}),c.jsxs(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-lg",children:[c.jsxs(Nt,{children:[c.jsxs(Tt,{children:['Uploader Chapitres pour "',r.title,'"']}),c.jsx(dr,{children:'Ajoutez un ou plusieurs groupes de chapitres manuellement, ou déposez un fichier .ZIP. Le .ZIP doit contenir des dossiers nommés "Chapitre XX" (ex: "Chapitre 01", "Chapitre 10.5") contenant les pages. Si un numéro de chapitre existe déjà, ses pages, sa miniature et ses restrictions de rôles seront remplacées.'})]}),c.jsxs(et,{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 border-dashed border-2 border-muted-foreground/30 rounded-lg bg-muted/10",children:[c.jsxs(Ce,{className:"text-base font-semibold mb-2 block flex items-center",children:[c.jsx(g_,{className:"h-5 w-5 mr-2 text-primary"}),"Uploader un fichier .ZIP"]}),c.jsx(yv,{onZipExtracted:_,acceptZip:!0})]}),c.jsxs("div",{className:"relative py-4",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("span",{className:"w-full border-t"})}),c.jsx("div",{className:"relative flex justify-center",children:c.jsx("span",{className:"bg-card px-2 text-sm text-muted-foreground",children:"OU"})})]}),c.jsx(Ce,{className:"text-base font-semibold mb-2 block",children:"Ajouter des chapitres manuellement"}),p&&c.jsx("div",{className:"p-3 bg-destructive/10 text-destructive rounded-md text-sm",children:p}),c.jsx(ts,{children:o.map((C,O)=>c.jsx(ge.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:c.jsx(b9,{id:C.id,chapterData:C,onUpdate:N,onRemove:k,webtoonChapters:r.chapters,isOnlyChapter:o.length===1,loading:a,availableRoles:g})},C.id))}),c.jsxs(te,{variant:"outline",size:"sm",onClick:S,disabled:a,className:"mt-4",children:[c.jsx(Da,{className:"mr-2 h-4 w-4"})," Ajouter un autre groupe de chapitre"]}),a&&c.jsxs("div",{className:"space-y-1 mt-4",children:[c.jsx(Ce,{className:"text-sm text-muted-foreground",children:"Progression globale de l'upload..."}),c.jsx(vv,{value:u,className:"w-full h-2"})]})]}),c.jsx(fr,{children:c.jsx(te,{onClick:M,disabled:a||o.every(C=>C.pages.length===0||!C.number),children:a?c.jsxs(c.Fragment,{children:[c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}),`Envoi (${Math.round(u)}%)...`]}):c.jsxs(c.Fragment,{children:[c.jsx(Tu,{className:"mr-2 h-4 w-4"}),`Uploader ${o.filter(C=>C.pages.length>0&&C.number).length} Chapitre(s)`]})})})]}),c.jsxs(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-md mt-8",children:[c.jsx(Nt,{children:c.jsxs(Tt,{className:"text-lg",children:["Chapitres Existants (",P.length,")"]})}),c.jsx(et,{children:P.length>0?c.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:P.map(C=>c.jsxs("li",{className:"flex justify-between items-center p-3 bg-muted/10 hover:bg-muted/20 rounded-md transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[C.thumbnailUrl?c.jsx("img",{src:C.thumbnailUrl,alt:`Miniature Chap. ${C.number}`,className:"h-12 w-12 object-cover rounded"}):c.jsx("div",{className:"h-12 w-12 bg-muted rounded flex items-center justify-center text-muted-foreground text-xs",children:"Pas de min."}),c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium",children:["Chapitre ",C.number]}),C.required_roles&&C.required_roles.length>0&&c.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[c.jsx(Is,{className:"h-3 w-3 mr-1 text-primary/70"}),"Restreint à: ",C.required_roles.join(", ")]})]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx(te,{variant:"outline",size:"icon",className:"h-8 w-8",asChild:!0,title:"Modifier Chapitre",children:c.jsx(_e,{to:`/admin/webtoons/${e}/chapters/${C.id}/edit`,children:c.jsx(Lm,{className:"h-4 w-4"})})}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:bg-destructive/10",onClick:()=>F(C.id,C.number),disabled:a,title:"Supprimer Chapitre",children:c.jsx(ls,{className:"h-4 w-4"})})]})]},C.id))}):c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucun chapitre uploadé pour ce webtoon."})})]})]})},C9="https://images.unsplash.com/photo-1585776245991-a690541786ff",S9=({availableRoles:e,selectedRoles:t,onSelectionChange:n,disabled:r})=>{const s=o=>{const i=t.includes(o)?t.filter(a=>a!==o):[...t,o];n(i)};return!e||e.length===0?c.jsx("p",{className:"text-xs text-muted-foreground",children:"Aucun rôle personnalisé disponible."}):c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Ce,{className:"flex items-center",children:[c.jsx(Is,{className:"h-4 w-4 mr-2 text-primary"}),"Rôles requis pour l'accès"]}),c.jsx("div",{className:"max-h-32 overflow-y-auto p-2 border rounded-md bg-background space-y-1",children:e.map(o=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gr,{id:`edit-role-${o.id}-${crypto.randomUUID()}`,checked:t.includes(o.name),onCheckedChange:()=>s(o.name),disabled:r}),c.jsx(Ce,{htmlFor:`edit-role-${o.id}-${crypto.randomUUID()}`,className:"font-normal text-sm",children:o.name})]},o.id))}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Si aucun rôle n'est sélectionné, le chapitre sera public."})]})},E9=()=>{const{webtoonId:e,chapterId:t}=$a(),n=as(),{toast:r}=at(),{user:s,userRole:o}=Wt(),[i,a]=m.useState(null),[l,u]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(null),[y,g]=m.useState(""),[w,v]=m.useState(!1),[x,b]=m.useState([]),[_,S]=m.useState([]),[N,k]=m.useState([]),[j,T]=m.useState(!1),[M,F]=m.useState(!0),P=m.useCallback(async()=>{F(!0);try{const[A,D,X]=await Promise.all([qu(e),TE(t,s==null?void 0:s.id,o),bd()]);if(k(X||[]),!A||!D){r({title:"Erreur",description:"Webtoon ou chapitre non trouvé.",variant:"destructive"}),n(`/admin/webtoons/${slug}/upload`);return}if(D.accessDenied){r({title:"Accès refusé",description:"Vous n'avez pas les droits pour modifier ce chapitre.",variant:"destructive"}),n(`/admin/webtoons/${slug}/upload`);return}a(A),u(D),f(D.number.toString()),g(D.thumbnailUrl||""),b(D.pages.map(Y=>({...Y,id:Y.id||crypto.randomUUID()}))),S(D.required_roles||[])}catch(A){console.error("Failed to fetch chapter data:",A),r({title:"Erreur de chargement",description:A.message,variant:"destructive"}),n(`/admin/webtoons/${slug}/upload`)}finally{F(!1)}},[e,t,n,r,s==null?void 0:s.id,o]);m.useEffect(()=>{P()},[P]);const L=A=>{const D=A.target.files[0];if(D&&D.type.startsWith("image/")){p(D);const X=new FileReader;X.onloadend=()=>g(X.result),X.readAsDataURL(D),v(!1)}else D&&r({title:"Fichier invalide",description:"Veuillez sélectionner une image.",variant:"warning"})},C=A=>{v(A),A?(p(null),g("")):l!=null&&l.thumbnailUrl&&g(l.thumbnailUrl)},O=A=>{const D=A.map(X=>({id:crypto.randomUUID(),file:X.file,publicUrl:URL.createObjectURL(X.file),page_number:0}));b(X=>[...X,...D])},V=A=>{b(D=>D.filter(X=>X.id!==A))},B=(A,D)=>{A.dataTransfer.setData("draggedPageIndex",D)},z=A=>{A.preventDefault()},$=(A,D)=>{A.preventDefault();const X=parseInt(A.dataTransfer.getData("draggedPageIndex"));if(X===D)return;const Y=[...x],[H]=Y.splice(X,1);Y.splice(D,0,H),b(Y)},W=async A=>{A.preventDefault(),T(!0);const D=parseFloat(d);if(isNaN(D)||D<=0){r({title:"Erreur",description:"Numéro de chapitre invalide.",variant:"destructive"}),T(!1);return}if(x.length===0){r({title:"Erreur",description:"Le chapitre doit contenir au moins une page.",variant:"destructive"}),T(!1);return}const X={number:D,thumbnailFile:h,removeThumbnail:w,existingThumbnailPath:l.existingThumbnailPath,pages:x.map((Y,H)=>({id:Y.id,file:Y.file,image_url:Y.image_url,page_number:H+1})),required_roles:_};try{await qz(t,e,X),r({title:"Succès",description:"Chapitre mis à jour avec succès."}),n(`/admin/webtoons/${slug}/upload`)}catch(Y){console.error("Failed to update chapter:",Y),r({title:"Erreur de mise à jour",description:Y.message,variant:"destructive"})}finally{T(!1)}};return M?c.jsx("div",{className:"flex justify-center items-center p-12",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})}):!i||!l?null:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[c.jsx(te,{variant:"outline",size:"sm",asChild:!0,children:c.jsxs(_e,{to:`/admin/webtoons/${e}/upload`,children:[c.jsx(ju,{className:"mr-2 h-4 w-4"})," Retour à l'upload"]})}),c.jsxs(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-lg",children:[c.jsxs(Nt,{children:[c.jsxs(Tt,{children:["Modifier Chapitre ",l.number,' de "',i.title,'"']}),c.jsx(dr,{children:"Modifiez les détails, les pages et les restrictions d'accès du chapitre."})]}),c.jsxs("form",{onSubmit:W,children:[c.jsxs(et,{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"chapterNumber",children:"Numéro Chapitre"}),c.jsx(Ve,{id:"chapterNumber",type:"number",value:d,onChange:A=>f(A.target.value),placeholder:"Ex: 1, 2.5",min:"0.1",step:"0.1",required:!0,disabled:j})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Ce,{htmlFor:"thumbnail",children:"Miniature (Optionnel)"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("img",{src:y||C9,alt:"Miniature",className:"h-20 w-auto object-cover rounded border aspect-[16/9] bg-background"}),c.jsx(Ve,{id:"thumbnail",type:"file",accept:"image/*",onChange:L,className:"file-input-sm",disabled:j})]}),l.thumbnailUrl&&c.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[c.jsx(gr,{id:"removeThumbnail",checked:w,onCheckedChange:C,disabled:j}),c.jsx(Ce,{htmlFor:"removeThumbnail",children:"Supprimer la miniature actuelle"})]})]}),c.jsx("div",{className:"space-y-1",children:c.jsx(S9,{availableRoles:N,selectedRoles:_,onSelectionChange:S,disabled:j})})]}),c.jsxs("div",{children:[c.jsx(Ce,{children:"Pages du Chapitre"}),c.jsxs("div",{className:"mt-2 p-4 border border-dashed rounded-md bg-muted/30 space-y-3 min-h-[200px]",children:[x.map((A,D)=>c.jsxs(ge.div,{className:"flex items-center justify-between p-2 bg-background rounded shadow-sm hover:shadow-md",draggable:!0,onDragStart:X=>B(X,D),onDragOver:z,onDrop:X=>$(X,D),layout:!0,children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(m$,{className:"h-5 w-5 text-muted-foreground cursor-grab"}),c.jsx("img",{src:A.publicUrl,alt:`Page ${D+1}`,className:"h-16 w-16 object-cover rounded border"}),c.jsx("span",{className:"text-sm truncate max-w-xs",children:A.file?A.file.name:`Page ${D+1} (existante)`})]}),c.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10",onClick:()=>V(A.id),disabled:j,children:c.jsx(ls,{className:"h-4 w-4"})})]},A.id)),x.length===0&&c.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucune page. Glissez-déposez ou ajoutez des fichiers ci-dessous."})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx(Ce,{className:"text-sm font-medium",children:"Ajouter de nouvelles pages"}),c.jsx(yv,{onFilesUploaded:O,customMessage:"Glissez-déposez des images ici, ou cliquez pour sélectionner"})]})]})]}),c.jsx(fr,{children:c.jsxs(te,{type:"submit",disabled:j||M,children:[j?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):c.jsx(Fm,{className:"mr-2 h-4 w-4"}),"Sauvegarder Modifications"]})})]})]})]})},Of=[{id:"core_user",name:"user",description:"Rôle utilisateur standard"},{id:"core_admin",name:"admin",description:"Rôle administrateur système"}],k9=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(Of),[s,o]=m.useState(!0),[i,a]=m.useState(null),[l,u]=m.useState(""),{toast:d}=at(),{user:f}=Wt(),h=m.useCallback(async()=>{o(!0);try{const[w,v]=await Promise.all([EM(),bd()]);t(w.map(b=>({...b,roleName:b.role||"user"})));const x=v.map(b=>({id:b.id,name:b.name,description:b.description}));r([...Of,...x].sort((b,_)=>b.name.localeCompare(_.name)))}catch(w){console.error("Error fetching initial data:",w),d({title:"Erreur",description:"Impossible de charger les données initiales.",variant:"destructive"}),t([]),r(Of)}finally{o(!1)}},[d]);m.useEffect(()=>{h()},[h]);const p=(w,v)=>{a(w),u(v||"user")},y=async w=>{if(!l){d({title:"Erreur",description:"Veuillez sélectionner un rôle.",variant:"destructive"});return}if(f&&w===f.id&&l!=="admin"){d({title:"Action non autorisée",description:"Vous ne pouvez pas modifier votre propre rôle d'administrateur à autre chose qu'admin.",variant:"destructive"}),a(null),u("");return}try{await kM(w,l),d({title:"Succès",description:"Le rôle de l'utilisateur a été mis à jour."}),t(e.map(v=>v.id===w?{...v,role:l,roleName:l}:v)),a(null),u("")}catch(v){console.error("Error updating user role:",v),d({title:"Erreur",description:v.message||"Impossible de mettre à jour le rôle.",variant:"destructive"})}},g=w=>{if(!w)return"?";const v=w.split(" ");return v.length===1?w.substring(0,2).toUpperCase():(v[0][0]+(v.length>1?v[v.length-1][0]:"")).toUpperCase()};return s?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})}):c.jsxs("div",{className:"container mx-auto py-8",children:[c.jsxs("h1",{className:"text-3xl font-bold mb-6 flex items-center",children:[c.jsx(Oc,{className:"mr-3 h-8 w-8 text-primary"}),"Gestion des Utilisateurs"]}),c.jsx("div",{className:"bg-card border rounded-lg overflow-hidden shadow-md",children:c.jsxs(li,{children:[c.jsx(ci,{children:c.jsxs(vr,{children:[c.jsx(Oe,{className:"w-[80px]",children:"Avatar"}),c.jsx(Oe,{children:"Nom d'utilisateur"}),c.jsx(Oe,{children:"Email"}),c.jsx(Oe,{children:"Rôle Actuel"}),c.jsx(Oe,{className:"w-[250px]",children:"Changer Rôle"}),c.jsx(Oe,{className:"text-right w-[120px]",children:"Actions"})]})}),c.jsx(wd,{children:e.map(w=>c.jsxs(vr,{children:[c.jsx(Me,{children:c.jsxs(Ja,{className:"h-10 w-10 border-2 border-primary/30",children:[c.jsx(Qa,{src:w.avatarUrl,alt:w.username}),c.jsx(el,{children:g(w.username)})]})}),c.jsx(Me,{className:"font-medium",children:w.username||"N/A"}),c.jsx(Me,{className:"text-muted-foreground",children:w.email||"N/A"}),c.jsx(Me,{children:c.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${w.roleName==="admin"?"bg-primary/20 text-primary":w.roleName==="user"?"bg-muted text-muted-foreground":"bg-accent/20 text-accent-foreground"}`,children:[w.roleName==="admin"?c.jsx(b_,{className:"inline h-3 w-3 mr-1"}):c.jsx(Dc,{className:"inline h-3 w-3 mr-1"}),w.roleName||"user"]})}),c.jsx(Me,{children:i===w.id?c.jsxs(Mk,{value:l,onValueChange:v=>u(v),disabled:f&&w.id===f.id&&l!=="admin",children:[c.jsx(dv,{className:"w-full",children:c.jsx(Lk,{placeholder:"Sélectionner un rôle"})}),c.jsx(fv,{children:n.map(v=>c.jsx(tu,{value:v.name,children:v.name},v.id))})]}):w.roleName||"user"}),c.jsx(Me,{className:"text-right",children:i===w.id?c.jsxs(c.Fragment,{children:[c.jsx(te,{size:"sm",onClick:()=>y(w.id),className:"mr-2",disabled:f&&w.id===f.id&&l!=="admin",children:"Sauvegarder"}),c.jsx(te,{size:"sm",variant:"outline",onClick:()=>{a(null),u("")},children:"Annuler"})]}):c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>p(w.id,w.roleName),disabled:f&&w.id===f.id&&w.roleName==="admin",children:c.jsx(w$,{className:"h-4 w-4"})})})]},w.id))})]})}),e.length===0&&!s&&c.jsxs("div",{className:"text-center py-10 bg-card border rounded-lg mt-6 shadow-md",children:[c.jsx(Oc,{className:"mx-auto h-12 w-12 text-muted-foreground"}),c.jsx("h3",{className:"mt-2 text-lg font-medium",children:"Aucun utilisateur trouvé"}),c.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Il n'y a pas encore d'utilisateurs enregistrés sur le site."})]})]})},j9=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,o]=m.useState(null),[i,a]=m.useState(1),[l,u]=m.useState(0),[d,f]=m.useState(null),{toast:h}=at(),p=15,y=async v=>{r(!0),o(null);try{const{comments:x,totalCount:b}=await uU(v,p);t(x),u(b)}catch(x){console.error("Failed to fetch comments:",x),o("Impossible de charger les commentaires."),h({title:"Erreur",description:x.message,variant:"destructive"})}finally{r(!1)}};m.useEffect(()=>{y(i)},[i]);const g=async v=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce commentaire ?")){f(v);try{await hU(v),h({title:"Succès",description:"Commentaire supprimé."}),y(i)}catch(x){console.error("Failed to delete comment:",x),h({title:"Erreur",description:`Impossible de supprimer le commentaire: ${x.message}`,variant:"destructive"})}finally{f(null)}}},w=Math.ceil(l/p);return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des Commentaires"}),n&&e.length===0?c.jsx("div",{className:"flex justify-center items-center py-10",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})}):s?c.jsx("div",{className:"text-center text-destructive bg-destructive/10 p-4 rounded-md",children:s}):e.length===0?c.jsx("p",{className:"text-muted-foreground text-center py-6",children:"Aucun commentaire trouvé."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border rounded-lg overflow-hidden bg-card",children:c.jsxs(li,{children:[c.jsx(ci,{children:c.jsxs(vr,{children:[c.jsx(Oe,{className:"w-[35%]",children:"Commentaire"}),c.jsx(Oe,{children:"Utilisateur"}),c.jsx(Oe,{children:"Contexte"}),c.jsx(Oe,{children:"Date"}),c.jsx(Oe,{className:"text-right",children:"Actions"})]})}),c.jsx(wd,{children:e.map(v=>{var x;return c.jsxs(vr,{children:[c.jsx(Me,{className:"text-sm text-muted-foreground line-clamp-3",children:v.content}),c.jsx(Me,{children:((x=v.profiles)==null?void 0:x.username)||"N/A"}),c.jsx(Me,{className:"text-xs",children:v.webtoons?c.jsx(_e,{to:`/webtoon/${v.webtoons.slug}`,target:"_blank",rel:"noopener noreferrer",children:v.webtoons.title}):"Webtoon supprimé"}),c.jsx(Me,{className:"text-xs text-muted-foreground",children:v.created_at?Ga(new Date(v.created_at),{addSuffix:!0,locale:qa}):""}),c.jsx(Me,{className:"text-right",children:c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:bg-destructive/10",onClick:()=>g(v.id),disabled:d===v.id,title:"Supprimer ce commentaire",children:d===v.id?c.jsx(Ae,{className:"h-4 w-4 animate-spin"}):c.jsx(ls,{className:"h-4 w-4"})})})]},v.id)})})]})}),w>1&&c.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[c.jsx(te,{variant:"outline",size:"sm",onClick:()=>a(v=>Math.max(1,v-1)),disabled:i===1||n,children:"Précédent"}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",i," sur ",w]}),c.jsx(te,{variant:"outline",size:"sm",onClick:()=>a(v=>Math.min(w,v+1)),disabled:i===w||n,children:"Suivant"})]})]})]})};var Rj="AlertDialog",[P9,CW]=tn(Rj,[LS]),br=LS(),$j=e=>{const{__scopeAlertDialog:t,...n}=e,r=br(t);return c.jsx(e2,{...r,...n,modal:!0})};$j.displayName=Rj;var N9="AlertDialogTrigger",Ij=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=br(n);return c.jsx(KL,{...s,...r,ref:t})});Ij.displayName=N9;var T9="AlertDialogPortal",Dj=e=>{const{__scopeAlertDialog:t,...n}=e,r=br(t);return c.jsx(t2,{...r,...n})};Dj.displayName=T9;var A9="AlertDialogOverlay",Oj=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=br(n);return c.jsx(Cg,{...s,...r,ref:t})});Oj.displayName=A9;var To="AlertDialogContent",[R9,$9]=P9(To),I9=vR("AlertDialogContent"),Mj=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=br(n),i=m.useRef(null),a=$e(t,i),l=m.useRef(null);return c.jsx(BL,{contentName:To,titleName:Lj,docsSlug:"alert-dialog",children:c.jsx(R9,{scope:n,cancelRef:l,children:c.jsxs(Sg,{role:"alertdialog",...o,...s,ref:a,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=l.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(I9,{children:r}),c.jsx(O9,{contentRef:i})]})})})});Mj.displayName=To;var Lj="AlertDialogTitle",Fj=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=br(n);return c.jsx(Eg,{...s,...r,ref:t})});Fj.displayName=Lj;var zj="AlertDialogDescription",Uj=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=br(n);return c.jsx(kg,{...s,...r,ref:t})});Uj.displayName=zj;var D9="AlertDialogAction",Bj=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=br(n);return c.jsx(Zu,{...s,...r,ref:t})});Bj.displayName=D9;var Vj="AlertDialogCancel",Wj=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=$9(Vj,n),o=br(n),i=$e(t,s);return c.jsx(Zu,{...o,...r,ref:i})});Wj.displayName=Vj;var O9=({contentRef:e})=>{const t=`\`${To}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${To}\` by passing a \`${zj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${To}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},M9=$j,L9=Ij,F9=Dj,Hj=Oj,Kj=Mj,Gj=Bj,qj=Wj,Xj=Fj,Yj=Uj;const z9=M9,U9=L9,B9=F9,Zj=ce.forwardRef(({className:e,...t},n)=>c.jsx(Hj,{className:he("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Zj.displayName=Hj.displayName;const Jj=ce.forwardRef(({className:e,...t},n)=>c.jsxs(B9,{children:[c.jsx(Zj,{}),c.jsx(Kj,{ref:n,className:he("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Jj.displayName=Kj.displayName;const Qj=({className:e,...t})=>c.jsx("div",{className:he("flex flex-col space-y-2 text-center sm:text-left",e),...t});Qj.displayName="AlertDialogHeader";const eP=({className:e,...t})=>c.jsx("div",{className:he("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});eP.displayName="AlertDialogFooter";const tP=ce.forwardRef(({className:e,...t},n)=>c.jsx(Xj,{ref:n,className:he("text-lg font-semibold",e),...t}));tP.displayName=Xj.displayName;const nP=ce.forwardRef(({className:e,...t},n)=>c.jsx(Yj,{ref:n,className:he("text-sm text-muted-foreground",e),...t}));nP.displayName=Yj.displayName;const rP=ce.forwardRef(({className:e,...t},n)=>c.jsx(Gj,{ref:n,className:he(lg(),e),...t}));rP.displayName=Gj.displayName;const sP=ce.forwardRef(({className:e,...t},n)=>c.jsx(qj,{ref:n,className:he(lg({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));sP.displayName=qj.displayName;const dw=[{id:"core_admin",name:"admin",description:"Accès complet à toutes les fonctionnalités d'administration.",isCore:!0},{id:"core_user",name:"user",description:"Rôle par défaut pour les utilisateurs enregistrés.",isCore:!0}],V9=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,o]=m.useState(!1),[i,a]=m.useState(!1),[l,u]=m.useState(null),[d,f]=m.useState(""),[h,p]=m.useState(""),{toast:y}=at(),g=m.useCallback(async()=>{r(!0);try{const S=await bd();t(S)}catch(S){console.error("Error fetching roles:",S),y({title:"Erreur",description:"Impossible de charger les rôles personnalisés.",variant:"destructive"}),t([])}finally{r(!1)}},[y]);m.useEffect(()=>{g()},[g]);const w=m.useMemo(()=>[...dw,...e.map(S=>({...S,isCore:!1}))].sort((S,N)=>S.name.localeCompare(N.name)),[e]),v=S=>{if(S.isCore){y({title:"Action non autorisée",description:`Le rôle "${S.name}" est un rôle système et ne peut pas être modifié.`,variant:"destructive"});return}u(S),f(S.name),p(S.description||""),a(!0)},x=async(S,N)=>{if(dw.find(k=>k.name===N)){y({title:"Action non autorisée",description:`Le rôle "${N}" est un rôle système et ne peut pas être supprimé.`,variant:"destructive"});return}o(!0);try{await g9(S),y({title:"Succès",description:`Le rôle "${N}" a été supprimé.`}),g()}catch(k){console.error("Error deleting role:",k),y({title:"Erreur",description:k.message||"Impossible de supprimer le rôle.",variant:"destructive"})}finally{o(!1)}},b=async S=>{if(S.preventDefault(),!d.trim()){y({title:"Validation échouée",description:"Le nom du rôle est requis.",variant:"destructive"});return}o(!0);try{l?(await m9(l.id,d,h),y({title:"Succès",description:`Le rôle "${d}" a été mis à jour.`})):(await p9(d,h),y({title:"Succès",description:`Le rôle "${d}" a été créé.`})),g(),a(!1),u(null),f(""),p("")}catch(N){console.error("Error saving role:",N),y({title:"Erreur",description:N.message||"Impossible d'enregistrer le rôle.",variant:"destructive"})}finally{o(!1)}},_=(S=null)=>{if(S&&S.isCore){v(S);return}u(S),f(S?S.name:""),p(S&&S.description||""),a(!0)};return n?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})}):c.jsxs("div",{className:"container mx-auto py-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Rôles"}),c.jsxs(te,{onClick:()=>_(),children:[c.jsx(Da,{className:"mr-2 h-5 w-5"})," Ajouter un Rôle Personnalisé"]})]}),c.jsx(Ke,{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 text-blue-700",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(g$,{className:"h-5 w-5 mr-3 mt-1 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:"Information sur les Rôles"}),c.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1 mt-1",children:[c.jsxs("li",{children:["Les rôles ",c.jsx("span",{className:"font-semibold",children:"'admin'"})," et ",c.jsx("span",{className:"font-semibold",children:"'user'"})," sont des rôles système et ne peuvent pas être modifiés ou supprimés."]}),c.jsx("li",{children:"Vous pouvez créer des rôles personnalisés pour une gestion plus fine des accès (fonctionnalité d'assignation à venir)."}),c.jsx("li",{children:`Actuellement, les rôles personnalisés ne sont pas automatiquement assignables aux utilisateurs via l'interface "Gérer Utilisateurs". Leur utilité principale sera pour des vérifications de permissions spécifiques dans le code.`})]})]})]})}),w.length===0&&!n&&c.jsxs("div",{className:"text-center py-10 bg-card border rounded-lg",children:[c.jsx(Is,{className:"mx-auto h-12 w-12 text-muted-foreground"}),c.jsx("h3",{className:"mt-2 text-lg font-medium",children:"Aucun rôle défini"}),c.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Commencez par ajouter des rôles personnalisés."})]}),w.length>0&&c.jsx(Ke,{className:"overflow-hidden shadow-md",children:c.jsxs(li,{children:[c.jsx(ci,{children:c.jsxs(vr,{children:[c.jsx(Oe,{className:"w-[50px]"}),c.jsx(Oe,{children:"Nom du Rôle"}),c.jsx(Oe,{children:"Description"}),c.jsx(Oe,{className:"text-right w-[150px]",children:"Actions"})]})}),c.jsx(wd,{children:w.map(S=>c.jsxs(vr,{className:S.isCore?"bg-muted/30":"",children:[c.jsx(Me,{children:S.name==="admin"?c.jsx(Is,{className:"h-5 w-5 text-primary"}):c.jsx(Dc,{className:"h-5 w-5 text-muted-foreground"})}),c.jsx(Me,{className:"font-medium",children:S.name}),c.jsx(Me,{className:"text-muted-foreground text-sm",children:S.description||"N/A"}),c.jsxs(Me,{className:"text-right",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>_(S),className:"mr-2",disabled:S.isCore,children:c.jsx(Lm,{className:"h-4 w-4"})}),c.jsxs(z9,{children:[c.jsx(U9,{asChild:!0,children:c.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",disabled:S.isCore,children:c.jsx(ls,{className:"h-4 w-4"})})}),c.jsxs(Jj,{children:[c.jsxs(Qj,{children:[c.jsx(tP,{children:"Êtes-vous sûr de vouloir supprimer ce rôle ?"}),c.jsxs(nP,{children:['Cette action est irréversible. La suppression du rôle "',S.name,'" peut affecter les permissions des utilisateurs si ce rôle est utilisé quelque part.']})]}),c.jsxs(eP,{children:[c.jsx(sP,{children:"Annuler"}),c.jsxs(rP,{onClick:()=>x(S.id,S.name),className:"bg-destructive hover:bg-destructive/90",disabled:s,children:[s&&c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}),"Supprimer"]})]})]})]})]})]},S.id))})]})}),c.jsx(jg,{open:i,onOpenChange:S=>{S||(u(null),f(""),p("")),a(S)},children:c.jsxs(Ju,{className:"sm:max-w-[425px]",children:[c.jsxs(Qu,{children:[c.jsx(td,{children:l?"Modifier le Rôle":"Ajouter un Nouveau Rôle Personnalisé"}),c.jsx(nd,{children:l?"Modifiez les détails du rôle.":"Créez un nouveau rôle et définissez sa description."})]}),c.jsxs("form",{onSubmit:b,className:"grid gap-4 py-4",children:[c.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[c.jsx("label",{htmlFor:"roleNameDialog",className:"text-right",children:"Nom"}),c.jsx(Ve,{id:"roleNameDialog",value:d,onChange:S=>f(S.target.value),className:"col-span-3",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[c.jsx("label",{htmlFor:"roleDescriptionDialog",className:"text-right",children:"Description"}),c.jsx(Za,{id:"roleDescriptionDialog",value:h,onChange:S=>p(S.target.value),className:"col-span-3"})]}),c.jsxs(ed,{children:[c.jsx(n2,{asChild:!0,children:c.jsx(te,{type:"button",variant:"outline",children:"Annuler"})}),c.jsxs(te,{type:"submit",disabled:s,children:[s&&c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}),l?"Sauvegarder":"Créer"]})]})]})]})})]})},W9="https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0",H9=({isOpen:e,onOpenChange:t,onSubmit:n,initialPopupData:r,formLoading:s})=>{const[o,i]=m.useState({title:"",content:"",is_active:!1,start_date:"",end_date:"",imageFile:null,existingImageUrl:null,removeImage:!1,link_url:"",link_text:""}),[a,l]=m.useState("");m.useEffect(()=>{e&&(r?(i({title:r.title||"",content:r.content||"",is_active:r.is_active||!1,start_date:r.start_date?new Date(r.start_date).toISOString().slice(0,16):"",end_date:r.end_date?new Date(r.end_date).toISOString().slice(0,16):"",imageFile:null,existingImageUrl:r.image_url||null,removeImage:!1,link_url:r.link_url||"",link_text:r.link_text||""}),l(r.imageUrl||"")):(i({title:"",content:"",is_active:!1,start_date:"",end_date:"",imageFile:null,existingImageUrl:null,removeImage:!1,link_url:"",link_text:""}),l("")))},[r,e]);const u=p=>{const{name:y,value:g,type:w,checked:v}=p.target;i(x=>({...x,[y]:w==="checkbox"?v:g}))},d=p=>{const y=p.target.files[0];if(y&&y.type.startsWith("image/")){i(w=>({...w,imageFile:y,removeImage:!1}));const g=new FileReader;g.onloadend=()=>l(g.result),g.readAsDataURL(y)}else y&&alert("Veuillez sélectionner un fichier image valide.")},f=()=>{i(p=>({...p,imageFile:null,removeImage:!0})),l("")},h=p=>{if(p.preventDefault(),!o.title.trim()||!o.content.trim()){alert("Titre et contenu sont obligatoires.");return}n(o)};return c.jsx(jg,{open:e,onOpenChange:t,children:c.jsxs(Ju,{className:"sm:max-w-lg",children:[c.jsxs(Qu,{children:[c.jsx(td,{children:r?"Modifier Pop-up":"Nouvelle Pop-up"}),c.jsx(nd,{children:"Remplissez les informations de la pop-up. Les dates sont optionnelles."})]}),c.jsxs("form",{onSubmit:h,className:"space-y-4 py-2 max-h-[70vh] overflow-y-auto pr-2",children:[c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"popup-title",children:"Titre"}),c.jsx(Ve,{id:"popup-title",name:"title",value:o.title,onChange:u,placeholder:"Titre de la pop-up",required:!0,disabled:s})]}),c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"popup-content",children:"Contenu"}),c.jsx(Za,{id:"popup-content",name:"content",value:o.content,onChange:u,placeholder:"Message de la pop-up...",rows:4,required:!0,disabled:s})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"popup-start_date",children:"Date de début (Optionnel)"}),c.jsx(Ve,{id:"popup-start_date",name:"start_date",type:"datetime-local",value:o.start_date,onChange:u,disabled:s})]}),c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"popup-end_date",children:"Date de fin (Optionnel)"}),c.jsx(Ve,{id:"popup-end_date",name:"end_date",type:"datetime-local",value:o.end_date,onChange:u,disabled:s})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Ce,{htmlFor:"popup-imageFile",children:"Image (Optionnel)"}),a&&c.jsx("div",{className:"my-2 relative w-full aspect-video bg-muted rounded overflow-hidden",children:c.jsx("img",{src:a,alt:"Aperçu",className:"w-full h-full object-contain",onError:p=>{p.target.onerror=null,p.target.src=W9}})}),c.jsx(Ve,{id:"popup-imageFile",type:"file",accept:"image/*",onChange:d,className:"file-input",disabled:s}),(o.existingImageUrl||a)&&!o.removeImage&&c.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:f,disabled:s,className:"text-xs",children:"Supprimer l'image actuelle"}),o.removeImage&&c.jsx("p",{className:"text-xs text-muted-foreground",children:"L'image sera supprimée à l'enregistrement."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"popup-link_url",children:"URL du lien (Optionnel)"}),c.jsx(Ve,{id:"popup-link_url",name:"link_url",type:"url",value:o.link_url,onChange:u,placeholder:"https://example.com",disabled:s})]}),c.jsxs("div",{children:[c.jsx(Ce,{htmlFor:"popup-link_text",children:"Texte du lien (Optionnel)"}),c.jsx(Ve,{id:"popup-link_text",name:"link_text",value:o.link_text,onChange:u,placeholder:"En savoir plus",disabled:s})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[c.jsx(gr,{id:"popup-is_active",name:"is_active",checked:o.is_active,onCheckedChange:p=>i(y=>({...y,is_active:p})),disabled:s}),c.jsx(Ce,{htmlFor:"popup-is_active",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Activer cette pop-up ?"})]}),c.jsxs(ed,{className:"pt-4",children:[c.jsx(n2,{asChild:!0,children:c.jsx(te,{type:"button",variant:"outline",disabled:s,children:"Annuler"})}),c.jsx(te,{type:"submit",disabled:s,children:s?c.jsx(Ae,{className:"mr-2 h-4 w-4 animate-spin"}):r?"Enregistrer":"Ajouter"})]})]})]})})},K9=({popup:e,onEdit:t,onDelete:n})=>{const r={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return c.jsxs(ge.tr,{variants:r,className:"hover:bg-muted/20",children:[c.jsx(Me,{className:"font-medium",children:e.title}),c.jsx(Me,{children:c.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${e.is_active?"bg-green-500/20 text-green-700":"bg-red-500/20 text-red-700"}`,children:e.is_active?"Active":"Inactive"})}),c.jsxs(Me,{className:"text-xs text-muted-foreground",children:[e.start_date?new Date(e.start_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"," - ",e.end_date?new Date(e.end_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]}),c.jsxs(Me,{className:"text-right",children:[c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t(e),className:"hover:text-primary mr-1",title:"Modifier",children:c.jsx(w_,{className:"h-4 w-4"})}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>n(e.id,e.title),className:"hover:text-destructive",title:"Supprimer",children:c.jsx(ls,{className:"h-4 w-4"})})]})]})},G9=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,o]=m.useState(null),{toast:i}=at(),[a,l]=m.useState(!1),[u,d]=m.useState(null),[f,h]=m.useState(!1),p=m.useCallback(async()=>{r(!0),o(null);try{const _=await jM();t(_)}catch(_){o("Impossible de charger les pop-ups."),i({title:"Erreur de chargement",description:_.message,variant:"destructive"})}finally{r(!1)}},[i]);m.useEffect(()=>{p()},[p]);const y=()=>{d(null),l(!0)},g=_=>{d(_),l(!0)},w=_=>{l(_),_||d(null)},v=async _=>{h(!0);try{u?(await TM(u.id,_),i({title:"Succès",description:"Pop-up mis à jour."})):(await NM(_),i({title:"Succès",description:"Pop-up ajouté."})),l(!1),d(null),p()}catch(S){i({title:"Erreur d'enregistrement",description:S.message,variant:"destructive"})}finally{h(!1)}},x=async(_,S)=>{if(window.confirm(`Supprimer la pop-up "${S}" ?`))try{r(!0),await AM(_),i({title:"Succès",description:`Pop-up "${S}" supprimée.`}),p()}catch(N){i({title:"Erreur de suppression",description:N.message,variant:"destructive"}),r(!1)}},b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return c.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gérer les Pop-ups"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(te,{variant:"outline",size:"icon",onClick:p,disabled:n,title:"Rafraîchir",children:c.jsx(_$,{className:`h-4 w-4 ${n?"animate-spin":""}`})}),c.jsxs(te,{onClick:y,children:[c.jsx(Da,{className:"mr-2 h-4 w-4"})," Nouvelle Pop-up"]})]})]}),s&&c.jsx("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:s}),c.jsx(Ke,{className:"bg-card/80 backdrop-blur-sm shadow-md",children:c.jsx(et,{className:"p-0",children:n&&e.length===0?c.jsx("div",{className:"p-12 text-center",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary mx-auto"})}):e.length>0?c.jsxs(li,{children:[c.jsx(ci,{children:c.jsxs(vr,{children:[c.jsx(Oe,{children:"Titre"}),c.jsx(Oe,{children:"Statut"}),c.jsx(Oe,{children:"Période"}),c.jsx(Oe,{className:"text-right",children:"Actions"})]})}),c.jsx(ge.tbody,{variants:b,initial:"hidden",animate:"visible",children:e.map(_=>c.jsx(K9,{popup:_,onEdit:g,onDelete:x},_.id))})]}):c.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"Aucune pop-up créée."})})}),c.jsx(H9,{isOpen:a,onOpenChange:w,onSubmit:v,initialPopupData:u,formLoading:f})]})},fw=({adminOnly:e=!1})=>{const{user:t,isAdmin:n,loading:r}=Wt(),s=wr();return r?null:t?e&&!n?(console.warn("Admin access denied for user:",t.id),c.jsx(D0,{to:"/",replace:!0})):c.jsx($c,{}):c.jsx(D0,{to:"/auth",state:{from:s},replace:!0})},q9="webtoon-images",X9=()=>{const{user:e}=Wt(),{toast:t}=at(),[n,r]=m.useState([]),[s,o]=m.useState(!0),[i,a]=m.useState(1),[l,u]=m.useState(!0),d=15,f=m.useCallback(async w=>{if(!(e!=null&&e.id)){o(!1);return}o(!0);try{const v=(w-1)*d,x=v+d-1,{data:b,error:_,count:S}=await ie.from("notifications").select("id, message, created_at, webtoon_id, chapter_id, is_read, webtoons (title, cover_image_url)",{count:"exact"}).eq("user_id",e.id).order("created_at",{ascending:!1}).range(v,x);if(_)throw _;const N=b.map(k=>{var j;return{...k,webtoonCoverUrl:(j=k.webtoons)!=null&&j.cover_image_url?_t(q9,k.webtoons.cover_image_url):null}});r(k=>w===1?N:[...k,...N]),u(N.length===d)}catch(v){console.error("Failed to fetch notifications:",v),t({title:"Erreur",description:"Impossible de charger les notifications.",variant:"destructive"})}finally{o(!1)}},[e==null?void 0:e.id,t]);m.useEffect(()=>{f(1)},[f]);const h=()=>{const w=i+1;a(w),f(w)},p=async w=>{try{await ie.from("notifications").update({is_read:!0}).eq("id",w),r(v=>v.map(x=>x.id===w?{...x,is_read:!0}:x))}catch{t({title:"Erreur",description:"Impossible de marquer comme lue.",variant:"destructive"})}},y=async()=>{if(e!=null&&e.id)try{await ie.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("is_read",!1),r(w=>w.map(v=>({...v,is_read:!0}))),t({title:"Succès",description:"Toutes les notifications non lues ont été marquées comme lues."})}catch{t({title:"Erreur",description:"Impossible de marquer toutes les notifications comme lues.",variant:"destructive"})}},g=async w=>{try{await ie.from("notifications").delete().eq("id",w),r(v=>v.filter(x=>x.id!==w)),t({title:"Succès",description:"Notification supprimée."})}catch{t({title:"Erreur",description:"Impossible de supprimer la notification.",variant:"destructive"})}};return c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"container mx-auto py-8 px-4 max-w-3xl",children:c.jsxs(Ke,{className:"shadow-lg",children:[c.jsx(Nt,{className:"border-b",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[c.jsxs(Tt,{className:"text-2xl font-bold flex items-center mb-2 sm:mb-0",children:[c.jsx(l$,{className:"mr-3 h-6 w-6 text-primary"}),"Toutes les Notifications"]}),n.some(w=>!w.is_read)&&c.jsxs(te,{onClick:y,size:"sm",variant:"outline",children:[c.jsx(Fh,{className:"mr-2 h-4 w-4"}),"Tout marquer comme lu"]})]})}),c.jsxs(et,{className:"p-0",children:[s&&i===1?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx(Ae,{className:"h-8 w-8 animate-spin text-primary"})}):n.length===0?c.jsx("div",{className:"p-6",children:c.jsx(Xa,{title:"Aucune notification",message:"Vous n'avez pas encore de notification."})}):c.jsx("ul",{className:"divide-y divide-border",children:n.map(w=>{var v,x,b;return c.jsx("li",{className:`p-4 hover:bg-muted/30 transition-colors ${w.is_read?"":"bg-primary/5"}`,children:c.jsxs("div",{className:"flex items-start space-x-4",children:[w.webtoonCoverUrl&&c.jsx(_e,{to:`/webtoon/${w.webtoon_id}`,children:c.jsx("img",{alt:((v=w.webtoons)==null?void 0:v.title)||"Couverture Webtoon",class:"h-16 w-16 rounded-md object-cover flex-shrink-0 border",src:"https://images.unsplash.com/photo-1572452532638-6a919c846ea5"})}),!w.webtoonCoverUrl&&c.jsx("div",{className:"h-16 w-16 rounded-md bg-muted flex-shrink-0 flex items-center justify-center text-muted-foreground text-sm border",children:((b=(x=w.webtoons)==null?void 0:x.title)==null?void 0:b.substring(0,3))||"N/A"}),c.jsxs("div",{className:"flex-grow",children:[c.jsx(_e,{to:`/webtoon/${w.slug}/chapter/${w.chapterNumber}`,className:"hover:underline",children:c.jsx("p",{className:`text-md font-medium ${w.is_read?"":"text-primary"}`,children:w.message})}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Ga(new Date(w.created_at),{addSuffix:!0,locale:qa})})]}),c.jsxs("div",{className:"flex flex-col space-y-1 items-end",children:[!w.is_read&&c.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>p(w.id),className:"text-xs h-7 px-2",children:[c.jsx(Fh,{className:"mr-1 h-3 w-3"})," Marquer lu"]}),c.jsx(te,{variant:"ghost",size:"icon",onClick:()=>g(w.id),className:"text-muted-foreground hover:text-destructive h-7 w-7",children:c.jsx(ls,{className:"h-4 w-4"})})]})]})},w.id)})}),l&&!s&&n.length>0&&c.jsx("div",{className:"p-4 text-center border-t",children:c.jsx(te,{onClick:h,variant:"outline",children:"Charger plus"})}),s&&i>1&&c.jsx("div",{className:"flex justify-center items-center py-4",children:c.jsx(Ae,{className:"h-6 w-6 animate-spin text-primary"})})]})]})})};function Y9(){return m.useCallback(async(e,t)=>{setLoading(!0),setError(null);try{const{data:n}=await supabase.from("webtoons").select("id, title").eq("slug",e).single();if(!n){setError("Webtoon non trouvé.");return}const{data:r}=await supabase.from("chapters").select("*").eq("slug",n.slug).eq("number",t).single();if(!r){setError("Chapitre non trouvé.");return}setChapterData({webtoonInfo:{id:n.slug,title:n.title},currentChapter:r})}catch(n){console.error("Erreur lors du chargement des données :",n),setError("Impossible de charger les données.")}finally{setLoading(!1)}},[]),c.jsxs(c.Fragment,{children:[c.jsxs(EA,{children:[c.jsxs(Be,{path:"/",element:c.jsx(Hz,{}),children:[c.jsx(Be,{index:!0,element:c.jsx(aU,{})}),c.jsx(Be,{path:"webtoons",element:c.jsx(t9,{})}),c.jsx(Be,{path:"webtoon/:slug",element:c.jsx(AU,{})}),c.jsx(Be,{path:"/webtoon/:slug/chapitre/:chapterNumber",element:c.jsx(Df,{})}),c.jsx(Be,{path:"/webtoon/:slug/chapter/:chapterNumber",element:c.jsx(Df,{})}),c.jsx(Be,{path:"auth",element:c.jsx(qV,{})}),c.jsxs(Be,{element:c.jsx(fw,{}),children:[c.jsx(Be,{path:"profile",element:c.jsx(XV,{})}),c.jsx(Be,{path:"profile/notifications",element:c.jsx(X9,{})})]})]}),c.jsx(Be,{path:"/admin",element:c.jsx(fw,{adminOnly:!0}),children:c.jsxs(Be,{element:c.jsx(n9,{}),children:[c.jsx(Be,{index:!0,element:c.jsx(r9,{})}),c.jsx(Be,{path:"webtoons",element:c.jsx(i9,{})}),c.jsx(Be,{path:"webtoons/new",element:c.jsx(lw,{})}),c.jsx(Be,{path:"webtoons/edit/:slug",element:c.jsx(lw,{})}),c.jsx(Be,{path:"webtoons/:slug/upload",element:c.jsx(_9,{})}),c.jsx(Be,{path:"webtoons/:slug/chapters/:chapterNumber/edit",element:c.jsx(E9,{})}),c.jsx(Be,{path:"webtoon/:slug/chapter/:chapterNumber",element:c.jsx(Df,{})}),c.jsx(Be,{path:"users",element:c.jsx(k9,{})}),c.jsx(Be,{path:"roles",element:c.jsx(V9,{})}),c.jsx(Be,{path:"comments",element:c.jsx(j9,{})}),c.jsx(Be,{path:"popups",element:c.jsx(G9,{})})]})}),c.jsx(Be,{path:"*",element:c.jsx(eu,{})})]}),c.jsx(M$,{}),c.jsxs(_e,{to:`/webtoon/${webtoon.slug}/chapter/${chapter.number}`,children:["Lire Chapitre ",chapter.number]})]})}Mf.createRoot(document.getElementById("root")).render(c.jsx(ce.StrictMode,{children:c.jsx($A,{children:c.jsx(RM,{children:c.jsx(Y9,{})})})}));export{Ap as g};
